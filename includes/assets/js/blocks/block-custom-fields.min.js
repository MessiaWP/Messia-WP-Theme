!function(){var e={855:function(){var e;(e=jQuery)((function(){var a={observer:!1,mapApiLoaded:!1,mapApiKey:e("body").data("key"),makeMaps:function(){var t=e(".input_address .map");0!==t.length&&void 0!==a.mapApiKey&&a.loadMap().then((function(){t.each((function(e,t){a.makeMap(t)}))}))},makeMap:function(e){var t=a.initMap(e);a.updateMap(t,e)},mapCantainerVisible:function(t,o){let n=[];for(let e=0;e<t.length;e++){const o=t[e];!0===o.isIntersecting&&(a.observer.unobserve(o.target),n.push(o))}0!==n.length&&a.loadMap().then((()=>{for(let t=0;t<n.length;t++){const o=n[t];!0===o.isIntersecting&&(a.observer.unobserve(o.target),a.makeMap(e(o.target)))}}))},loadMap:async function(){if(!0===a.mapApiLoaded)return Promise.resolve();try{return await MessiaExt.getScript(`https://maps.googleapis.com/maps/api/js?key=${a.mapApiKey}`),a.mapApiLoaded=!0,Promise.resolve("done")}catch(e){const a={message:"Error loading Google map.",error:e};return MessiaExt.logger.error(a),Promise.reject("fail")}},initMap:function(e){var a,t=new google.maps.StyledMapType([{stylers:[{hue:"#324156"},{saturation:"-100"},{lightness:"3"},{gamma:1.51}]}],{name:"Messia"}),o={zoom:10,center:{lat:e.data("lat"),lng:e.data("lng")},mapTypeControl:!1,scrollwheel:!1,streetViewControl:!1,mapTypeId:"messia_style",mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,"messia_style"],style:google.maps.MapTypeControlStyle.DEFAULT}};return(a=new google.maps.Map(e.get(0),o)).messia={markers:[]},a.mapTypes.set("messia_style",t),a.bounds=new google.maps.LatLngBounds,a},updateMap:function(a,t){var o=e(t).data("address"),n=e(t).data("lat"),s=e(t).data("lng"),r=new google.maps.LatLng(n,s);let i=new google.maps.InfoWindow({content:o}),p=new google.maps.Marker({position:r,map:a,icon:"/wp-content/themes/messia/includes/assets/images/svg/marker.svg"});a.messia.markers.push(p),a.bounds.extend(r),i.open(a,p),p.addListener("mouseover",(function(){i.open(a,p)})),p.addListener("mouseout",(function(){i.close(a,p)}))},makePopupsForMap:function(){0!==e(".map-popup-trigger").length&&e().fancybox({selector:".map-popup-trigger",src:e(this).data("src"),type:"inline",baseClass:"map-modal",clickOutside:"close",toolbar:!1,smallBtn:!0,parentEl:"body",opts:{buttons:["zoom","share","slideShow","fullScreen","download","thumbs","close"]},beforeLoad:function(t,o){var n=t.current.opts.$orig,s=e(n.data("src")).find(".map");a.loadMap(a.mapApiKey).then((function(){a.makeMap(s)}))}})},observeMapContainers:function(){var t=e(".input_address .map");if(0===t.length||void 0===a.mapApiKey)return;let o={root:document.querySelector("body"),rootMargin:"0px",threshold:1};a.observer=new IntersectionObserver(a.mapCantainerVisible,o);for(let e=0;e<t.length;e++){const o=t[e];a.observer.observe(o)}}};window.IntersectionObserver?a.observeMapContainers():a.makeMaps(),a.makePopupsForMap()}))},2007:function(){var e;(e=jQuery)((function(){var a={resizeTimeoutId:!1,adjustThumnails:function(){for(var a=e(".full-container .gallery-item"),t=0;t<a.length;t++){var o=e(a[t]),n=0,s=0,r=o.outerHeight(),i=o.closest(".custom_type-container.gallery");i.find(".thumb-container .gallery-item").each((function(){(n+=e(this).outerHeight())<=r?e(this).addClass("visible"):(e(this).removeClass("visible"),s+=1)})),s>0&&(e(".thumb-container").addClass("thumb-container-full"),i.find(".thumb-container .gallery-item.visible:visible a").find(".count-hide").remove(),i.find(".thumb-container .gallery-item.visible:visible a").last().append('<span class="count-hide">+'+s+"</span>"))}},prepareResize:function(){a.resizeTimeoutId&&clearTimeout(a.resizeTimeoutId),a.resizeTimeoutId=setTimeout(a.adjustThumnails,100)}};a.adjustThumnails(),e(window).on("resize",a.prepareResize)}))}},a={};function t(o){var n=a[o];if(void 0!==n)return n.exports;var s=a[o]={exports:{}};return e[o](s,s.exports,t),s.exports}!function(){"use strict";t(855),t(2007);jQuery((function(){}))}()}();