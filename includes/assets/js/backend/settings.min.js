!function(){var e={1346:function(e){e.exports=function(e,t){let a=null;const r=".messia-theme-access-form-holder",n="#messia-support-status-togle",s="#messia-support-status-revoke",i="input#access_duration",o="select#access_duration_units",l='input[name="theme_support_access"]',c=t(r);let d={duration:!1,units:!1},p={};const u=(e,t={})=>(d={...d,duration:parseFloat(e.find(i).val()),units:e.find(o).val()},p={...p,...t},e.find(l).val(JSON.stringify(p)),e.trigger("access-state-change"),p),f=()=>p,m=e=>{const a=f(),r=t(e.target).find(i),o=t(e.target).find(s),l=t(e.target).find(n);!1===a.access_valid_until?o.prop("disabled",!0).off("click",_):o.prop("disabled",!1).off("click",_).on("click",_),v(r)?l.prop("disabled",!1).off("click",_).on("click",_):l.prop("disabled",!0).off("click",_)},g=e=>{const a=t(e.target).parents(r);u(a)},h=e=>{const a=t(e.target),r=a.val(),n=a.prev(i),s=n.data("map");n.attr({min:s[r].min,max:s[r].max}),n.val(s[r].min).trigger("input")},v=e=>{const t=e.data("map"),a=parseFloat(e.val()),r=e.next(o).val();return!isNaN(a)&&(a>=t[r].min&&a<=t[r].max)},_=async function(s){const o=t(s.target).parents(r),l=e.tabs_selector.data("general"),c=o.find(".actions"),p=new FormData;p.append("action","messia_access_action"),p.append("messiaNonce",l.settingFormNonce),p.append("data",JSON.stringify({AJAX_Marker:messiaVars.AJAX_Marker,access_data:d,operation:t(this).data("operation")}));try{null!=a&&(a.abort(),a=null),a=new AbortController,(()=>{if(c.find("#loader_holder").find(".spinner").length>0)return;c.find("#loader_holder").append('<div class="spinner is-active"></div>')})();const r=await fetch(messiaVars.ajaxUrl,{method:"POST",body:p,signal:a.signal});(a=>{c.find("#loader_holder .spinner").remove(),"m200"===a.data.status_code?(t.fn.TabsPluginFrameWork("showMessage",a.data.user.message,"success"),o.attr("data-access-granted",a.data.access_granted),o.find(".status-title .status-value").text(a.data.status_title),o.find(n).val(a.data.btn_text),o.find(i).val(""),u(o,{access_valid_until:a.data.access_valid_until}),t(document).trigger("messiaContentIsSaved"),e.tabs_selector.trigger("resetSaveState")):t.fn.TabsPluginFrameWork("showMessage",a.data.user.message,"error")})(await r.json())}catch(e){"AbortError"!==e.name&&(t.fn.TabsPluginFrameWork("showMessage",e.message,"error"),MessiaExt.logger.error(e))}finally{a=null}};c.each((function(){t("body").on("input",`#${t(this).find(i).attr("id")}`,g),t("body").on("input",`#${t(this).find(o).attr("id")}`,h),t("body").on("access-state-change",r,m),u(t(this),JSON.parse(c.find(l).val()))}))}},1435:function(e){e.exports=function(e,t){let a=null;const r=".messia-theme-licence-form-holder #messia-licence-status-togle",n=".messia-theme-licence-form-holder input#licence_key, .messia-theme-licence-form-holder input#licence_status",s=e=>{const a={},r=t(n);for(var s=0;s<r.length;s++){var i=t(r[s]).attr("id"),o=t(r[s]).val();a[i]=o.trim()}t('.messia-theme-licence-form-holder input[name="theme_licence_data"]').val(JSON.stringify(a))},i=async function(r){const n=e.tabs_selector.data("general"),i=new FormData,o=t(this).parents(".messia-theme-licence-form-holder"),l=o.find(".actions"),c=o.find('input[id="licence_key"]'),d=o.find('input[id="licence_status"]');if(0===o.length&&0===l.length&&0===c.length&&0===d.length)return;i.append("action","messia_licence_action"),i.append("messiaNonce",n.settingFormNonce),i.append("data",JSON.stringify({AJAX_Marker:messiaVars.AJAX_Marker,licence_action:r,licence_key:c.val().trim(),licence_status:d.val(),is_network_admin:n.isNetworkAdmin}));const p=a=>{if(l.find("#loader_holder .spinner").remove(),"m200"===a.data.status_code){const r=o.find(".status-title .status-value"),n=o.find("input#licence_status"),i=a.data.response.status_code.startsWith("s")?"success":"error",l=t.fn.TabsPluginFrameWork("showMessage",a.data.response.message,i);o.attr("data-status",a.data.response.licence_status),n.val(a.data.response.licence_status),r.text(a.data.response.licence_status),c.val(a.data.key_val),t(this).val(a.data.btn_text),a.data.readonly?c.attr("readonly","readonly"):c.removeAttr("readonly"),"success"===i&&a.data.reload&&l.then((e=>{confirm(messiaVars.messages.reloadConfirm)&&window.location.reload()})),s(),t(document).trigger("messiaContentIsSaved"),e.tabs_selector.trigger("resetSaveState")}else t.fn.TabsPluginFrameWork("showMessage",a.data.response.message,"error")};try{null!=a&&(a.abort(),a=null),a=new AbortController,(()=>{if(l.find("#loader_holder").find(".spinner").length>0)return;l.find("#loader_holder").append('<div class="spinner is-active"></div>')})();const e=await fetch(messiaVars.ajaxUrl,{method:"POST",body:i,signal:a.signal});p(await e.json())}catch(e){"AbortError"!==e.name&&(t.fn.TabsPluginFrameWork("showMessage",e.message,"error"),MessiaExt.logger.error(e))}};t("body").on("beforeSave",s),t("body").on("click",r,(function(e){i.call(this,"toggleStatus")})),t('.callback .messia-theme-licence-form-holder input[name="theme_licence_data"]').on("updated",(function(e){const a=JSON.parse(t(this).val()),r=t(this).parents(".data");for(let e in a)r.find(`#${e}`).val(a[e])})),i.call(document.querySelector(r),"updateStatus")}},2629:function(e,t,a){var r;(r=jQuery)((function(){"use strict";var e;e={xhr:null,objects_search_slots:".callback .objects_search_order_fileds .object_order:not(.template) input",criteria_fields:".callback .rating_fileds .rating_criteria:not(.template) input",groups_fields:".callback .groups_fields .property_group:not(.template) input",font_options:r(".callback .font-option-wrapper"),tabs_selector:r("#tabs"),font_family_selectors:r("select.font-family"),font_variant_selectors:r("select.font-variant"),font_subset_selectors:r("select.font-subset"),presetSaved:function(e,t){if(0!=t)for(var a=0;a<t.length;a++)500===t[a].statusCode?r.fn.TabsPluginFrameWork("showMessage",t[a].messia_core,"error"):300===t[a].statusCode?r.fn.TabsPluginFrameWork("showMessage",t[a].messia_core,"warning"):r.fn.TabsPluginFrameWork("showMessage",t[a].messia_core,"success"),r.fn.TabsPluginFrameWork("playSound",.3)},criteriaTmplInput:function(t){var a=r(this).parents(".rating_criteria").removeClass("template");a.clone(!0).addClass("template").insertBefore(a).find("input").val(""),a.find("input").attr("id",e.getGUID())},serachOrderTmplInput:function(t){e.bindAutocomplete(r(this))},propertyGroupTmplInput:function(t){var a=r(this).parents(".property_group").removeClass("template");a.clone(!0).addClass("template").insertBefore(a).find("input").val(""),a.find("input").attr("id",e.getGUID())},criteriaInput:function(e){r(this).removeClass("empty")},serachOrderInput:function(e){r(this).removeClass("empty")},propertyGroupInput:function(e){r(this).removeClass("empty")},criteriaDelete:function(e){r(this).parents(".rating_fileds").find('input[type="hidden"][name]').trigger("change"),r(this).parents(".rating_criteria").remove()},serachOrderDelete:function(e){r(this).parents(".objects_search_order_fileds").find('input[type="hidden"][name]').trigger("change"),r(this).parents(".object_order").remove()},propertyGroupDelete:function(e){r(this).parents(".groups_fields").find('input[type="hidden"][name]').trigger("change"),r(this).parents(".property_group").remove()},getGUID:function(){return Math.random().toString(36).substr(2,10)},makeElementsSortable:function(e){e.sortable({items:".rating_criteria:not(.template), .object_order:not(.template), .property_group:not(.template)",revert:200,forceHelperSize:!0,forcePlaceholderSize:!0,opacity:1,distance:10,tolerance:"intersect",scroll:!0,scrollSensitivity:20,containment:"#wpwrap",placeholder:"sortable-placeholder",handle:".handler.move",beforeStop:function(e,t){},start:function(e,t){t.item.addClass("sorting")},stop:function(e,t){t.item.removeClass("sorting"),r(this).find('input[type="hidden"][name]').trigger("change")}})},saveCriterias:function(t){for(var a={},n=r(e.criteria_fields),s=0;s<n.length;s++)""==r(n[s]).val()&&(r(this).data("messiaProceedSaving").push(!1),r(n[s]).addClass("empty")),a[r(n[s]).attr("id")]=r(n[s]).val();r('.callback .rating_fileds input[name="site_rating_terms"]').val(JSON.stringify(a))},saveSearchOrder:function(t){for(var a=[],n=r(e.objects_search_slots),s=0;s<n.length;s++)""==r(n[s]).val()&&(r(this).data("messiaProceedSaving").push(!1),r(n[s]).addClass("empty")),r(n[s]).attr("postid"),a.push({postid:parseInt(r(n[s]).attr("postid")),title:r(n[s]).val()});r('.callback .objects_search_order_fileds input[name="objects_search_order"]').val(JSON.stringify(a))},savePropertyGroups:function(t){for(var a={},n=r(e.groups_fields),s=0;s<n.length;s++){var i=r(n[s]).attr("id"),o=r(n[s]).data("name"),l=r(n[s]).val();""==l&&(r(this).data("messiaProceedSaving").push(!1),r(n[s]).addClass("empty")),void 0===a[i]&&(a[i]={}),a[i][o]=l}r('.callback .groups_fields input[name="property_groups"]').val(JSON.stringify(a))},saveFontOptions:function(t){for(var a=e.font_options,n=0;n<a.length;n++){for(var s={},i=r(a[n]),o=i.find("select.font-option, input.font-option"),l=0;l<o.length;l++){var c=r(o[l]),d=(c.data("key"),r(o[l]).is("select")?r(o[l]).find(":selected"):r(o[l]).is("input"));c.hasClass("font-family")&&(s.collection=d.parent().data("collection"));var p=r(o[l]).val(),u=/^[-1-9]+$/.test(p);s[r(o[l]).data("key")]=u?parseInt(p):p}i.find('input[type="hidden"]#'+i.data("dataHolderId")).val(JSON.stringify(s))}},criteriaSaved:function(e){var t=JSON.parse(r(this).val()),a=r(".callback .rating_fileds .rating_criteria.template");r(".callback .rating_fileds .rating_criteria:not(.template)").remove();for(let e in t){var n=a.clone(!0).removeClass("template");n.find("input").attr("id",e).val(t[e]),n.insertBefore(r(this))}},serachOrderSaved:function(e){var t=JSON.parse(r(this).val()),a=r(".callback .objects_search_order_fileds .object_order.template");r(".callback .objects_search_order_fileds .object_order:not(.template)").remove();for(var n=0;n<t.length;n++){var s=a.clone(!0).removeClass("template");s.find("input").attr("postid",t[n].postid).val(t[n].title),s.insertBefore(r(this))}},propertyGroupSaved:function(e){var t=JSON.parse(r(this).val()),a=r(".callback .groups_fields .property_group.template");r(".callback .groups_fields .property_group:not(.template)").remove();for(let e in t){var n=a.clone(!0).removeClass("template");n.find("input").attr("id",e).val(t[e]),n.find('input[data-name="group_name"').attr("id",e).val(t[e].group_name),n.insertBefore(r(this))}},fontSaved:function(e){var t=JSON.parse(r(this).val()),a=r(this).parents(".font-option-wrapper"),n=a.find("select.font-family"),s=a.find("input.font-category"),i=a.find("select.font-variant"),o=a.find("select.font-subset"),l=a.find("input.font-size"),c=a.find("input.line-height"),d=a.find("input.color");n.val(t.family),s.val(t.category),i.val(t.variant),o.val(t.subset),l.val(t.size),c.val(t.line_height),d.val(t.color)},bindAutocomplete:function(t){t.autocomplete({delay:500,minLength:3,position:{my:"left top",at:"left bottom-1"},source:function(t,a){for(var n=[0],s=r(e.objects_search_slots),i=0;i<s.length;i++)n.push(r(s[i]).attr("postid"));e.xhr=r.ajax({type:"POST",url:messiaVars.ajaxUrl,data:{action:"search_objects",messiaNonce:messiaVars.messiaNonce,data:{AJAX_Marker:messiaVars.AJAX_Marker,try_name:t.term,exclude_ids:n}},beforeSend:function(){null!=e.xhr&&(e.xhr.abort(),e.xhr=null)},success:function(e){a(e.data.objects)},error:function(t,a,r){0!==e.xhr.status||e.xhr.statusText}})},select:function(t,a){var n;(n=r(t.target).parents(".object_order")).hasClass("template")&&(n=r(t.target).parents(".object_order").removeClass("template")).clone().addClass("template").insertBefore(n).find("input").val("").on("input",e.serachOrderTmplInput),r(t.target).attr("postid",a.item.postid)},search(e,t){},open:function(e,t){r(e.target).autocomplete("widget").css("z-index",101)},close:function(e,t){},change:function(e,t){var a=r(e.target).data("uiAutocomplete").previous;void 0!==a&&""!==a&&r(e.target).val(a)}})},updateFontCategory:function(e){var t=r(this).find(":selected").data("category");r(this).parents(".font-option-wrapper").find("input.font-category").val(t)},updateFontVariants:function(t){var a,n,s=r(this).find(":selected").data("variants"),i=r(this).find(":selected").attr("data-subsets"),o=r(this).parents(".font-option-wrapper").find("select.font-variant"),l=o.val(),c=0,d=[];o.val(null).empty();for(var p=0;p<s.length;p++)n=!1,s[p].id===l&&(n=!0),"regular"===s[p].id&&(c=p),(a=new Option(s[p].text,s[p].id,!1,n)).setAttribute("data-subsets",i),d.push(a);!1===n&&(d[c].selected=!0),o.append(d),o.trigger("change"),r(e.font_variant_selectors).trigger("select2:select")},updateFontSubsets:function(e){var t,a,n=r(this).find(":selected").data("subsets"),s=r(this).parents(".font-option-wrapper").find("select.font-subset"),i=s.val(),o=[];s.val(null).empty();for(var l=0;l<n.length;l++)a=!1,n[l].id===i&&(a=!0),n[l].id,t=new Option(n[l].text,n[l].id,!1,a),o.push(t);s.append(o),s.trigger("change")},updateFontSizes:function(e){var t=r(this).find(":selected").data("fontSize");void 0!==t&&r(this).parents(".font-option-wrapper").find("input.font-size").val(t)},updateLineHeight:function(e){var t=r(this).find(":selected").data("lineHeight");void 0!==t&&r(this).parents(".font-option-wrapper").find("input.line-height").val(t)},selectMedia:function(){r(this).messiaMediaSelector(e.imageSelected)},removeMedia:function(t){t.stopPropagation();var a=r(this).parents(".images");a.find(".template.multiple").length>0?r(this).parents(".icon").remove():r(this).removeClass("remove-image").addClass("placeholder-image").parent().removeAttr("id").find(".image").remove(),e.updateImagesInput(a),e.imagesSlotsSortableAbility(a)},imageSelected:function(t,a){r.fn.messiaAppendMediaSelection(t,a);var n=t.parents(".images");e.updateImagesInput(n),e.imagesSlotsSortableAbility(t)},updateImagesInput:function(e){for(var t=[],a=e.find(".icon"),n=e.find('input[type="hidden"]'),s=0;s<a.length;s++)0===r(a[s]).find(".placeholder-image").length&&t.push(r(a[s]).data("imageinfo"));let i=t.filter((e=>(delete e.url,e)));n.val(JSON.stringify(i)),n.trigger("change")},imagesSlotsSortableAbility:function(e){var t=e.parents(".images").find(".images-slot");t.find(".icon").length<=2?t.sortable("disable"):t.sortable("enable")},imagesSlotsSortableInit:function(){for(var t=r(".callback .images-slot"),a=0;a<t.length;a++){var n=r(t[a]);t.sortable({revert:200,forceHelperSize:!0,forcePlaceholderSize:!0,opacity:.5,items:"> .icon[id]",distance:10,tolerance:"pointer",scroll:!1,placeholder:"sortable-placeholder",beforeStop:function(t,a){a.helper.css({height:"",width:""}),e.updateImagesInput(a.item.parents(".images"))}});var s=n.parents(".images");e.imagesSlotsSortableAbility(s)}}},a(1435)(e,r),a(1346)(e,r),r(".color-picker").spectrum({type:"component",showInput:"true",showInitial:"true",allowEmpty:"false"}),e.imagesSlotsSortableInit(),e.makeElementsSortable(r(".callback .rating_fileds")),r(".callback .rating_fileds").on("input",".rating_criteria.template input",e.criteriaTmplInput),r(".callback .rating_fileds").on("input",".rating_criteria:not(.template) input",e.criteriaInput),r(".callback .rating_fileds").on("click",".rating_criteria:not(.template) .handler.remove",e.criteriaDelete),r('.callback .rating_fileds input[name="site_rating_terms"]').on("updated",e.criteriaSaved),e.makeElementsSortable(r(".callback .objects_search_order_fileds")),r(".callback .objects_search_order_fileds").on("input",".object_order.template input",e.serachOrderTmplInput),r(".callback .objects_search_order_fileds").on("input",".object_order:not(.template) input",e.serachOrderInput),r(".callback .objects_search_order_fileds").on("click",".object_order:not(.template) .handler.remove",e.serachOrderDelete),r('.callback .objects_search_order_fileds input[name="objects_search_order"]').on("updated",e.serachOrderSaved),e.makeElementsSortable(r(".callback .groups_fields")),r(".callback .groups_fields").on("input",".property_group.template input",e.propertyGroupTmplInput),r(".callback .groups_fields").on("input",".property_group:not(.template) input",e.propertyGroupInput),r(".callback .groups_fields").on("click",".property_group:not(.template) .handler.remove",e.propertyGroupDelete),r('.callback .groups_fields input[name="property_groups"]').on("updated",e.propertyGroupSaved),r(".callback .font-option-wrapper input.font-setting-holder").on("updated",e.fontSaved),r("body").on("click touchstart",".callback .images-slot .icon .edit-image",e.selectMedia),r("body").on("click touchstart",".callback .images-slot .icon .remove-image",e.removeMedia),r("body").on("beforeSave",e.saveCriterias),r("body").on("beforeSave",e.savePropertyGroups),r("body").on("beforeSave",e.saveSearchOrder),r("body").on("beforeSave",e.saveFontOptions),r("body").on("beforeSave",e.saveLicenсeData),e.tabs_selector.on("presetSaved",(function(t,a,r){e.presetSaved(a,r)}));for(var t=0;t<r(e.objects_search_slots).length;t++)e.bindAutocomplete(r(r(e.objects_search_slots)[t]));!1===r.fn.messiaIsMobile()&&r("select.font-option").select2({placeholder:messiaVars.messages.selectOptions}),r(e.font_family_selectors).on("select2:select",e.updateFontCategory),r(e.font_family_selectors).on("select2:select",e.updateFontVariants),r(e.font_family_selectors).on("select2:select",e.updateFontSizes),r(e.font_family_selectors).on("select2:select",e.updateLineHeight),r(e.font_variant_selectors).on("select2:select",e.updateFontSubsets),r(window).on("load",(function(e){}))}))}},t={};function a(r){var n=t[r];if(void 0!==n)return n.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,a),s.exports}a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";a(2629)}()}();