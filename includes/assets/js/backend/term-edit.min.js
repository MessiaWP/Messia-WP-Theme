!function(){var e={6106:function(){var e;(e=jQuery)((function(){"use strict";var t;t={select2Multiple:"",select2Async:"",selectTermMedia:function(i){e(this).messiaMediaSelector(t.imageSelectedTermThumbnail)},selectConstructorMedia:function(){e(this).messiaMediaSelector(t.imageSelectedConstructor)},imageSelectedTermThumbnail:function(t,i){e.fn.messiaAppendMediaSelection(t,i);for(var r=[],n=t.parent().find(".icon"),a=t.parents(".term_thumbnail, .term_icon").find('input[type="hidden"]'),s=0;s<n.length;s++)0===e(n[s]).find(".placeholder-image").length&&r.push(e(n[s]).data("imageinfo"));let o=r.filter((e=>(delete e.url,e)));a.val(JSON.stringify(o))},imageSelectedConstructor:function(i,r){e.fn.messiaAppendMediaSelection(i,r);for(var n=[],a=i.parent().find(".icon"),s=i.parents(".titles-wrapper").find('[m-name="icon"]'),o=0;o<a.length;o++)0===e(a[o]).find(".placeholder-image").length&&n.push(e(a[o]).data("imageinfo"));let l=n.filter((e=>(delete e.url,e)));s.val(JSON.stringify(l)),t.setDirty()},removeTermMedia:function(t){t.stopPropagation(),e(this).removeClass("remove-image").addClass("placeholder-image").parent().removeAttr("id").find(".image").remove(),e(this).parents(".form-field.messia.term_icon, .form-field.messia.term_thumbnail").find('input[type="hidden"][name="term_icon"], input[type="hidden"][name="term_thumbnail"]').val("")},removeConstructorMedia:function(t){t.stopPropagation(),e(this).removeClass("remove-image").addClass("placeholder-image").parent().removeAttr("id").find(".image").remove(),e(this).parents(".titles-wrapper").find('[m-name="icon"]').val("")},closeAdd:function(e){e.find(".field-title").append('<span class="remove"></span>')},deleteSlot:function(t){e(t.target).parents(".constructor-field").animate({opacity:0},400,(function(){e(this).remove()}))},showSlotSettings:function(i){var r=i.item.find(".settings");if(!0===i.item.data("visible"))return;if(0===r.children().length)return;const n=r.find("input, select");for(let t=0;t<n.length;t++){const i=e(n[t]),a=i.attr("id"),s=i.attr("name"),o=r.find(`label[for="${a}"]`),l=r.find(`input[name="${s}"]`),c=Math.random().toString(36).substring(2).split(".")[0],d=Math.random().toString(36).substring(2).split(".")[0];i.attr("id",d),o.attr("for",d),l.attr("name",c)}if("none"==r.css("display")){var a=i.item.outerWidth();i.item.css({height:"",width:""}).find(".field-title").append('<span class="remove"></span>');var s=i.item.outerWidth();i.item.css({width:a}),i.item.animate({width:s+"px"},200,(function(){e(this).css({width:""}),r.css("display","block");var n=r.outerHeight(),a=r.outerWidth();r.css({height:0,width:0}),r.animate({height:n+"px",width:a+"px"},{duration:400,start:t.adjustIcon.call(e(this)),complete:function(){e(this).css({height:"",width:""}),i.item.data("visible",!0)}})}))}},adjustIcon:function(t){var i=e(this).find('.titles-wrapper [m-name="title"]'),r=e(this).find('.titles-wrapper [m-name="slug"]'),n=e(this).find(".titles-wrapper .icon"),a=i.outerHeight()+parseInt(i.css("margin-top"))+parseInt(i.css("margin-bottom"))+r.outerHeight()+parseInt(r.css("margin-top"))+parseInt(r.css("margin-bottom"))-parseInt(n.css("padding-top"))-parseInt(n.css("padding-bottom"))-parseInt(n.css("margin-top"))-parseInt(n.css("margin-bottom"))-parseInt(n.css("border-top-width"))-parseInt(n.css("border-bottom-width"));n.css("width",a),n.css("height",a)},save:function(i){var r=t.prepare();if(!1===r)return!1;e("input#constructor_cf").val(JSON.stringify(r))},prepare:function(){for(var t=[],i=[],r=[],n=e("#constructed-wrapper").find("div.constructor-field"),a=0;a<n.length;a++){for(var s=e(n[a]),o=s.find(".settings input, .settings select"),l={field_type:s.attr("type"),caps:[]},c=0;c<o.length;c++){var d=e(o[c]);if("true"==d.attr("m-required")&&""===d.val()&&(d.addClass("required"),i.push(messiaVars.messages.fillRequiredFields)),"slug"==d.attr("m-name")&&(t.includes(d.val())&&""!=d.val()?i.push(messiaVars.messages.removeDuplicatedSlugs):t.push(d.val())),"checkbox"===d.attr("type"))var m=Number(d.prop("checked"));else if("radio"===d.attr("type")){const e=d.attr("name");m=d.parent().find(`[name="${e}"]:checked`).val()}else m=d.val();const r=d.attr("m-name");1===d.parents(".caps").length?d.prop("checked")&&l.caps.push(r):l[r]=m}r.push(l)}return i.length>0&&(r=!1,alert(Array.from(new Set(i)).join("\n"))),r},openSlugForEdit(i){var r=e(i.target);r.hasClass("locked")&&0!==r.parents(".saved").length&&(i.preventDefault(),e.fn.messiaModalWarning(!1,messiaVars.messages.constructorSlugEdit,[]).element.one("dialogClosed",{caller:r},t.onConfirmSlugEdit))},showSchema(t){t.preventDefault();var i=e(this).next(".modal-content").prop("outerHTML");e.fn.messiaModalWarning(!1,i,!1)},setDefaultSegmentTip:function(t){e("tbody#the-list #tag-"+messiaVars.defaultSegmentTermId+" th.check-column").empty().append('<span class="messia-help-tip" title="'+messiaVars.messages.segmentTermIsReadOnly+'"></span>')},setDirty:function(t){e(document).trigger("messiaContentIsDirty")},clearDirty:function(t){e(document).trigger("messiaContentIsSaved")},quickEdit:function(t){var i=e(this).closest("tr").find("td.term_as_filter").find(".value").data("checked"),r=e(this).closest("tr").find("td.term_on_card").find(".value").data("checked");e(':input[name="term_as_filter"]',".inline-edit-row").prop("checked",i),e(':input[name="term_on_card"]',".inline-edit-row").prop("checked",r)},onConfirmSlugEdit:function(e,t){"ok"===t?e.data.caller.removeClass("locked"):e.data.caller.addClass("locked")},initSelect2EditInline:function(){!0===e.fn.messiaIsMobile()&&(t.select2Multiple="[multiple]");var i=[{selector:e(this).parents(".wp-list-table").find(`.inline-edit-row.inline-editor select[name="term_order_target_id"]${t.select2Multiple}, .inline-edit-row.inline-editor select[name="term_order_target_id"]${t.select2Async}`),arguments:{minimumResultsForSearch:3,width:"300px",ajax:{type:"POST",delay:450,url:messiaVars.ajaxUrl,dataType:"json",data:function(e){let t=this.parents(".inline-edit-row.inline-editor"),i=t.attr("id").split("-"),r=t.find('.inline-edit-save.submit input[name="taxonomy"]').val();return{action:"get_term_neighbors",AJAX_Marker:messiaVars.AJAX_Marker,messiaNonce:messiaVars.messiaNonce,taxonomy:r,neighbor:i[i.length-1],search:void 0===e.term?null:e.term,page:e.page}},processResults:function(e){return{results:e.data.terms}},cache:!0}}}];e.fn.messiaInitSelect2(i)},toggleDisableTargetSelector:function(){var t=e(this).parents(".inline-edit-row.inline-editor").find('select[name="term_order_target_id"]');"reset"===e(this).val()?t.prop("disabled",!0):t.prop("disabled",!1)}};const i=e("#constructed-wrapper").sortable({forceHelperSize:!0,forcePlaceholderSize:!0,opacity:1,tolerance:"intersect",scroll:!0,scrollSensitivity:20,containment:"#wpwrap",placeholder:"sortable-placeholder",handle:".move",start:(t,i)=>{i.helper.addClass("is-elevated"),e("body").addClass("cursor-grabbing")},beforeStop:(t,i)=>{e("body").removeClass("cursor-grabbing")},stop:(e,i)=>{i.item.removeClass("is-elevated"),t.showSlotSettings(i),t.setDirty()}});e("#constructor-wrapper .constructor-field").draggable({connectToSortable:"#constructed-wrapper",helper:"clone",revert:"invalid",scroll:!1,revertDuration:200,handle:".move",start:(t,r)=>{r.helper.addClass("is-elevated"),i.addClass("dragging"),e("body").addClass("cursor-grabbing")},beforeStop:(t,i)=>{e("body").removeClass("cursor-grabbing")},stop:(e,t)=>{t.helper.removeClass("is-elevated"),i.removeClass("dragging")}}),e("body").on("click",".form-field.messia.term_icon .icon .edit-image, .form-field.messia.term_thumbnail .icon .edit-image",t.selectTermMedia),e("body").on("click touchstart",".form-field.messia.term_icon .icon .remove-image, .form-field.messia.term_thumbnail .icon .remove-image",t.removeTermMedia),e("#constructed-wrapper").on("click",".field-title .remove",t.deleteSlot),e("#constructed-wrapper").on("click touchstart",".titles-wrapper .icon .edit-image",t.selectConstructorMedia),e("#constructed-wrapper").on("click touchstart",".titles-wrapper .icon .remove-image",t.removeConstructorMedia),e("#constructed-wrapper").on("keydown",'.titles-wrapper .titles input[m-name="slug"]',t.openSlugForEdit),e("#the-list").on("click",".editinline",t.quickEdit),e("body").on("input","#edittag input, #edittag textarea, #edittag select",t.setDirty),e("form#edittag").on("submit",t.clearDirty),e("#constructed-wrapper .constructor-field .settings").each((function(){t.adjustIcon.call(e(this))})),e(".areas-warning").on("click",".schema.popup",t.showSchema),e("#the-list").on("click",".editinline",t.initSelect2EditInline),e(".wp-list-table").on("click",'input[name="term_order_position_type"]',t.toggleDisableTargetSelector),e('#edittag input[type="submit"]').on("click",t.save),t.setDefaultSegmentTip(),e(".macs tbody#the-list .messia-help-tip").tooltip()}))}},t={};function i(r){var n=t[r];if(void 0!==n)return n.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,i),a.exports}i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,{a:t}),t},i.d=function(e,t){for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";i(6106)}()}();