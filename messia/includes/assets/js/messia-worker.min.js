!function(){var e={8186:function(){!function(){"use strict";const e="messia",t="caches"in self,r="indexedDB"in self,n=self.location.host,s={},a={audio:300,audioworklet:300,document:300,embed:300,font:300,image:300,manifest:300,object:300,paintworklet:300,report:300,script:300,serviceworker:300,sharedworker:300,style:300,track:300,video:300,worker:300,xslt:300},o=[/wp-json/,/wp-admin\/admin.php/,/wp-admin\/admin-ajax.php/],c=[/wp-admin\/admin.php/],i=e=>{const t=v();e.waitUntil(t)},l=e=>{const t=clients.claim().then((async()=>{const e=new Date;return e.setSeconds(e.getSeconds()+86400),await u(),await h("options","cache_rules",{next_purge:e.toGMTString()}),Promise.resolve()})).catch((async e=>{const t=(await self.clients.matchAll()).map((t=>f(t.id,{type:"logger",method:"error",body:{message:"There was an error operating with IndexedDB.",error:e}})));return Promise.all(t)}));e.waitUntil(t)},u=async()=>{try{const t="options",r=indexedDB.open(e,1);return await new Promise(((e,n)=>{r.onupgradeneeded=e=>{e.target.result.createObjectStore(t).createIndex("next_purge","next_purge",{unique:!0})},r.onsuccess=t=>e(t.target.result),r.onerror=e=>n(e)}))}catch(e){return Promise.reject(e)}},d=async()=>{try{const t=indexedDB.open(e,1);return await new Promise(((e,r)=>{t.onsuccess=t=>e(t.target.result),t.onerror=e=>r(e)}))}catch(e){return Promise.reject(e)}},h=async(e,t=!1,r)=>{try{const n=(await d()).transaction([e],"readwrite").objectStore(e),s=t?n.put(r,t):n.put(r);return await new Promise(((e,t)=>{s.onsuccess=r=>r.target.result?e(r.target.result):t(r.target),s.onerror=e=>t(e)}))}catch(e){return Promise.reject(e)}},g=e=>{switch(e.data.command){case"messiaSkipWaiting":self.skipWaiting();break;case"messiaUnregisterSelf":self.removeEventListener("fetch",m),self.removeEventListener("install",i),self.removeEventListener("activate",l),self.removeEventListener("message",g);const t=Promise.allSettled([y(),v()]);e.waitUntil(t),t.then((t=>{f(e.source.id,{type:"logger",method:"log",body:[`Unregister worker report: ${L(t[0])}`,`Cache clear report: ${L(t[1])}`]})})).catch((t=>{f(e.source.id,{type:"logger",method:"error",body:{message:"Something went wrong on worker unregistration.",error:t}})}));break;case"messiaCacheDelete":const r=e.data.types,n=Promise;v(r).then((t=>{f(e.source.id,{type:"logger",method:"log",body:{message:`Cache keys by alias(es) '${r.join(", ")}' processed.`,result:t}})})).catch((t=>{f(e.source.id,{type:"logger",method:"error",body:{message:"Something went wrong on cache deleting.",error:t}})})).finally((()=>n.resolve())),e.waitUntil(n)}},m=function(e){if(!e.request.url.startsWith(self.location.origin))return!1;const n=new URL(e.request.url);if("https:"!==n.protocol)return f(e.clientId,{type:"logger",method:"warn",body:{message:"Non secure request ignores by worker.",URL:e.request.url}}),!1;const s=b(n);if(!s)return!1;if(!x(e.request))return!1;if(!1===t||!1===r)return void e.respondWith(p(e,s));const a=caches.match(e.request).then((t=>void 0===t?p(e,s):(w(e.request,t,s).catch((t=>{f(e.clientId,{type:"logger",method:"error",body:{message:`Fail to update cache for URL ${e.request.url}`,error:t}})})),j().then((t=>{t&&f(e.clientId,{type:"logger",method:"log",body:"Worker cache became outdated and was completely purged."})})).catch((t=>{f(e.clientId,{type:"logger",method:"error",body:{message:"Error on cache purging.",error:t}})})),t)));e.respondWith(a)},p=async(e,t)=>{try{const r=await caches.open(t),n=(await fetch(e.request)).clone(),s=P(n,{"Last-Fetched-On":(new Date).toGMTString(),"Fetch-Error":!1}),a=await s,o=a.clone();return await r.put(e.request,o),a}catch(t){f(e.clientId,{type:"logger",method:"error",body:{message:"Request fail",reasone:t}})}},w=async(e,t,r)=>{const n=await caches.open(r),s=new URL(e.url),a=t.headers.get("Last-Modified")||!1,o=t.headers.get("Fetch-Error"),c=s.pathname.includes("fonts.gstatic.com");let i=e.clone();if(a&&!1===o&&!1===c)switch(e.method){case"GET":case"HEAD":i=new Request(e,{mode:"same-origin",headers:e.headers}),i.headers.set("If-Modified-Since",a)}else{if(!S(e,t))return Promise.resolve("ok")}try{const t=await fetch(i),r=t.clone();if(200===t.status){P(r,{"Last-Fetched-On":(new Date).toGMTString(),"Fetch-Error":!1}).then((t=>n.put(e,t)))}return Promise.resolve("ok")}catch(t){const r=(await fetch(e)).clone();return P(r,{"Last-Fetched-On":(new Date).toGMTString(),"Fetch-Error":!0}).then((t=>n.put(e,t))),Promise.reject(t)}},f=async(e,t)=>{(await clients.get(e)).postMessage(t)},y=async()=>await self.registration.unregister(),b=e=>{let t=!1,r=!1;const a=e.pathname.match(/(?<=\.)(?:png|jpeg|gif|svg|webp)$/),o=e.pathname.match(/(?<=\.)(?:woff2)$/),c=e.pathname.match(/(?<=\.)(?:css)$/),i=e.pathname.match(/(?<=\.)(?:js)$/);switch(!0){case null!==a:r=`images/${a[0]}`;break;case null!==o:r=`fonts/${o[0]}`;break;case null!==c:r=`styles/${c[0]}`;break;case null!==i:r=`scripts/${i[0]}`}return r&&(s[r]=`${n}/v1/${r}`,t=s[r]),t},v=async(e=[])=>{const t=await k(e);if(t.length>0){const e=t.map((async e=>await caches.delete(e)?`Key ${e} succesfully deleted.`:`Fail to delete ${e}`));return await Promise.all(e)}{const t=e.length>0?e.join(", "):"All",r=[Promise.resolve(`No keys found to delete by given aliases: '${t}'`)];return await Promise.all(r)}},j=async()=>{try{const e=await(async(e,t)=>{try{const r=(await d()).transaction([e],"readwrite").objectStore(e).get(t);return await new Promise(((e,t)=>{r.onsuccess=t=>e(t.target.result),r.onerror=e=>t(e)}))}catch(e){return Promise.reject(e)}})("options","cache_rules"),t=new Date,r=new Date(e.next_purge);return await new Promise(((e,n)=>r-t>0?e(!1):v().then((async e=>{const t=new Date;return t.setSeconds(t.getSeconds()+86400),await h("options","cache_rules",{next_purge:t.toGMTString()})})).then((t=>e(!0))).catch((e=>n(e)))))}catch(e){return Promise.reject(e)}},k=async(e=[])=>{const t=await caches.keys();if(e.length>0){return t.filter((t=>{const r=$(s,t);return e.includes(r)}))}return t},P=async(e=new Response,t={})=>{const r=e.clone(),n=new Headers(r.headers),s=await r.blob();for(const[e,r]of Object.entries(t))n.set(e,r);return new Response(s,{status:e.status,statusText:e.statusText,headers:n})},x=e=>{const t=c.filter((t=>e.referrer.match(t))),r=o.filter((t=>e.url.match(t)));return 0===t.length&&0===r.length},S=(e,t)=>{const r=t.headers.get("Last-Fetched-On")||!1;if(r){const t=e.destination;return(new Date-new Date(r))/1e3>a[t]||300}return!0},L=function(e,t="-",r="; "){return Object.keys(e).map((r=>[r,"array"==typeof e[r]?e[r].join(", "):e[r]].join(t))).join(r)},$=(e,t)=>Object.keys(e).find((r=>e[r]===t));self.addEventListener("install",i),self.addEventListener("activate",l),self.addEventListener("fetch",m),self.addEventListener("message",g)}()}},t={};function r(n){var s=t[n];if(void 0!==s)return s.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,r),a.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";r(8186)}()}();