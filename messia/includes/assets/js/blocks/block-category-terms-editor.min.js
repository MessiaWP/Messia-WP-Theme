!function(){var e={7109:function(e,t,a){!function(e,t){const{apiFetch:r}=e,{registerBlockType:s}=e.blocks,{Component:o,Fragment:n,useState:c,useEffect:i,useRef:l}=e.element,{serverSideRender:m}=e,{InspectorControls:d,BlockControls:u}=e.blockEditor,{ToggleControl:g,Flex:f,FlexItem:h,PanelBody:p,Notice:y,SelectControl:v,ToolbarGroup:b,ToolbarButton:E,Placeholder:w,Disabled:R,Card:x,Spinner:C,TabPanel:k}=e.components,{__:N}=e.i18n,S=React.createElement("svg",{viewBox:"0 0 274 87",xmlns:"http://www.w3.org/2000/svg"},React.createElement("g",{className:"layer"},React.createElement("g",{id:"svg_33"},React.createElement("g",{id:"svg_19"},React.createElement("rect",{fill:"#000000",fillOpacity:"0",height:"77.12392",id:"svg_10",rx:"2",ry:"2",stroke:"#7f7f7f",strokeWidth:"2",width:"77.12392",x:"4.65838",y:"5.08211"}),React.createElement("rect",{fill:"#7f7f7f",height:"8.18963",id:"svg_12",rx:"1",ry:"1",width:"57.87731",x:"14.28169",y:"59.71144"}),React.createElement("path",{d:"m14.7842,53.67063l14.45104,-19.88229l10.1037,6.58734l16.27672,-23.0751l16.04084,36.46239l-56.87229,-0.09234z",fill:"#7f7f7f",id:"svg_11"})),React.createElement("g",{id:"svg_20"},React.createElement("rect",{fill:"#000000",fillOpacity:"0",height:"77.12392",id:"svg_21",rx:"2",ry:"2",stroke:"#7f7f7f",strokeWidth:"2",width:"77.12392",x:"98.09058",y:"5.08211"}),React.createElement("rect",{fill:"#7f7f7f",height:"8.18963",id:"svg_24",rx:"1",ry:"1",width:"57.87731",x:"107.71389",y:"59.71144"}),React.createElement("path",{d:"m108.2164,53.67063l14.45104,-19.88229l10.1037,6.58734l16.27672,-23.0751l16.04084,36.46239l-56.87229,-0.09234z",fill:"#7f7f7f",id:"svg_25"})),React.createElement("g",{id:"svg_26"},React.createElement("rect",{fill:"#000000",fillOpacity:"0",height:"77.12392",id:"svg_27",rx:"2",ry:"2",stroke:"#7f7f7f",strokeWidth:"2",width:"77.12392",x:"191.73465",y:"5.08211"}),React.createElement("rect",{fill:"#7f7f7f",height:"8.18963",id:"svg_29",rx:"1",ry:"1",width:"57.87731",x:"201.35795",y:"59.71144"}),React.createElement("path",{d:"m201.86046,53.67063l14.45104,-19.88229l10.1037,6.58734l16.27672,-23.0751l16.04084,36.46239l-56.87229,-0.09234z",fill:"#7f7f7f",id:"svg_30"}))))),_=a(4670);let z=!1;s("messia/block-category-terms",{title:N("Category's terms","messia"),description:N("Terms of taxonomy Category by parameters","messia"),icon:React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},React.createElement("path",{d:"M6 21c0 1.657-1.344 3-3 3-1.657 0-3-1.343-3-3s1.343-3 3-3c1.656 0 3 1.343 3 3zm6-3c-1.657 0-3 1.343-3 3s1.343 3 3 3c1.656 0 3-1.343 3-3s-1.344-3-3-3zm0-18c-1.657 0-3 1.343-3 3s1.343 3 3 3c1.656 0 3-1.343 3-3s-1.344-3-3-3zm9 18c-1.656 0-3 1.343-3 3s1.344 3 3 3 3-1.343 3-3-1.344-3-3-3zm-1.577-1.721l-6.423-5.028v-3.352c-.323.066-.658.101-1 .101s-.677-.035-1-.101v3.352l-6.423 5.028c.694.233 1.323.602 1.844 1.093l5.579-4.372 5.579 4.373c.522-.492 1.15-.861 1.844-1.094z"})),category:"messia",keywords:["category"],styles:[],variations:[],attributes:{categoriesConstructed:{type:"array",default:[]},isExample:{type:"boolean",default:!1},withCount:{type:"boolean",default:!0},slider:{type:"object",default:{active:!0}}},example:{attributes:{isExample:!0}},supports:{multiple:!0},edit:function(a){const{attributes:s,setAttributes:o,className:T,name:M}=a,[O,P]=c(t()),[j,A]=c(!0),[B,D]=c(!1),[V,W]=c({segment:[],category:[]});let I=l();const q=N("Category term slot","messia"),F=N("Add Category term","messia"),$=e=>{t(e.target).parents(".category-slot").animate({opacity:0},400,(function(){t(this).addClass("removed").css("display","none");const e=t(I.current).find(".category-constructed .category-slot");H(e)}))},L=()=>{const e=t(I.current).find(".category-constructed").not("ui-sortable").sortable({forceHelperSize:!0,forcePlaceholderSize:!0,opacity:1,tolerance:"intersect",scroll:!0,scrollSensitivity:20,containment:".edit-post-visual-editor",placeholder:"sortable-placeholder",handle:".move",start:(e,a)=>{a.item.addClass("is-elevated"),t("body").addClass("cursor-grabbing")},beforeStop:(e,a)=>{t("body").removeClass("cursor-grabbing")},stop:(e,t)=>{t.item.removeClass("is-elevated"),t.item.find(".title .text").text(q),Q(t).then((e=>{P(e.item)}))}});t(I.current).find(".category-templates .category-slot").not(".ui-draggable").draggable({connectToSortable:".category-constructed",helper:"clone",revert:"invalid",scroll:!1,revertDuration:200,handle:".move",zIndex:10,start:(a,r)=>{r.helper.addClass("is-elevated"),t("body").addClass("cursor-grabbing"),e.addClass("dragging")},beforeStop:(e,a)=>{t("body").removeClass("cursor-grabbing")},stop:(t,a)=>{a.helper.removeClass("is-elevated"),e.removeClass("dragging")}})},H=e=>{let a=[];const r=e.parents(".messia-tabs-panel").find('[role="tabpanel"]').attr("id").match(/segment-(.+)-slug/)[1];for(let e=0;e<s.categoriesConstructed.length;e++)s.categoriesConstructed[e].segmentSlug!==r&&a.push(s.categoriesConstructed[e]);for(let s=0;s<e.length;s++){let o;if(t(e[s]).hasClass("removed"))continue;o=void 0===t(e[s]).data("key")?_.generate():t(e[s]).data("key");if("category"===t(e[s]).data("type"))a.push({id:o,segmentSlug:r,categorySlug:t(e[s]).find(".settings select").val()})}O.hasClass("ui-draggable")&&O.addClass("remove-before-render"),o({categoriesConstructed:a})},Q=async e=>{if(e.item.hasClass("saved"))return Promise.resolve(e);const a=e.item.outerWidth();e.item.css({height:"",width:""});const r=e.item.outerWidth();return e.item.css({width:a}).addClass("dropped"),await new Promise(((a,s)=>{e.item.animate({width:r+"px"},200,(function(){t(this).css({width:""});const r=e.item.find(".settings");if(0===r.length)e.item.addClass("saved"),a(e);else{r.css("display","block");const s=r.outerHeight(),o=r.outerWidth();r.css({height:0,width:0}),r.animate({height:s+"px",width:o+"px"},300,(function(){t(this).css({height:"",width:""}),e.item.addClass("saved"),a(e)}))}}))}))},U=()=>{if(B){if(V.segment.length>0){const t=[];for(const[e,a]of V.segment.entries())t.push({name:`segment-${a.value}-slug`,title:a.label,className:"tab",segmentSlug:a.value});const a=React.createElement(k,{className:"messia-tabs-panel",activeClass:"active-tab",orientation:"horizontal",initialTabName:t[0].name,tabs:t},(e=>React.createElement("div",{"data-title":N("Drop item here.","messia"),className:"messia-drop-zone category-constructed"},(e=>{const t=[];for(const[a,r]of s.categoriesConstructed.entries())e.segmentSlug==r.segmentSlug&&t.push(React.createElement(x,{className:"messia-card category-slot dropped saved",key:`${r.categorySlug}-${r.id}`,"data-type":"category",size:"small"},React.createElement("div",{className:"messia-card-content"},React.createElement(f,{gap:2},React.createElement(h,{className:"move"},"≡"),React.createElement(h,{className:"heading"},q),React.createElement(h,{className:"remove",onClick:$})),React.createElement("div",{className:"settings"},React.createElement(v,{value:s.categoriesConstructed[a].categorySlug,onChange:e=>{let t=s.categoriesConstructed;delete s.categoriesConstructed,t[a].categorySlug=e,o({categoriesConstructed:t})},options:V.category})))));return t})(e))));return React.createElement(w,{key:"messia-block-placeholder"},React.createElement("div",{className:"messia-block",key:"messia-block",ref:I},React.createElement("div",{className:"category-templates"},(()=>{const t=e.blocks.getBlockType(M),a=[React.createElement(n,{key:"tip"},React.createElement("h4",null,t.title),React.createElement(y,{isDismissible:!1,status:"warning"},React.createElement("p",null,N('The list of terms is subordinate to the value of the "Empty category terms" option. Each list contains all terms of taxonomy Category. In frontend selected term will be shown as a link to the search page by this value.',"messia"))))];return V.category.length>0&&a.push(React.createElement(x,{className:"messia-card category-slot",key:"tmpl-by-category","data-type":"category",size:"small"},React.createElement("div",{className:"messia-card-content"},React.createElement(f,{gap:2},React.createElement(h,{className:"move"},"≡"),React.createElement(h,{className:"heading"},F),React.createElement(h,{className:"remove",onClick:$})),React.createElement("div",{className:"settings"},React.createElement(v,{value:V.category[0].value,options:V.category}))))),a})()),a))}return React.createElement(w,{key:"messia-block-placeholder",label:N("You have no segments. Create one.","messia")},React.createElement("div",{className:"messia-block",key:"messia-block",ref:I}))}return React.createElement(w,{key:"messia-block-placeholder"},React.createElement("div",{className:"messia-block",key:"messia-block",ref:I},React.createElement(C,null)))};return i((()=>{let t=!0;return B||s.isExample||(async()=>await r({path:"messia/v1/block-category-terms",method:"POST",data:{currentAttrs:s}}).then((t=>(0===t.terms.segment.length?e.data.dispatch("core/notices").createNotice("error",N("Messia Category Terms: No terms were found in taxonomy Segment. Unit operation is not possible.","messia"),{isDismissible:!0}):0===t.terms.category.length&&e.data.dispatch("core/notices").createNotice("error",N("Messia Category Terms: No terms were found in taxonomy Category. Add some to use block.","messia"),{isDismissible:!0}),t))).catch((t=>{e.data.dispatch("core/notices").createNotice("error",N("An error occurred while receiving data from the server for Category Terms block","messia"),{isDismissible:!0})})))().then((e=>{t&&(o({categoriesConstructed:e.validAttrs.categoriesConstructed}),W(e.terms),D(!0))})),()=>{t=!1}}),[B]),i((()=>{j||s.isExample||t(I.current).find(".category-constructed").sortable("destroy")}),[j]),i((()=>{if(0===O.length)return;const e=t(I.current).find(".category-constructed .category-slot");H(e)}),[O]),i((()=>{new MutationObserver(((e,a)=>{for(const a of e)if("childList"===a.type&&a.addedNodes.length>=1)for(let e=0;e<a.addedNodes.length;e++){t(a.addedNodes[e]).find(".category-constructed").length>0&&L()}})).observe(document.querySelector("body"),{attributes:!1,childList:!0,subtree:!0})}),[]),(()=>{if(s.isExample)return S;{O.hasClass("remove-before-render")&&O.remove();let e=[T];const t=[React.createElement(d,{key:"inspector"},React.createElement(p,{title:N("Settings","messia")},React.createElement(g,{label:N("Show on front number of objects per term.","messia"),checked:s.withCount,onChange:e=>{o({withCount:e})}}),React.createElement(g,{label:N("Show in slider","messia"),checked:s.slider.active,onChange:e=>{let t=Object.assign({},s.slider);t.active=Boolean(e),o({slider:t})}}))),React.createElement(u,{key:"block"},React.createElement(b,{label:N("Options","messia")},React.createElement(E,{label:N(j?"Preview":"Edit","messia"),icon:j?"visibility":"edit",onClick:()=>{A(!j)}})))];return j?(t.push(U()),z=!1):(z||(z=React.createElement("div",{className:"messia-block",key:"messia-block",ref:I},React.createElement(R,{key:"block-preview"},React.createElement(m,{block:M,attributes:s,urlQueryArgs:{isPreview:!0}})))),t.push(z)),React.createElement("div",{className:e.join(" ")},t)}})()},save:function(e){return null}})}(window.wp,jQuery)},4670:function(e,t,a){"use strict";e.exports=a(5607)},9829:function(e,t,a){"use strict";var r,s,o,n=a(8946),c="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";function i(){o=!1}function l(e){if(e){if(e!==r){if(e.length!==c.length)throw new Error("Custom alphabet for shortid must be "+c.length+" unique characters. You submitted "+e.length+" characters: "+e);var t=e.split("").filter((function(e,t,a){return t!==a.lastIndexOf(e)}));if(t.length)throw new Error("Custom alphabet for shortid must be "+c.length+" unique characters. These characters were not unique: "+t.join(", "));r=e,i()}}else r!==c&&(r=c,i())}function m(){return o||(o=function(){r||l(c);for(var e,t=r.split(""),a=[],s=n.nextValue();t.length>0;)s=n.nextValue(),e=Math.floor(s*t.length),a.push(t.splice(e,1)[0]);return a.join("")}())}e.exports={get:function(){return r||c},characters:function(e){return l(e),r},seed:function(e){n.seed(e),s!==e&&(i(),s=e)},lookup:function(e){return m()[e]},shuffled:m}},480:function(e,t,a){"use strict";var r,s,o=a(8416);a(9829);e.exports=function(e){var t="",a=Math.floor(.001*(Date.now()-1567752802062));return a===s?r++:(r=0,s=a),t+=o(7),t+=o(e),r>0&&(t+=o(r)),t+=o(a)}},8416:function(e,t,a){"use strict";var r=a(9829),s=a(3766),o=a(296);e.exports=function(e){for(var t,a=0,n="";!t;)n+=o(s,r.get(),1),t=e<Math.pow(16,a+1),a++;return n}},5607:function(e,t,a){"use strict";var r=a(9829),s=a(480),o=a(1082),n=a(5636)||0;function c(){return s(n)}e.exports=c,e.exports.generate=c,e.exports.seed=function(t){return r.seed(t),e.exports},e.exports.worker=function(t){return n=t,e.exports},e.exports.characters=function(e){return void 0!==e&&r.characters(e),r.shuffled()},e.exports.isValid=o},1082:function(e,t,a){"use strict";var r=a(9829);e.exports=function(e){return!(!e||"string"!=typeof e||e.length<6)&&!new RegExp("[^"+r.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]").test(e)}},3766:function(e){"use strict";var t,a="object"==typeof window&&(window.crypto||window.msCrypto);t=a&&a.getRandomValues?function(e){return a.getRandomValues(new Uint8Array(e))}:function(e){for(var t=[],a=0;a<e;a++)t.push(Math.floor(256*Math.random()));return t},e.exports=t},8946:function(e){"use strict";var t=1;e.exports={nextValue:function(){return(t=(9301*t+49297)%233280)/233280},seed:function(e){t=e}}},5636:function(e){"use strict";e.exports=0},296:function(e){e.exports=function(e,t,a){for(var r=(2<<Math.log(t.length-1)/Math.LN2)-1,s=-~(1.6*r*a/t.length),o="";;)for(var n=e(s),c=s;c--;)if((o+=t[n[c]&r]||"").length===+a)return o}}},t={};function a(r){var s=t[r];if(void 0!==s)return s.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,a),o.exports}a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";a(7109)}()}();