!function(){var e={4746:function(){!function(e,t){const{apiFetch:l,apiRequest:r}=e,{registerBlockType:a}=e.blocks,{Component:s,Fragment:n,useState:c,useEffect:o,useRef:i}=e.element,{serverSideRender:m}=e,{BlockControls:u,InnerBlocks:p,useBlockProps:d}=e.blockEditor,{SelectControl:b,ToggleControl:f,Notice:k,ToolbarGroup:g,ToolbarButton:h,Placeholder:y,Disabled:E,TextControl:v,Spinner:R,RangeControl:w,Flex:x,FlexItem:S,FlexBlock:C,__experimentalRadioGroup:N,__experimentalRadio:T}=e.components,{__:_}=e.i18n,A=React.createElement("svg",{viewBox:"0 0 274 165",xmlns:"http://www.w3.org/2000/svg"},React.createElement("ellipse",{cx:"137",cy:"82.5",fill:"#cccccc",id:"svg_3",rx:"49.5",ry:"49.5",strokeDasharray:"null",strokeLinecap:"null",strokeLinejoin:"null",strokeWidth:"null"}),React.createElement("text",{fill:"#000000",fontFamily:"serif",fontSize:"24",strokeDasharray:"null",strokeLinecap:"null",strokeLinejoin:"null",strokeWidth:"0",textAnchor:"middle",transform:"matrix(2.17559 0 0 2.17559 -137.872 -97.7079)",x:"126.497",y:"89.41434"},"{S}"));let B=!1;a("messia/block-segment-wrapper",{title:_("Segment wrapper","messia"),description:_("Show block content only for certain segment","messia"),icon:React.createElement("svg",{width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{fill:"none",d:"m0,0l24,0l0,24l-24,0l0,-24z"}),React.createElement("path",{d:"m4,19l6,0l0,-2l-6,0l0,2zm16,-14l-16,0l0,2l16,0l0,-2zm-3,6l-13,0l0,2l13.25,0c1.1,0 2,0.9 2,2s-0.9,2 -2,2l-2.25,0l0,-2l-3,3l3,3l0,-2l2,0c2.21,0 4,-1.79 4,-4s-1.79,-4 -4,-4z"})),category:"messia",keywords:["wrapper"],styles:[],variations:[],attributes:{isExample:{type:"boolean",default:!1},forSegments:{type:"array",default:[]}},example:{attributes:{isExample:!0}},supports:{multiple:!0},edit:function(r){const{attributes:a,setAttributes:s,className:d,name:f}=r,[v,w]=c(!0),[x,S]=c(!1),[C,N]=c(!1),[T,j]=c({segment:[]});let P=i(),D=i();return o((()=>{let t=!0;return x||a.isExample||(async()=>await l({path:"messia/v1/block-segment-wrapper",method:"POST",data:{currentAttrs:a}}).then((t=>(0===t.terms.segment.length&&e.data.dispatch("core/notices").createNotice("error",_("Messia Category Terms: No terms were found in taxonomy Segment. Unit operation is not possible.","messia"),{isDismissible:!0}),t))).catch((t=>{e.data.dispatch("core/notices").createNotice("error",_("An error occurred while receiving data from the server for Category Terms block","messia"),{isDismissible:!0})})))().then((e=>{t&&(s({tabsConstructed:e.validAttrs.tabsConstructed}),j(e.terms),S(!0),N(!0))})),()=>{t=!1}}),[x]),o((()=>{C&&v&&t(D.current).find("select").select2({width:"100%",placeholder:_("Any","messia"),closeOnSelect:!1}).on("change",(e=>{let l=t(e.currentTarget).val();null===l&&(l=[]),s({forSegments:l})}))}),[C,v]),(()=>{if(a.isExample)return A;{let t=[d];const l=[React.createElement(u,{key:"block"},React.createElement(g,{label:_("Options","messia")},React.createElement(h,{label:_(v?"Preview":"Edit","messia"),icon:v?"visibility":"edit",onClick:()=>{w(!v)}})))];return v?(l.push((()=>{if(x){if(T.segment.length>0){const t=e.blocks.getBlockType(f);return React.createElement(y,{key:"messia-block-placeholder"},React.createElement("div",{className:"messia-block",key:"messia-block",ref:P},React.createElement(n,{key:"tip"},React.createElement("h4",null,t.title),React.createElement(k,{isDismissible:!1,status:"warning"},React.createElement("p",null,_("Add any inner blocks and specify the segments. The content of the block will be displayed only if the currently viewed object or listing page belongs to the segments specified in the settings.","messia")))),React.createElement("div",{ref:D},React.createElement(b,{multiple:!0,className:"criteria-item",label:_("Wrap in segments:","messia"),value:a.forSegments,onChange:e=>{s({forSegments:e})},options:T.segment}),React.createElement(p,null))))}return React.createElement(y,{key:"messia-block-placeholder",label:_("You have no segments. Create one.","messia")},React.createElement("div",{className:"messia-block",key:"messia-block",ref:P}))}return React.createElement(y,{key:"messia-block-placeholder"},React.createElement("div",{className:"messia-block",key:"messia-block",ref:P},React.createElement(R,null)))})()),B=!1):(B||(B=React.createElement("div",{className:"messia-block",key:"messia-block",ref:P},React.createElement(E,{key:"block-preview"},React.createElement(m,{block:f,attributes:a,urlQueryArgs:{isPreview:!0}})))),l.push(B)),React.createElement("div",{className:t.join(" ")},l)}})()},save:function(e){d.save();return React.createElement(p.Content,null)}})}(window.wp,jQuery)}},t={};function l(r){var a=t[r];if(void 0!==a)return a.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,l),s.exports}l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,{a:t}),t},l.d=function(e,t){for(var r in t)l.o(t,r)&&!l.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";l(4746)}()}();