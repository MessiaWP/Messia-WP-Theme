!function(){var e={7996:function(e,t,l){!function(e,t){const{apiFetch:a}=e,{addFilter:r}=e.hooks,{registerBlockType:s}=e.blocks,{Component:n,Fragment:c,useState:o,useEffect:i,useRef:u}=e.element,{serverSideRender:m}=e,{InspectorControls:d,BlockControls:f}=e.blockEditor,{Button:p,Notice:g,Flex:h,FlexItem:b,Card:v,ToolbarGroup:E,ToolbarButton:k,Placeholder:y,Disabled:R,ToggleControl:w,Spinner:x,TabPanel:N,__experimentalSpacer:S,__experimentalInputControl:C}=e.components,{__:z}=e.i18n,F=React.createElement("svg",{viewBox:"0 0 274 165",xmlns:"http://www.w3.org/2000/svg"},React.createElement("g",null,React.createElement("path",{d:"m82.68583,10.64605a3.19383,3.19383 0 0 0 -3.19351,3.19351l0,121.35334a3.19383,3.19383 0 0 0 3.19351,3.19351l35.1286,0l3.19351,0l6.71135,0c-0.93889,-2.04065 -1.6925,-4.17392 -2.26413,-6.38702l-4.44722,0l-3.19351,0l-31.93509,0l0,-114.96632l57.48316,0l0,15.43113a3.19383,3.19383 0 0 0 0,1.04163l0,50.59093l0,5.16451c2.02149,-1.16882 4.15476,-2.14578 6.38702,-2.93777l0,-5.42025l0,-44.70912l33.80629,0l-10.51613,10.51613a3.19383,3.19383 0 1 0 4.51581,4.51581l15.51221,-15.51221a3.19383,3.19383 0 0 0 1.35973,-3.38062a3.19383,3.19383 0 0 0 -1.26616,-1.95229l-15.60578,-15.60578a3.19383,3.19383 0 0 0 -2.28911,-0.9668a3.19383,3.19383 0 0 0 -2.22671,5.48262l10.51613,10.51613l-33.80629,0l0,-15.96754a3.19383,3.19383 0 0 0 -3.19351,-3.19351l-63.87018,0zm79.83772,79.83772c-17.5643,0 -31.93509,14.37079 -31.93509,31.93509c0,17.5643 14.37079,31.93509 31.93509,31.93509c17.5643,0 31.93509,-14.37079 31.93509,-31.93509c0,-17.5643 -14.37079,-31.93509 -31.93509,-31.93509zm0,6.38702c14.05144,0 25.54807,11.49663 25.54807,25.54807c0,14.05144 -11.49663,25.54807 -25.54807,25.54807c-14.05144,0 -25.54807,-11.49663 -25.54807,-25.54807c0,-14.05144 11.49663,-25.54807 25.54807,-25.54807zm0,6.70512c-1.91611,0 -3.19351,1.2774 -3.19351,3.19351l0,12.45593l-12.45593,0c-1.91611,0 -3.19351,1.2774 -3.19351,3.19351c0,1.91611 1.2774,3.19351 3.19351,3.19351l12.45593,0l0,12.45593c0,1.91611 1.2774,3.19351 3.19351,3.19351c1.91611,0 3.19351,-1.2774 3.19351,-3.19351l0,-12.45593l12.45593,0c1.91611,0 3.19351,-1.2774 3.19351,-3.19351c0,-1.91611 -1.2774,-3.19351 -3.19351,-3.19351l-12.45593,0l0,-12.45593c0,-1.91611 -1.2774,-3.19351 -3.19351,-3.19351z"}))),T=l(4670);let M=!1;s("messia/block-custom-fields",{title:z("Custom fields","messia"),description:z("Output custom field value for current viewed object.","messia"),icon:React.createElement("svg",{width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"m2.40039,2c-0.76729,0 -1.40039,0.6331 -1.40039,1.40039l0,18.09961a0.50005,0.50005 0 0 0 0.5,0.5l21,0a0.50005,0.50005 0 0 0 0.5,-0.5l0,-18.09961c0,-0.76729 -0.6331,-1.40039 -1.40039,-1.40039l-19.19922,0zm0,1l19.19922,0c0.22671,0 0.40039,0.17368 0.40039,0.40039l0,2.09961l-20,0l0,-2.09961c0,-0.22671 0.17368,-0.40039 0.40039,-0.40039zm-0.40039,3.5l20,0l0,14.5l-20,0l0,-14.5zm3,2.5l0,2.5l-1,0a0.50005,0.50005 0 0 0 -0.5,0.5l0,2a0.50005,0.50005 0 0 0 0.5,0.5l1,0l0,4l1,0l0,-4l1,0a0.50005,0.50005 0 0 0 0.5,-0.5l0,-2a0.50005,0.50005 0 0 0 -0.5,-0.5l-1,0l0,-2.5l-1,0zm6.5,0l0,5l-1,0a0.50005,0.50005 0 0 0 -0.5,0.5l0,2a0.50005,0.50005 0 0 0 0.5,0.5l1,0l0,1.5l1,0l0,-1.5l1,0a0.50005,0.50005 0 0 0 0.5,-0.5l0,-2a0.50005,0.50005 0 0 0 -0.5,-0.5l-1,0l0,-5l-1,0zm6.5,0l0,2.5l-1,0a0.50005,0.50005 0 0 0 -0.5,0.5l0,2a0.50005,0.50005 0 0 0 0.5,0.5l1,0l0,4l1,0l0,-4l1,0a0.50005,0.50005 0 0 0 0.5,-0.5l0,-2a0.50005,0.50005 0 0 0 -0.5,-0.5l-1,0l0,-2.5l-1,0zm-13.5,3.5l2,0l0,1l-2,0l0,-1zm13,0l2,0l0,1l-2,0l0,-1zm-6.5,2.5l2,0l0,1l-2,0l0,-1z",fill:"black"})),category:"messia",keywords:["object"],styles:[],variations:[],attributes:{constructedFields:{type:"array",default:[]},isExample:{type:"boolean",default:!1}},example:{attributes:{isExample:!0}},supports:{multiple:!0},edit:function(l){const{attributes:r,setAttributes:s,className:n,name:d}=l,[p,C]=o(!0),[O,j]=o(!1),[P,_]=o({segment:[]});let A,B=u();const V=()=>{const e=[],l=t(B.current).find(".custom-field"),a=l.parents(".messia-tabs-panel").find('[role="tabpanel"]').attr("id").match(/segment-(.+)-slug/)[1];for(let t=0;t<r.constructedFields.length;t++)r.constructedFields[t].segmentSlug!==a&&e.push(r.constructedFields[t]);for(let r=0;r<l.length;r++){const s={},n=t(l[r]).find(".field-opt");for(let e=0;e<n.length;e++){const l=t(n[e]).data("optionName"),a=t(n[e]).find('input[type="checkbox"]').prop("checked");s[l]=a}e.push({id:t(l[r]).attr("id"),segmentSlug:a,fieldSlug:t(l[r]).data("fieldSlug"),fieldOpts:s})}s({constructedFields:e})},D=()=>{if(O){if(P.segment.length>0){const t=e.blocks.getBlockType(d),l=[];for(const[e,t]of P.segment.entries())l.push({name:`segment-${t.value}-slug`,title:t.label,className:"tab",segmentSlug:t.value});const a=React.createElement(c,{key:"tip"},React.createElement("h4",null,t.title),React.createElement(g,{isDismissible:!1,status:"warning"},React.createElement("p",null,z("These are a custom fields created via constructor per segment term.","messia"))),React.createElement(S,{marginTop:5})),s=React.createElement(N,{className:"messia-tabs-panel",activeClass:"active-tab",orientation:"horizontal",initialTabName:l[0].name,onSelect:e=>{},tabs:l},(e=>React.createElement("div",{"data-title":z("Constructor for this segment are empty","messia"),className:"custom-fields"},(e=>{A=e.segmentSlug;const t=[];for(const[l,a]of r.constructedFields.entries()){if(e.segmentSlug!=a.segmentSlug)continue;void 0===a.id&&(a.id=T.generate());const l=[],r=q(a);for(const[e,t]of r.options.entries())"input"===t.tag&&"checkbox"===t.type&&l.push(React.createElement(c,{key:e},React.createElement(b,null,React.createElement("span",null,t.label)),React.createElement(b,{className:"field-opt",title:t.title,"data-option-name":t.id},React.createElement(w,{checked:a.fieldOpts[t.id],onChange:e=>V()}))));t.push(React.createElement(v,{id:a.id,key:`${a.segmentSlug}-${a.id}`,className:"messia-card custom-field",size:"small","data-field-slug":a.fieldSlug},React.createElement("div",{className:"messia-card-content"},React.createElement("div",{className:"field-item"},React.createElement(h,{gap:2},React.createElement(b,{className:"move"},"â‰¡"),React.createElement(b,{className:"header"},React.createElement("div",{className:"tab-title"},r.title)),React.createElement(b,null,React.createElement(h,{gap:2},l)))))))}return t})(e))));return React.createElement(y,{key:"messia-block-placeholder"},React.createElement("div",{className:"messia-block",key:"messia-block",ref:B},a,s))}return React.createElement(y,{key:"messia-block-placeholder",label:z("You have no segments. Create one.","messia")},React.createElement("div",{className:"messia-block",key:"messia-block",ref:B}))}return React.createElement(y,{key:"messia-block-placeholder"},React.createElement("div",{className:"messia-block",key:"messia-block",ref:B},React.createElement(x,null)))},q=e=>P.segment.find((t=>t.value===e.segmentSlug)).constructorFields[e.fieldSlug];return i((()=>{let t=!0;return O||r.isExample||(async()=>await a({path:"messia/v1/block-custom-fields",method:"POST",data:{currentAttrs:r}}).then((t=>(0===t.terms.segment.length&&e.data.dispatch("core/notices").createNotice("error",z("Messia Category Terms: No terms were found in taxonomy Segment. Unit operation is not possible.","messia"),{isDismissible:!0}),t))).catch((t=>{e.data.dispatch("core/notices").createNotice("error",z("An error occurred while receiving data from the server for Category Terms block","messia"),{isDismissible:!0})})))().then((e=>{t&&(s({constructedFields:e.validAttrs.constructedFields}),_(e.terms),j(!0))})),()=>{t=!1}}),[O]),i((()=>{new MutationObserver(((e,l)=>{for(const l of e)if("childList"===l.type&&l.addedNodes.length>=1)for(let e=0;e<l.addedNodes.length;e++){t(l.addedNodes[e]).find(".custom-fields").length>0&&t(B.current).find(".custom-fields").not("ui-sortable").sortable({forceHelperSize:!0,forcePlaceholderSize:!0,opacity:1,tolerance:"intersect",scroll:!0,scrollSensitivity:20,containment:".edit-widgets-block-editor",placeholder:"sortable-placeholder",handle:".move",start:(e,l)=>{l.item.addClass("is-elevated"),t("body").addClass("cursor-grabbing")},beforeStop:(e,l)=>{t("body").removeClass("cursor-grabbing")},stop:(e,t)=>{t.item.removeClass("is-elevated"),V()}})}})).observe(document.querySelector("body"),{attributes:!1,childList:!0,subtree:!0})}),[]),(()=>{if(r.isExample)return F;{let e=[n];const t=[React.createElement(f,{key:"block"},React.createElement(E,{label:z("Options","messia")},React.createElement(k,{label:z(p?"Preview":"Edit","messia"),icon:p?"visibility":"edit",onClick:()=>{C(!p)}})))];return p?(t.push(D()),M=!1):(M||(M=React.createElement("div",{className:"messia-block",key:"messia-block",ref:B},React.createElement(R,{key:"block-preview"},React.createElement(m,{block:d,attributes:r,urlQueryArgs:{isPreview:!0}})))),t.push(M)),React.createElement("div",{className:e.join(" ")},t)}})()},save:function(e){return null}})}(window.wp,jQuery)},4670:function(e,t,l){"use strict";e.exports=l(5607)},9829:function(e,t,l){"use strict";var a,r,s,n=l(8946),c="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";function o(){s=!1}function i(e){if(e){if(e!==a){if(e.length!==c.length)throw new Error("Custom alphabet for shortid must be "+c.length+" unique characters. You submitted "+e.length+" characters: "+e);var t=e.split("").filter((function(e,t,l){return t!==l.lastIndexOf(e)}));if(t.length)throw new Error("Custom alphabet for shortid must be "+c.length+" unique characters. These characters were not unique: "+t.join(", "));a=e,o()}}else a!==c&&(a=c,o())}function u(){return s||(s=function(){a||i(c);for(var e,t=a.split(""),l=[],r=n.nextValue();t.length>0;)r=n.nextValue(),e=Math.floor(r*t.length),l.push(t.splice(e,1)[0]);return l.join("")}())}e.exports={get:function(){return a||c},characters:function(e){return i(e),a},seed:function(e){n.seed(e),r!==e&&(o(),r=e)},lookup:function(e){return u()[e]},shuffled:u}},480:function(e,t,l){"use strict";var a,r,s=l(8416);l(9829);e.exports=function(e){var t="",l=Math.floor(.001*(Date.now()-1567752802062));return l===r?a++:(a=0,r=l),t+=s(7),t+=s(e),a>0&&(t+=s(a)),t+=s(l)}},8416:function(e,t,l){"use strict";var a=l(9829),r=l(3766),s=l(296);e.exports=function(e){for(var t,l=0,n="";!t;)n+=s(r,a.get(),1),t=e<Math.pow(16,l+1),l++;return n}},5607:function(e,t,l){"use strict";var a=l(9829),r=l(480),s=l(1082),n=l(5636)||0;function c(){return r(n)}e.exports=c,e.exports.generate=c,e.exports.seed=function(t){return a.seed(t),e.exports},e.exports.worker=function(t){return n=t,e.exports},e.exports.characters=function(e){return void 0!==e&&a.characters(e),a.shuffled()},e.exports.isValid=s},1082:function(e,t,l){"use strict";var a=l(9829);e.exports=function(e){return!(!e||"string"!=typeof e||e.length<6)&&!new RegExp("[^"+a.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]").test(e)}},3766:function(e){"use strict";var t,l="object"==typeof window&&(window.crypto||window.msCrypto);t=l&&l.getRandomValues?function(e){return l.getRandomValues(new Uint8Array(e))}:function(e){for(var t=[],l=0;l<e;l++)t.push(Math.floor(256*Math.random()));return t},e.exports=t},8946:function(e){"use strict";var t=1;e.exports={nextValue:function(){return(t=(9301*t+49297)%233280)/233280},seed:function(e){t=e}}},5636:function(e){"use strict";e.exports=0},296:function(e){e.exports=function(e,t,l){for(var a=(2<<Math.log(t.length-1)/Math.LN2)-1,r=-~(1.6*a*l/t.length),s="";;)for(var n=e(r),c=r;c--;)if((s+=t[n[c]&a]||"").length===+l)return s}}},t={};function l(a){var r=t[a];if(void 0!==r)return r.exports;var s=t[a]={exports:{}};return e[a](s,s.exports,l),s.exports}l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,{a:t}),t},l.d=function(e,t){for(var a in t)l.o(t,a)&&!l.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";l(7996)}()}();