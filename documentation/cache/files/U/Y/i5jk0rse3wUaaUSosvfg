1702936352
waR3U4bTeM%3A515f853b6c2379ac9a8c861b12716928-6fc6b98fdd06370c2ed8334db4da19ba
s:34352:"TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlIjoxNDp7czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBkb2NCbG9jayI7TjtzOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGhhc2giO3M6MzI6IjZmYzZiOThmZGQwNjM3MGMyZWQ4MzM0ZGI0ZGExOWJhIjtzOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAG5hbWUiO3M6ODoibWVkaWEuanMiO3M6Mzk6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAcGF0aCI7czoyNDoic3JjL2pzL19iYWNrZW5kL21lZGlhLmpzIjtzOjQxOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAHNvdXJjZSI7czoyNDg2MzoialF1ZXJ5LmZuLm1lc3NpYU1lZGlhU2VsZWN0b3IgPSBmdW5jdGlvbiAob25TZWxlY3QpIHsKCglkb2N1bWVudC5hY3RpdmVFbGVtZW50LmJsdXIoKTsKCgl2YXIgJCA9IGpRdWVyeS5ub0NvbmZsaWN0KCksCgkJeGhyID0gbnVsbCwKCQlmcmFtZSA9IG1lc3NpYVZhcnMubWVkaWFGcmFtZSwKCQljdXJyZW50TWVkaWFGcmFtZSA9IHdwLm1lZGlhLnZpZXcuTWVkaWFGcmFtZS5TZWxlY3QsCgkJaWNvbkNvbGxlY3Rpb25WaWV3LAoJCWljb25TZXRWaWV3OwoKCWNvbnN0IGdldENhbGxlciA9IGZ1bmN0aW9uICh0YXJnZXQpIHsKCQlyZXR1cm4gdGFyZ2V0LnBhcmVudHMoJy5pY29uJyk7Cgl9CgoJaWYgKGZhbHNlICE9PSBmcmFtZS5tb2RlbCkgewoJCWZyYW1lLm1vZGVsLm9wZW4oKTsKCQlyZXR1cm47Cgl9CgoJY29uc3QgY29tcGFyYXRvciA9IGZ1bmN0aW9uIChhLCBiKSB7CgoJCXZhciBhSW5RdWVyeSA9ICEhdGhpcy5taXJyb3JpbmcuZ2V0KGEuY2lkKSwKCQkJYkluUXVlcnkgPSAhIXRoaXMubWlycm9yaW5nLmdldChiLmNpZCk7CgoJCWlmICghYUluUXVlcnkgJiYgYkluUXVlcnkpIHsKCQkJcmV0dXJuIC0xOwoJCX0KCQllbHNlIGlmIChhSW5RdWVyeSAmJiAhYkluUXVlcnkpIHsKCQkJcmV0dXJuIDE7CgkJfQoJCWVsc2UgewoJCQlyZXR1cm4gMDsKCQl9Cgl9OwoKCXZhciBhcHBJY29ucyA9IHsKCQlpbml0OiBmdW5jdGlvbiAoKSB7CgoJCQlpZiAodGhpcy5vcHRpb25zLmljb25Gb250cyA9PT0gZmFsc2UpIHJldHVybjsKCgkJCXdwLm1lZGlhLmNvbnRyb2xsZXIuaWNvbkNvbnRlbnQgPSBhcHBJY29ucy5jb250cm9sbGVycy5pY29uQ29udGVudDsKCQkJd3AubWVkaWEudmlldy5Ub29sYmFyLkljb25zID0gYXBwSWNvbnMudmlld3MuaWNvbnNUb29sYmFyOwoKCQkJdGhpcy5zdGF0ZXMuYWRkKFsKCQkJCW5ldyB3cC5tZWRpYS5jb250cm9sbGVyLmljb25Db250ZW50KHsKCQkJCQlpZDogJ2ZvbnRDb2xsZWN0aW9uJywKCQkJCQl0aXRsZTogbWVzc2lhVmFycy5tZXNzYWdlcy5tZWRpYUZyYW1lLmljb25zVGl0bGUsCgkJCQkJY29udGVudDogJ2ZvbnRDb2xsZWN0aW9uJywKCQkJCQlmb250Q29sbGVjdGlvbjogYXBwSWNvbnMubW9kZWxzLmljb25zLAoJCQkJCW1lbnU6ICdkZWZhdWx0JywgLy8gbWVudSBldmVudCA9IG1lbnU6cmVuZGVyOmRlZmF1bHQKCQkJCQkvLyByb3V0ZXI6ICdicm93c2UnLAoJCQkJCXRvb2xiYXI6ICdpY29ucy1zZWxlY3QnLCAvLyB0b29sYmFyIGV2ZW50ID0gdG9vbGJhcjpjcmVhdGU6aWNvbnMtc2VsZWN0CgkJCQkJcHJpb3JpdHk6IDIwLAoJCQkJCXR5cGU6ICdsaW5rJywKCQkJCQkvLyBzZWFyY2hhYmxlOiB0cnVlLAoJCQkJCS8vIGZpbHRlcmFibGU6IGZhbHNlLAoJCQkJCS8vIHNvcnRhYmxlOiB0cnVlLAoJCQkJCS8vIGF1dG9TZWxlY3Q6IHRydWUsCgkJCQkJLy8gZGVzY3JpYmU6IGZhbHNlLAoJCQkJCS8vIGNvbnRlbnRVc2VyU2V0dGluZzogdHJ1ZSwKCQkJCQkvLyBzeW5jU2VsZWN0aW9uOiB0cnVlLAoJCQkJCXNlbGVjdGlvbjogdGhpcy5vcHRpb25zLnNlbGVjdGlvbiwgLy8gcmVxdWlyZWQganVzdCBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eSB3aXRoIFdQLgoJCQkJfSksCgkJCV0pOwoJCQl0aGlzLm9uKCdjb250ZW50OnJlbmRlcjpmb250Q29sbGVjdGlvbicsIHRoaXMucmVuZGVyRm9udENvbGxlY3Rpb24sIHRoaXMpOwoJCQl0aGlzLm9uKCdjb250ZW50OnJlbmRlcjppY29uU2V0JywgdGhpcy5yZW5kZXJJY29uU2V0LCB0aGlzKTsKCQkJdGhpcy5vbigndG9vbGJhcjpjcmVhdGU6aWNvbnMtc2VsZWN0JywgdGhpcy5jcmVhdGVJY29uc1Rvb2xiYXIsIHRoaXMpOwoJCQl0aGlzLm9uKCd0b29sYmFyOmNyZWF0ZTpzZWxlY3QnLCB0aGlzLmNyZWF0ZVdQVG9vbGJhciwgdGhpcyk7CgkJfSwKCQltb2RlbHM6IHsKCQkJLyoqCgkJCSAqIGlkOiBpSW5uZXIgaWRlbnRpZmljYXRvci4KCQkJICogbmFtZTogVGFiIHRpdGxlLgoJCQkgKiBmb250czoKCQkJICogICAgaWQ6IDxsaW5rPiBhdHRyaWJ1dGUgdG8gc2VhcmNoIGZvbnQgaW4gRE9NIGJ5LgoJCQkgKiAgICB1cmw6IDxsaW5rPiBhdHRyaWJ1dGUgdG8gbG9hZCBmb250IGJ5LgoJCQkgKiBhamF4QWN0aW9uOiBXUCBob29rIG5hbWUgdG8gZ2V0IGljb25zIGZyb20uCgkJCSAqIGljb25zOiBpY29ucyBjb2xsZWN0aW9uIHRoYXQgd2lsbCBiZSBmaWxsZWQgYnkgYWpheCBjYWxsLgoJCQkgKi8KCQkJaWNvbnM6IG5ldyBCYWNrYm9uZS5Nb2RlbCgKCQkJCXsKCQkJCQlpY29uU2V0OiBbCgkJCQkJCXsKCQkJCQkJCWlkOiAnZ29vZ2xlLW1hdGVyaWFsJywKCQkJCQkJCW5hbWU6IG1lc3NpYVZhcnMubWVzc2FnZXMubWVkaWFGcmFtZS5tYXRlcmlhbFRhYiwKCQkJCQkJCXZhcmlhbnRzOiBbCgkJCQkJCQkJewoJCQkJCQkJCQlpZDogJzAxJywKCQkJCQkJCQkJZm9udElkOiAnZ29vZ2xlLW1hdGVyaWFsLWljb25zJywKCQkJCQkJCQkJY3NzQ2xhc3M6IFsnbWF0ZXJpYWwtaWNvbnMnXSwKCQkJCQkJCQkJdGl0bGU6ICdGaWxsZWQnLAoJCQkJCQkJCX0sCgkJCQkJCQkJewoJCQkJCQkJCQlpZDogJzAyJywKCQkJCQkJCQkJZm9udElkOiAnZ29vZ2xlLW1hdGVyaWFsLWljb25zLW91dGxpbmVkJywKCQkJCQkJCQkJY3NzQ2xhc3M6IFsnbWF0ZXJpYWwtaWNvbnMtb3V0bGluZWQnXSwKCQkJCQkJCQkJdGl0bGU6ICdPdXRsaW5lZCcsCgkJCQkJCQkJfSwKCQkJCQkJCQl7CgkJCQkJCQkJCWlkOiAnMDMnLAoJCQkJCQkJCQlmb250SWQ6ICdnb29nbGUtbWF0ZXJpYWwtaWNvbnMtcm91bmRlZCcsCgkJCQkJCQkJCWNzc0NsYXNzOiBbJ21hdGVyaWFsLWljb25zLXJvdW5kJ10sCgkJCQkJCQkJCXRpdGxlOiAnUm91bmRlZCcsCgkJCQkJCQkJfSwKCQkJCQkJCQl7CgkJCQkJCQkJCWlkOiAnMDQnLAoJCQkJCQkJCQlmb250SWQ6ICdnb29nbGUtbWF0ZXJpYWwtaWNvbnMtdHdvLXRvbmUnLAoJCQkJCQkJCQljc3NDbGFzczogWydtYXRlcmlhbC1pY29ucy10d28tdG9uZSddLAoJCQkJCQkJCQl0aXRsZTogJ1R3byBUb25lJywKCQkJCQkJCQl9LAoJCQkJCQkJCXsKCQkJCQkJCQkJaWQ6ICcwNScsCgkJCQkJCQkJCWZvbnRJZDogJ2dvb2dsZS1tYXRlcmlhbC1pY29ucy1zaGFycCcsCgkJCQkJCQkJCWNzc0NsYXNzOiBbJ21hdGVyaWFsLWljb25zLXNoYXJwJ10sCgkJCQkJCQkJCXRpdGxlOiAnU2hhcnAnLAoJCQkJCQkJCX0sCgkJCQkJCQldLAoJCQkJCQkJdmFyaWFudENhbGxiYWNrOiAnc2V0VmFyaWFudE1hdGVyaWFsSWNvbnMnLAoJCQkJCQkJYWpheEFjdGlvbjogJ2dldF9tYXRlcmlhbF9pY29ucycsCgkJCQkJCQlpY29uczoge30sCgkJCQkJCX0sCgkJCQkJXSwKCQkJCQkvKioKCQkJCQkgKiBpZDogICBpY29uU2V0LnZhcmlhbnRzLmZvbnRJZCAtIGVhY2ggZm9udElkIHNob3VkIGJlIHNldHRlZCBpbiBmb250cywKCQkJCQkgKiAgICAgICBpdCB3aWxsIGJlIElEIGF0dHIgb2YgRE9NIGVsZW1lbnQsIHRvIHNlYXJjaCBmb250IGJ5LiBVbmRlciB0aGlzIHNhbWUgbmFtZQoJCQkJCSAqICAgICAgIHN0eWxlcyBleHBlY3RlZCB0byBiZSByZWdpc3RlcmVkIGluIGJhY2tlbmQuCgkJCQkJICogbmFtZTogcHVibGljIG5hbWUgdXNlZCBpbiBicm93c2VyLgoJCQkJCSAqIHVybDogIHJlbW90ZSBmb250IGhvc3QuCgkJCQkJICovCgkJCQkJZm9udHM6IFsKCQkJCQkJewoJCQkJCQkJaWQ6ICdnb29nbGUtbWF0ZXJpYWwtaWNvbnMnLAoJCQkJCQkJbmFtZTogJ01hdGVyaWFsIEljb25zJywKCQkJCQkJCXVybDogJ2h0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vaWNvbj9mYW1pbHk9TWF0ZXJpYWwrSWNvbnMnLAoJCQkJCQl9LAoJCQkJCQl7CgkJCQkJCQlpZDogJ2dvb2dsZS1tYXRlcmlhbC1pY29ucy1vdXRsaW5lZCcsCgkJCQkJCQluYW1lOiAnTWF0ZXJpYWwgSWNvbnMgT3V0bGluZWQnLAoJCQkJCQkJdXJsOiAnaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9pY29uP2ZhbWlseT1NYXRlcmlhbCtJY29ucytPdXRsaW5lZCcsCgkJCQkJCX0sCgkJCQkJCXsKCQkJCQkJCWlkOiAnZ29vZ2xlLW1hdGVyaWFsLWljb25zLXJvdW5kZWQnLAoJCQkJCQkJbmFtZTogJ01hdGVyaWFsIEljb25zIFJvdW5kJywKCQkJCQkJCXVybDogJ2h0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vaWNvbj9mYW1pbHk9TWF0ZXJpYWwrSWNvbnMrUm91bmQnLAoJCQkJCQl9LAoJCQkJCQl7CgkJCQkJCQlpZDogJ2dvb2dsZS1tYXRlcmlhbC1pY29ucy10d28tdG9uZScsCgkJCQkJCQluYW1lOiAnTWF0ZXJpYWwgSWNvbnMgVHdvIFRvbmUnLAoJCQkJCQkJdXJsOiAnaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9pY29uP2ZhbWlseT1NYXRlcmlhbCtJY29ucytUd28rVG9uZScsCgkJCQkJCX0sCgkJCQkJCXsKCQkJCQkJCWlkOiAnZ29vZ2xlLW1hdGVyaWFsLWljb25zLXNoYXJwJywKCQkJCQkJCW5hbWU6ICdNYXRlcmlhbCBJY29ucyBTaGFycCcsCgkJCQkJCQl1cmw6ICdodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2ljb24/ZmFtaWx5PU1hdGVyaWFsK0ljb25zK1NoYXJwJywKCQkJCQkJfSwKCQkJCQldLAoJCQkJCWFjdGl2ZVNldDogJ2dvb2dsZS1tYXRlcmlhbCcsCgkJCQkJLy8gaWNvblNldCBJRCA9PiB2YXJpYW50IElECgkJCQkJYWN0aXZlVmFyaWFudDogewoJCQkJCQknZ29vZ2xlLW1hdGVyaWFsJzogJzAyJywKCQkJCQkJJ3Rlc3RfdmFyaWFudCc6ICcwMScsCgkJCQkJfSwKCQkJCQlzZWxlY3RlZEljb25zOiBbXSwKCQkJCX0sCgkJCSksCgkJfSwKCQl2aWV3czogewoJCQlpY29uQ29sbGVjdGlvbjogd3AubWVkaWEuVmlldy5leHRlbmQoewoJCQkJdGFnTmFtZTogJ2RpdicsCgkJCQljbGFzc05hbWU6ICdpY29ucy1jb2xsZWN0aW9uLXdyYXBwZXInLAoJCQkJdGVtcGxhdGU6IHdwLnRlbXBsYXRlKCdpY29uLWNvbGxlY3Rpb24nKSwKCQkJCWluaXRpYWxpemU6IGZ1bmN0aW9uICgpIHsKCQkJCQl0aGlzLm9wdGlvbnMuaWNvblNldCA9IHRoaXMubW9kZWwuZ2V0KCdpY29uU2V0Jyk7CgkJCQkJdGhpcy5vcHRpb25zLmFjdGl2ZVNldCA9IHRoaXMubW9kZWwuZ2V0KCdhY3RpdmVTZXQnKTsKCQkJCQl0aGlzLm9wdGlvbnMuYWN0aXZlVmFyaWFudCA9IHRoaXMubW9kZWwuZ2V0KCdhY3RpdmVWYXJpYW50Jyk7CgkJCQl9LAoJCQkJZXZlbnRzOiB7CgkJCQkJJ2NsaWNrIC50b2dnbGUtaWNvbnNldCc6ICd0b2dnbGVJY29uU2V0JywKCQkJCQknY2xpY2sgLmljb25zLXZhcmlhbnRzIC52YXJpYW50JzogJ3RvZ2dsZUljb25WYXJpYW50JywKCQkJCX0sCgkJCQlyZWFkeTogZnVuY3Rpb24gKCkgewoJCQkJCS8vIEdpdmUgYnJvd3NlciBhIGNoYW5jZSB0byByZW5kZXIgdGFicy4KCQkJCQlzZXRUaW1lb3V0KCgpID0+IHsgdGhpcy5jb250cm9sbGVyLnRyaWdnZXIoJ2NvbnRlbnQ6cmVuZGVyOmljb25TZXQnKSB9LCAxMCk7CgkJCQl9LAoJCQkJdG9nZ2xlSWNvblNldDogZnVuY3Rpb24gKGV2ZW50KSB7CgkJCQkJY29uc3QgbmV3U2V0SWQgPSAkKGV2ZW50LnRhcmdldCkuZGF0YSgnc2V0aWQnKQoJCQkJCXRoaXMubW9kZWwuc2V0KCdhY3RpdmVTZXQnLCBuZXdTZXRJZCk7CgkJCQl9LAoJCQkJdG9nZ2xlSWNvblZhcmlhbnQ6IGZ1bmN0aW9uIChldmVudCkgewoKCQkJCQljb25zdAoJCQkJCQl0YXJnZXQgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLAoJCQkJCQljdXJyZW50U2V0SWQgPSB0YXJnZXQucGFyZW50cygnI2ljb24tc2V0JykuZGF0YSgnc2V0aWQnKSwKCQkJCQkJaWNvblNldCA9IHRoaXMubW9kZWwuZ2V0KCdpY29uU2V0JyksCgkJCQkJCWFjdGl2ZVZhcmlhbnQgPSB0aGlzLm1vZGVsLmdldCgnYWN0aXZlVmFyaWFudCcpLAoJCQkJCQljdXJyZW50U2V0ID0gaWNvblNldC5maW5kKChlbGVtZW50KSA9PiBlbGVtZW50LmlkID09PSBjdXJyZW50U2V0SWQpOwoKCQkJCQkvLyBDbGljayBvbiBjdXJyZW50bHkgYWN0aXZlIHZhcmlhbnQuCgkJCQkJaWYgKGFjdGl2ZVZhcmlhbnRbY3VycmVudFNldElkXSA9PT0gdGFyZ2V0LmRhdGEoJ3ZhcmlhbnRpZCcpKSByZXR1cm47CgoJCQkJCS8vIE9ubHkgb25lIHZhcmlhbnQgY2FuIGJlIGFjdGl2ZSBpbiBhIG1vbWVudC4KCQkJCQl0YXJnZXQucGFyZW50cygnLmljb25zLXZhcmlhbnRzJykuZmluZCgnLnZhcmlhbnQnKS5yZW1vdmVDbGFzcyhbJ2J1dHRvbi1wcmltYXJ5JywgJ2FjdGl2ZScsICdsb2FkaW5nJ10pOwoJCQkJCXRhcmdldC50b2dnbGVDbGFzcyhbJ2J1dHRvbi1wcmltYXJ5JywgJ2FjdGl2ZScsICdsb2FkaW5nJ10pOwoKCQkJCQlhcHBJY29ucy5oZWxwZXJzW2N1cnJlbnRTZXQudmFyaWFudENhbGxiYWNrXS5jYWxsKHRoaXMsIHRhcmdldCwgY3VycmVudFNldCkKCQkJCQlhcHBJY29ucy5oZWxwZXJzLnNldFNlbGVjdGlvbi5jYWxsKHRoaXMpOwoJCQkJfQoJCQl9KSwKCQkJaWNvblNldDogd3AubWVkaWEuVmlldy5leHRlbmQoewoJCQkJdGFnTmFtZTogJ2RpdicsCgkJCQljbGFzc05hbWU6ICdpY29ucy1ncmlkJywKCQkJCWluaXRpYWxpemU6IGFzeW5jIGZ1bmN0aW9uICgpIHsKCgkJCQkJdGhpcy5mb250VG9Mb2FkID0gZmFsc2U7CgkJCQkJdGhpcy5vcHRpb25zLmZvbnRzID0gZm9udHMgPSB0aGlzLm1vZGVsLmdldCgnZm9udHMnKTsKCQkJCQl0aGlzLm9wdGlvbnMuaWNvblNldCA9IGljb25TZXQgPSB0aGlzLm1vZGVsLmdldCgnaWNvblNldCcpOwoJCQkJCXRoaXMub3B0aW9ucy5hY3RpdmVTZXQgPSBhY3RpdmVTZXQgPSB0aGlzLm1vZGVsLmdldCgnYWN0aXZlU2V0Jyk7CgkJCQkJdGhpcy5vcHRpb25zLmFjdGl2ZVZhcmlhbnQgPSBhY3RpdmVWYXJpYW50ID0gdGhpcy5tb2RlbC5nZXQoJ2FjdGl2ZVZhcmlhbnQnKTsKCQkJCQl0aGlzLm9wdGlvbnMuc2VsZWN0ZWRJY29ucyA9IHNlbGVjdGVkSWNvbnMgPSB0aGlzLm1vZGVsLmdldCgnc2VsZWN0ZWRJY29ucycpOwoKCQkJCQl0aGlzLm9wdGlvbnMuYXNzZXRzUmVhZHkgPSBQcm9taXNlCgkJCQkJCS5hbGwoWwoJCQkJCQkJYXBwSWNvbnMuaGVscGVycy5sb2FkRm9udHMuY2FsbCh0aGlzLCBpY29uU2V0LCBhY3RpdmVTZXQsIGFjdGl2ZVZhcmlhbnQsIGZvbnRzKSwKCQkJCQkJCWFwcEljb25zLmhlbHBlcnMubG9hZEljb25zLmNhbGwodGhpcywgaWNvblNldCwgYWN0aXZlU2V0KSwKCQkJCQkJXSkKCQkJCQkJLnRoZW4oKHJlc3VsdCkgPT4gewoJCQkJCQkJaWNvblNldC5tYXAoKGVsZW1lbnQpID0+IHsKCQkJCQkJCQlpZiAoZWxlbWVudC5pZCA9PT0gYWN0aXZlU2V0KSBlbGVtZW50Lmljb25zID0gcmVzdWx0WzFdOyAvLyBsb2FkSWNvbnMoKSBwcm9taXNlIHJlc3VsdC4KCQkJCQkJCX0pOwoKCQkJCQkJCXRoaXMub3B0aW9ucy50ZW1wbGF0ZSA9ICdpY29uLXNldC1pdGVtcyc7CgkJCQkJCQlyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRydWUpOwoJCQkJCQl9KQoJCQkJCQkuY2F0Y2goKGVycm9yKSA9PiB7CgkJCQkJCQl0aGlzLm9wdGlvbnMgPSB7CgkJCQkJCQkJbWVzc2FnZTogZXJyb3IubWVzc2FnZSwKCQkJCQkJCX07CgkJCQkJCQlNZXNzaWFFeHQubG9nZ2VyLmVycm9yKGVycm9yKTsKCQkJCQkJCXRoaXMub3B0aW9ucy50ZW1wbGF0ZSA9ICdpY29uLWVycm9yJzsKCQkJCQkJCXJldHVybiBQcm9taXNlLnJlc29sdmUoZmFsc2UpOwoJCQkJCQl9KTsKCgkJCQkJcmV0dXJuIGF3YWl0IHRoaXMub3B0aW9ucy5hc3NldHNSZWFkeTsKCQkJCX0sCgkJCQlldmVudHM6IHsKCQkJCQknY2xpY2sgLmljb24tcGxhY2Vob2xkZXInOiAndG9nZ2xlSWNvblNlbGVjdGlvbicsCgkJCQl9LAoJCQkJcmVuZGVyOiBmdW5jdGlvbiAoKSB7CgoJCQkJCWlmIChkb2N1bWVudCAmJiBkb2N1bWVudC5mb250cyAmJiB3aW5kb3dbJ0ZvbnRGYWNlJ10pIHsKCgkJCQkJCWxldCB3YWl0Rm9udHMgPSBmYWxzZTsKCQkJCQkJY29uc3QKCQkJCQkJCWFjdGl2ZVNldERhdGEgPSB0aGlzLm9wdGlvbnMuaWNvblNldC5maW5kKChlbGVtZW50KSA9PiBlbGVtZW50LmlkID09PSBhY3RpdmVTZXQpLAoJCQkJCQkJYWN0aXZlVmFyaWFudERhdGEgPSBhY3RpdmVTZXREYXRhLnZhcmlhbnRzLmZpbmQoKGVsZW1lbnQpID0+IGVsZW1lbnQuaWQgPT09IHRoaXMub3B0aW9ucy5hY3RpdmVWYXJpYW50W2FjdGl2ZVNldF0pLAoJCQkJCQkJZm9udERhdGEgPSB0aGlzLm9wdGlvbnMuZm9udHMuZmluZCgoZWxlbWVudCkgPT4gZWxlbWVudC5pZCA9PT0gYWN0aXZlVmFyaWFudERhdGEuZm9udElkKTsKCgkJCQkJCXRoaXMuZm9udFRvTG9hZCA9IGZvbnREYXRhLm5hbWU7CgkJCQkJCXdhaXRGb250cyA9ICFkb2N1bWVudC5mb250cy5jaGVjayhgMXB4ICR7dGhpcy5mb250VG9Mb2FkfWApOy8vIENocm9tZSB1bmxvYWRzIG5vbi11c2VkIGZvbnRzIGFuZCBpIGRvbid0IGtub3cgZm9yIG5vdyB3aHkuCgoJCQkJCQlpZiAod2FpdEZvbnRzKSB7CgkJCQkJCQl0aGlzLiRlbC5hZGRDbGFzcygnYXBwbHlpbmctZm9udHMnKTsKCQkJCQkJfQoJCQkJCX0gZWxzZSB7CgkJCQkJCXRoaXMuJGVsLmFkZENsYXNzKCdhcHBseWluZy1mb250cycpOwoJCQkJCX0KCgkJCQkJbGV0IHRlbXBsYXRlID0gd3AudGVtcGxhdGUodGhpcy5vcHRpb25zLnRlbXBsYXRlKTsKCQkJCQl0aGlzLiRlbC5odG1sKHRlbXBsYXRlKHRoaXMub3B0aW9ucykpOwoJCQkJfSwKCQkJCXJlYWR5OiBmdW5jdGlvbiAoKSB7CgkJCQkJZG9jdW1lbnQuZm9udHMucmVhZHkudGhlbigoKSA9PiB7CgkJCQkJCXRoaXMuJGVsLnJlbW92ZUNsYXNzKCdhcHBseWluZy1mb250cycpOwoJCQkJCQl0aGlzLiRlbC5wYXJlbnRzKCcjaWNvbi1zZXQnKS5maW5kKCcuaWNvbnMtdmFyaWFudHMgLnZhcmlhbnQnKS5yZW1vdmVDbGFzcygnbG9hZGluZycpOwoJCQkJCQlhcHBJY29ucy5oZWxwZXJzLm9ic2VydmVJY29uQ29udGFpbmVycygpOwoJCQkJCX0pOwoJCQkJfSwKCQkJCXRvZ2dsZUljb25TZWxlY3Rpb246IGZ1bmN0aW9uIChldmVudCkgewoJCQkJCWNvbnN0CgkJCQkJCXRhcmdldCA9ICQoZXZlbnQuY3VycmVudFRhcmdldCksCgkJCQkJCWlzTXVsdGlwbGUgPSB0aGlzLmNvbnRyb2xsZXIuc3RhdGVzLmdldCgnbGlicmFyeScpLmdldCgnc2VsZWN0aW9uJykubXVsdGlwbGU7CgoJCQkJCWlmIChpc011bHRpcGxlID09PSBmYWxzZSkgewoJCQkJCQl0aGlzLiRlbC5maW5kKCcuaWNvbi1wbGFjZWhvbGRlci5zZWxlY3RlZCcpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpOwoJCQkJCX0KCQkJCQkvLyBBbGwgdGhpcyBsb2dpYyBzaG91bGQgd29yayBvbmx5IGlmIGljb24gYXJlIGJlaW5nIHNlbGV0ZWQgbm93LgoJCQkJCWVsc2UgaWYgKGV2ZW50LnNoaWZ0S2V5ID09PSB0cnVlICYmICF0YXJnZXQuaGFzQ2xhc3MoJ3NlbGVjdGVkJykpIHsKCQkJCQkJdGFyZ2V0LmF0dHIoJ21hcmtlcicsICcnKTsKCQkJCQkJbGV0IHN0YXJ0ID0gdGhpcy4kZWwuZmluZCgnLmljb24tcGxhY2Vob2xkZXIuc2VsZWN0ZWQnKTsKCQkJCQkJbGV0IGZvcndhcmQgPSB0aGlzLiRlbC5maW5kKCcuaWNvbi1wbGFjZWhvbGRlci5zZWxlY3RlZCcpLm5leHRBbGwoJ1ttYXJrZXJdJyk7CgkJCQkJCWxldCBiYWNrd2FyZCA9IHRoaXMuJGVsLmZpbmQoJy5pY29uLXBsYWNlaG9sZGVyLnNlbGVjdGVkJykucHJldkFsbCgnW21hcmtlcl0nKTsKCgkJCQkJCWlmIChmb3J3YXJkLmxlbmd0aCA+IDApIHsKCQkJCQkJCXN0YXJ0Lm5leHRVbnRpbChmb3J3YXJkKS5hZGRCYWNrKHN0YXJ0KS5hZGRDbGFzcygnc2VsZWN0ZWQnKTsKCQkJCQkJfQoJCQkJCQlpZiAoYmFja3dhcmQubGVuZ3RoID4gMCkgewoJCQkJCQkJc3RhcnQucHJldlVudGlsKGJhY2t3YXJkKS5hZGRCYWNrKHN0YXJ0KS5hZGRDbGFzcygnc2VsZWN0ZWQnKTsKCQkJCQkJfQoKCQkJCQkJdGFyZ2V0LnJlbW92ZUF0dHIoJ21hcmtlcicsICcnKTsKCQkJCQl9CgoJCQkJCXRhcmdldC50b2dnbGVDbGFzcygnc2VsZWN0ZWQnKTsKCQkJCQlhcHBJY29ucy5oZWxwZXJzLnNldFNlbGVjdGlvbi5jYWxsKHRoaXMpOwoJCQkJfSwKCQkJfSksCgkJCWljb25Mb2FkZXI6IHdwLm1lZGlhLlZpZXcuZXh0ZW5kKHsKCQkJCXRhZ05hbWU6ICdkaXYnLAoJCQkJY2xhc3NOYW1lOiAnaWNvbi1sb2FkZXInLAoJCQkJdGVtcGxhdGU6IHdwLnRlbXBsYXRlKCdpY29uLWxvYWRlcicpLAoJCQl9KSwKCQkJaWNvbnNUb29sYmFyOiB3cC5tZWRpYS52aWV3LlRvb2xiYXIuZXh0ZW5kKHsKCQkJCWluaXRpYWxpemU6IGZ1bmN0aW9uICgpIHsKCQkJCQlfLmRlZmF1bHRzKHRoaXMub3B0aW9ucywgewoJCQkJCQlldmVudDogJ3NlbGVjdEljb24nLAoJCQkJCQljbG9zZTogZmFsc2UsCgkJCQkJCWl0ZW1zOiB7CgkJCQkJCQlzZWxlY3RJY29uOiB7CgkJCQkJCQkJdGV4dDogbWVzc2lhVmFycy5tZXNzYWdlcy5tZWRpYUZyYW1lLmljb25zQnV0dG9uLnRleHQsCgkJCQkJCQkJc3R5bGU6ICdwcmltYXJ5JywKCQkJCQkJCQlwcmlvcml0eTogODAsCgkJCQkJCQkJcmVxdWlyZXM6IGZhbHNlLAoJCQkJCQkJCWNsaWNrOiAoKCkgPT4gdGhpcy5jb250cm9sbGVyLnN0YXRlKCkuZ2V0U2VsZWN0aW9uKCkpLAoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfSk7CgoJCQkJCXdwLm1lZGlhLnZpZXcuVG9vbGJhci5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwoJCQkJfSwKCQkJCS8vIGNhbGxlZCBlYWNoIHRpbWUgdGhlIG1vZGVsIGNoYW5nZXMKCQkJCXJlZnJlc2g6IGZ1bmN0aW9uICgpIHsKCQkJCQl2YXIgc2VsZWN0aW9uID0gdGhpcy5jb250cm9sbGVyLnN0YXRlKCkucHJvcHMuZ2V0KCdzZWxlY3RlZEljb25zJyk7CgkJCQkJdGhpcy5nZXQoJ3NlbGVjdEljb24nKS5tb2RlbC5zZXQoJ2Rpc2FibGVkJywgc2VsZWN0aW9uLmxlbmd0aCA9PT0gMCk7CgoJCQkJCXdwLm1lZGlhLnZpZXcuVG9vbGJhci5wcm90b3R5cGUucmVmcmVzaC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwoJCQkJfSwKCQkJfSksCgkJfSwKCQljb250cm9sbGVyczogewoJCQlpY29uQ29udGVudDogd3AubWVkaWEuY29udHJvbGxlci5TdGF0ZS5leHRlbmQoewoJCQkJaW5pdGlhbGl6ZTogZnVuY3Rpb24gKCkgewoJCQkJCXRoaXMucHJvcHMgPSBhcHBJY29ucy5tb2RlbHMuaWNvbnM7CgkJCQkJdGhpcy5wcm9wcy5vbignY2hhbmdlOmFjdGl2ZVNldCcsIHRoaXMucmVmcmVzaEZvbnRDb2xsZWN0aW9uLCB0aGlzKTsKCQkJCQl0aGlzLnByb3BzLm9uKCdjaGFuZ2U6YWN0aXZlVmFyaWFudCcsIHRoaXMucmVmcmVzaEljb25TZXQsIHRoaXMpOwoJCQkJCXRoaXMucHJvcHMub24oJ2NoYW5nZTpzZWxlY3RlZEljb25zJywgdGhpcy5yZWZyZXNoVG9vbGJhciwgdGhpcyk7CgkJCQkJdGhpcy5wcm9wcy5vbigncmVzZXQnLCB0aGlzLnJlc2V0Rm9udENvbGxlY3Rpb24sIHRoaXMpOwoJCQkJfSwKCQkJCXJlZnJlc2hGb250Q29sbGVjdGlvbjogZnVuY3Rpb24gKCkgewoJCQkJCXRoaXMudHJpZ2dlcignY29udGVudDpyZW5kZXI6Zm9udENvbGxlY3Rpb24nKTsKCQkJCX0sCgkJCQlyZWZyZXNoSWNvblNldDogZnVuY3Rpb24gKCkgewoJCQkJCS8vIEdpdmUgYnJvd3NlciBhIGNoYW5jZSB0byBhcHBseSBhbmltYXRpb24uCgkJCQkJc2V0VGltZW91dCgoKSA9PiB0aGlzLnRyaWdnZXIoJ2NvbnRlbnQ6cmVuZGVyOmljb25TZXQnKSwgMTApOwoJCQkJfSwKCQkJCXJlZnJlc2hUb29sYmFyOiBmdW5jdGlvbiAoKSB7CgkJCQkJdGhpcy5mcmFtZS50b29sYmFyLmdldCgpLnJlZnJlc2goKTsKCQkJCX0sCgkJCQlnZXRTZWxlY3Rpb246IGZ1bmN0aW9uICgpIHsKCQkJCQl0aGlzLmZyYW1lLnRyaWdnZXIoJ3NlbGVjdCcpOwoJCQkJfSwKCQkJCXJlc2V0Rm9udENvbGxlY3Rpb246IGZ1bmN0aW9uICgpIHsKCQkJCQl0aGlzLnByb3BzLnNldCgnc2VsZWN0ZWRJY29ucycsIFtdKTsKCQkJCQl0aGlzLnRyaWdnZXIoJ2NvbnRlbnQ6cmVuZGVyOmljb25TZXQnKTsKCQkJCX0sCgkJCX0pLAoJCX0sCgkJaGVscGVyczogewoJCQkvKioKCQkJICogQnVpbGQgYSBuZXcgYXJyYXkgb2Ygc2VsZWN0ZWQgZWxlbWVudHMsCgkJCSAqIGtlZXBpbmcgdGhlIG9yZGVyIG9mIGljb25TZXQgaW4gaXQuCgkJCSAqCgkJCSAqIEByZXR1cm4gdm9pZAoJCQkgKi8KCQkJc2V0U2VsZWN0aW9uKCkgewoKCQkJCWNvbnN0CgkJCQkJaWNvblNldCA9IHRoaXMubW9kZWwuZ2V0KCdpY29uU2V0JyksCgkJCQkJYWN0aXZlU2V0ID0gdGhpcy5tb2RlbC5nZXQoJ2FjdGl2ZVNldCcpLAoJCQkJCWFjdGl2ZVZhcmlhbnQgPSB0aGlzLm1vZGVsLmdldCgnYWN0aXZlVmFyaWFudCcpLAoJCQkJCXNlbGVjdGlvbiA9IHRoaXMubW9kZWwuZ2V0KCdzZWxlY3RlZEljb25zJyksCgkJCQkJYWN0aXZlU2V0RGF0YSA9IGljb25TZXQuZmluZCgoZWxlbWVudCkgPT4gZWxlbWVudC5pZCA9PT0gYWN0aXZlU2V0KSwKCQkJCQlhY3RpdmVWYXJpYW50RGF0YSA9IGFjdGl2ZVNldERhdGEudmFyaWFudHMuZmluZCgoZWxlbWVudCkgPT4gZWxlbWVudC5pZCA9PT0gYWN0aXZlVmFyaWFudFthY3RpdmVTZXRdKSwKCQkJCQlzZWxlY3RlZEVsZW1lbnRzID0gdGhpcy4kZWwuZmluZCgnLmljb24tcGxhY2Vob2xkZXIuc2VsZWN0ZWQnKSwKCQkJCQlzZWxlY3RlZFBlclNldCA9IHt9OwoKCQkJCS8vIEJ1aWxkIHNlbGVjdGlvbiBpbiBzYW1lIG9yZGVyIGFzIGZvbnRzIHNldCBjb25maWcgdG8gc2F2ZSBzZWxl0YF0aW9uIG9yZGVyLgoJCQkJZm9yIChsZXQgaSA9IDA7IGkgPCBpY29uU2V0Lmxlbmd0aDsgaSsrKSB7CgkJCQkJaWYgKGljb25TZXRbaV0uaWQgPT09IGFjdGl2ZVNldCkgewoJCQkJCQkvLyBjdXJyZW50IHNldCBpbml0aWFsbHkgZW1wdHkKCQkJCQkJc2VsZWN0ZWRQZXJTZXRbaWNvblNldFtpXS5pZF0gPSBbXTsKCQkJCQl9IGVsc2UgewoJCQkJCQlzZWxlY3RlZFBlclNldFtpY29uU2V0W2ldLmlkXSA9IHNlbGVjdGlvbi5maWx0ZXIoc2xvdCA9PiBzbG90Lmljb25TZXRJZCA9PT0gaWNvblNldFtpXS5pZCk7CgkJCQkJfQoJCQkJfQoKCQkJCWxldCBzZWxlY3RlZFZhcmlhbnQgPSB7CgkJCQkJZm9udElkOiBhY3RpdmVWYXJpYW50RGF0YS5mb250SWQsCgkJCQkJY3NzQ2xhc3M6IGFjdGl2ZVZhcmlhbnREYXRhLmNzc0NsYXNzLAoJCQkJfTsKCgkJCQlmb3IgKGxldCBpID0gMDsgaSA8IHNlbGVjdGVkRWxlbWVudHMubGVuZ3RoOyBpKyspIHsKCQkJCQlsZXQgZWwgPSB7CgkJCQkJCXR5cGU6ICdpY29uJywKCQkJCQkJaWNvblNldElkOiBhY3RpdmVTZXQsCgkJCQkJCWljb246ICQoc2VsZWN0ZWRFbGVtZW50c1tpXSkuZmluZCgnLmljb24tYXNzZXQnKS5kYXRhKCdpY29uaWQnKSwKCQkJCQkJdmFyaWFudDogc2VsZWN0ZWRWYXJpYW50LAoJCQkJCX0KCQkJCQlzZWxlY3RlZFBlclNldFthY3RpdmVTZXRdLnB1c2goZWwpOwoJCQkJfQoKCQkJCWxldCBzZWxlY3RlZCA9IFtdOwoKCQkJCS8vIEpvaW4gY3VycmVudCBzZWxlY3Rpb24gd2l0aCBvdGhlciBzZXRzLgoJCQkJZm9yIChsZXQgZm9udElkIGluIHNlbGVjdGVkUGVyU2V0KSB7CgkJCQkJc2VsZWN0ZWQgPSBzZWxlY3RlZC5jb25jYXQoc2VsZWN0ZWRQZXJTZXRbZm9udElkXSk7CgkJCQl9CgkJCQl0aGlzLm1vZGVsLnNldCgnc2VsZWN0ZWRJY29ucycsIHNlbGVjdGVkKTsKCQkJfSwKCQkJLyoqCgkJCSAqIEFkZCBhbmQgcmVtb3ZlIHByb3BwZXIgQ1NTIGNsYXNzZXMgb24gaWNvbnMsCgkJCSAqIGFjY29yZGluZyB0byBjdXJyZW50bHkgYWN0aXZlIGZvbnQgdmFyaWFudHMuCgkJCSAqCgkJCSAqIEBwYXJhbSBvYmplY3QgalF1ZXJ5IGNsaWNrZWQgZWxlbWVudC4KCQkJICogQHBhcmFtIG9iamVjdCBDdXJyZW50IGZvbnQgc2V0LgoJCQkgKgoJCQkgKiBAcmV0dXJuIHZvaWQKCQkJICovCgkJCXNldFZhcmlhbnRNYXRlcmlhbEljb25zOiBmdW5jdGlvbiAodGFyZ2V0LCBjdXJyZW50U2V0KSB7CgoJCQkJY29uc3QKCQkJCQlhY3RpdmVWYXJpYW50Q3VyciA9IHRoaXMubW9kZWwuZ2V0KCdhY3RpdmVWYXJpYW50JyksCgkJCQkJYWN0aXZlVmFyaWFudE5ldyA9IHRhcmdldC5wYXJlbnRzKCcuaWNvbnMtdmFyaWFudHMnKS5maW5kKCcudmFyaWFudC5hY3RpdmUnKS5maXJzdCgpLmRhdGEoJ3ZhcmlhbnRpZCcpLnRvU3RyaW5nKCksIC8vIE9ubHkgb25lIHZhcmlhbnQgY2FuIGJlIGFjdGl2ZSBpbiBhIG1vbWVudC4KCQkJCQl2YXJpYW50cyA9IHt9OwoKCQkJCWZvciAobGV0IHZhcmlhbnRJZCBpbiBhY3RpdmVWYXJpYW50Q3VycikgewoJCQkJCXZhcmlhbnRzW3ZhcmlhbnRJZF0gPSBhY3RpdmVWYXJpYW50Q3Vyclt2YXJpYW50SWRdOwoKCQkJCQlpZiAoY3VycmVudFNldC5pZCA9PT0gdmFyaWFudElkKSB7CgkJCQkJCXZhcmlhbnRzW3ZhcmlhbnRJZF0gPSBhY3RpdmVWYXJpYW50TmV3OwoJCQkJCX0KCQkJCX0KCgkJCQl0aGlzLm1vZGVsLnNldCgnYWN0aXZlVmFyaWFudCcsIHZhcmlhbnRzKTsKCQkJfSwKCQkJbG9hZEZvbnRzOiBhc3luYyBmdW5jdGlvbiAoaWNvblNldCwgYWN0aXZlU2V0LCBhY3RpdmVWYXJpYW50LCBmb250cykgewoKCQkJCWxldCBmb250VG9Mb2FkID0gZmFsc2U7CgoJCQkJY29uc3QKCQkJCQlhY3RpdmVTZXREYXRhID0gaWNvblNldC5maW5kKChlbGVtZW50KSA9PiBlbGVtZW50LmlkID09PSBhY3RpdmVTZXQpLAoJCQkJCWFjdGl2ZVZhcmlhbnREYXRhID0gYWN0aXZlU2V0RGF0YS52YXJpYW50cy5maW5kKChlbGVtZW50KSA9PiBlbGVtZW50LmlkID09PSBhY3RpdmVWYXJpYW50W2FjdGl2ZVNldF0pLAoJCQkJCWZvbnREYXRhID0gZm9udHMuZmluZCgoZWxlbWVudCkgPT4gZWxlbWVudC5pZCA9PT0gYWN0aXZlVmFyaWFudERhdGEuZm9udElkKTsKCgkJCQlsZXQgbG9hZCA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKCgkJCQkJbGV0IGZvbnRTZWxlY3RvciA9IGAjJHtmb250RGF0YS5pZH0tY3NzYDsvLyBJRCBzaG91bGQgbWF0Y2ggV1AgYXNzZXRzIG5hbWluZyBjb252ZW50aW9uLgoJCQkJCWlmICgkKGZvbnRTZWxlY3RvcikubGVuZ3RoID4gMCkgewoJCQkJCQlyZXR1cm4gcmVzb2x2ZSh0cnVlKTsKCQkJCQl9CgkJCQkJZm9udFRvTG9hZCA9IGZvbnREYXRhOwoKCQkJCQlpZiAoZm9udFRvTG9hZCkgewoKCQkJCQkJbGV0IGljb25Mb2FkZXJWaWV3ID0gbmV3IGFwcEljb25zLnZpZXdzLmljb25Mb2FkZXIoewoJCQkJCQkJY29udHJvbGxlcjogdGhpcy5vcHRpb25zLmNvbnRyb2xsZXIsCgkJCQkJCQltb2RlbDogdGhpcy5vcHRpb25zLm1vZGVsLAoJCQkJCQl9KTsKCQkJCQkJaWNvbkNvbGxlY3Rpb25WaWV3LnZpZXdzLnNldCgnI2ljb24tc2V0LWl0ZW1zJywgW2ljb25Mb2FkZXJWaWV3XSk7CgoJCQkJCQlsZXQgc3R5bGVzaGVldCA9ICQoJzxsaW5rPicpLmF0dHIoeyB0eXBlOiAndGV4dC9jc3MnLCByZWw6ICdzdHlsZXNoZWV0JywgaWQ6IGAke2ZvbnRUb0xvYWQuaWR9LWNzc2AsIGhyZWY6IGZvbnRUb0xvYWQudXJsIH0pOy8vIElEIHNob3VsZCBtYXRjaCBXUCBhc3NldHMgbmFtaW5nIGNvbnZlbnRpb24uCgkJCQkJCXN0eWxlc2hlZXQub24oJ2xvYWQnLCAoKSA9PiB7CgkJCQkJCQlyZXR1cm4gcmVzb2x2ZSh0cnVlKTsKCQkJCQkJfSk7CgkJCQkJCXN0eWxlc2hlZXQuYXBwZW5kVG8oJ2JvZHknKTsKCQkJCQl9CgkJCQkJZWxzZSB7CgkJCQkJCXJldHVybiByZXNvbHZlKHRydWUpOwoJCQkJCX0KCQkJCX0pOwoKCQkJCXJldHVybiBsb2FkOwoJCQl9LAoJCQlsb2FkSWNvbnM6IGFzeW5jIGZ1bmN0aW9uIChpY29uU2V0LCBhY3RpdmVTZXQpIHsKCgkJCQljb25zdCBhY3RpdmVTZXREYXRhID0gaWNvblNldC5maW5kKChlbGVtZW50KSA9PiBlbGVtZW50LmlkID09PSBhY3RpdmVTZXQpOwoKCQkJCWlmIChPYmplY3Qua2V5cyhhY3RpdmVTZXREYXRhLmljb25zKS5sZW5ndGggPiAwKSB7CgkJCQkJcmV0dXJuIFByb21pc2UucmVzb2x2ZShhY3RpdmVTZXREYXRhLmljb25zKTsKCQkJCX0KCgkJCQlsZXQgaWNvbnMgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CgoJCQkJCWlmICh4aHIgIT0gbnVsbCkgewoJCQkJCQl4aHIuYWJvcnQoKTsKCQkJCQkJeGhyID0gbnVsbDsKCQkJCQl9CgoJCQkJCXhociA9IHdwLm1lZGlhLmFqYXgoewoJCQkJCQl0eXBlOiAnUE9TVCcsCgkJCQkJCXVybDogbWVzc2lhVmFycy5hamF4VXJsLAoJCQkJCQlkYXRhOiB7CgkJCQkJCQlhY3Rpb246IGFjdGl2ZVNldERhdGEuYWpheEFjdGlvbiwKCQkJCQkJCW1lc3NpYU5vbmNlOiBtZXNzaWFWYXJzLm1lc3NpYU5vbmNlLAoJCQkJCQkJZGF0YToge30sCgkJCQkJCX0sCgkJCQkJCWJlZm9yZVNlbmQ6IChqcUFqYXgsIFJlcXVlc3QpID0+IHsKCQkJCQkJCWxldCBpY29uTG9hZGVyVmlldyA9IG5ldyBhcHBJY29ucy52aWV3cy5pY29uTG9hZGVyKHsKCQkJCQkJCQljb250cm9sbGVyOiB0aGlzLm9wdGlvbnMuY29udHJvbGxlciwKCQkJCQkJCQltb2RlbDogdGhpcy5vcHRpb25zLm1vZGVsLAoJCQkJCQkJfSk7CgkJCQkJCQlpY29uQ29sbGVjdGlvblZpZXcudmlld3Muc2V0KCcjaWNvbi1zZXQtaXRlbXMnLCBbaWNvbkxvYWRlclZpZXddKTsKCQkJCQkJfSwKCQkJCQkJc3VjY2VzczogKHNlcnZlcikgPT4gewoJCQkJCQkJaWYgKHNlcnZlci5jb2RlID09PSAyMDApIHsKCQkJCQkJCQlyZXR1cm4gcmVzb2x2ZShzZXJ2ZXIuaWNvbnMpOwoJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQlyZXR1cm4gcmVqZWN0KG5ldyBFcnJvcihzZXJ2ZXIubWVzc2FnZSkpOwoJCQkJCQkJfQoJCQkJCQl9LAoJCQkJCQllcnJvcjogKE1MSHR0cFJlcXVlc3QsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSA9PiB7CgkJCQkJCQlpZiAoTUxIdHRwUmVxdWVzdC5zdGF0dXMgPT09IDAgJiYgdGV4dFN0YXR1cyA9PSAnYWJvcnQnKSB7CgkJCQkJCQkJcmV0dXJuOwoJCQkJCQkJfQoJCQkJCQkJcmV0dXJuIHJlamVjdChuZXcgRXJyb3IobWVzc2lhVmFycy5tZXNzYWdlcy5tZWRpYUZyYW1lLmVycm9yU2V0TG9hZCkpOwoJCQkJCQl9LAoJCQkJCQljb21wbGV0ZTogZnVuY3Rpb24gKHNlcnZlciwgdGV4dFN0YXR1cywgTUxIdHRwUmVxdWVzdCkgewoJCQkJCQkJeGhyID0gbnVsbDsKCQkJCQkJfSwKCQkJCQl9KTsKCQkJCX0pOwoKCQkJCXJldHVybiBpY29uczsKCQkJfSwKCQkJLyoqCgkJCSAqIENyZWF0ZSBJbnRlcnNlY3Rpb25PYnNlcnZlciBmb3IgY29udGFpbmVycyB3aXRoIGljb25zLgoJCQkgKgoJCQkgKiBAcmV0dXJuIHZvaWQKCQkJICovCgkJCW9ic2VydmVJY29uQ29udGFpbmVyczogZnVuY3Rpb24gKCkgewoKCQkJCXZhciBpY29ucyA9ICQoJy5pY29ucy1jb2xsZWN0aW9uICNpY29uLXNldCAuaWNvbnMtZ3JpZCAuaWNvbi1wbGFjZWhvbGRlci53b3cnKTsKCgkJCQlpZiAoaWNvbnMubGVuZ3RoID09PSAwIHx8IHR5cGVvZiBpY29ucyA9PT0gJ3VuZGVmaW5lZCcpIHsKCQkJCQlyZXR1cm47CgkJCQl9CgoJCQkJaWYgKCF3aW5kb3cuSW50ZXJzZWN0aW9uT2JzZXJ2ZXIpIHsKCQkJCQlpY29ucy5yZW1vdmVDbGFzcygnd293Jyk7CgkJCQkJcmV0dXJuOwoJCQkJfQoKCQkJCWxldCBvcHRpb25zID0gewoJCQkJCXJvb3Q6IG51bGwsCgkJCQkJcm9vdE1hcmdpbjogJzBweCcsCgkJCQkJdGhyZXNob2xkOiBbMC4yXSwKCQkJCQkvLyBkZWxheTogMTAwLAoJCQkJCS8vIHRyYWNrVmlzaWJpbGl0eTogdHJ1ZSwgLy8gdmVyeSBleHBlbnNpdmUKCQkJCX0KCgkJCQlsZXQgb2JzZXJ2ZXIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoYXBwSWNvbnMuaGVscGVycy5pY29uVmlzaWJsZSwgb3B0aW9ucyk7CgoJCQkJZm9yIChsZXQgaSA9IDA7IGkgPCBpY29ucy5sZW5ndGg7IGkrKykgewoKCQkJCQljb25zdCBpY29uID0gaWNvbnNbaV07CgoJCQkJCWlmIChpY29uLmNsYXNzTGlzdC5jb250YWlucygnYW5pbWF0ZScpKSB7CgkJCQkJCWNvbnRpbnVlOwoJCQkJCX0KCQkJCQlvYnNlcnZlci5vYnNlcnZlKGljb24pOwoJCQkJfQoJCQl9LAoJCQkvKioKCQkJICogQ2FsbGJhY2sgZm9yIEludGVyc2VjdGlvbk9ic2VydmVyCgkJCSAqCgkJCSAqIEBwYXJhbSB7W0ludGVyc2VjdGlvbk9ic2VydmVyRW50cnldfSBjYXJkcyAgICBPYnNlcnZpbmcgSFRNTCBlbGVtZW50cwoJCQkgKiBAcGFyYW0ge0ludGVyc2VjdGlvbk9ic2VydmVyfSAgICAgICAgb2JzZXJ2ZXIgSW5zdGFuY2Ugb2YgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIKCQkJICoKCQkJICogQHJldHVybiB2b2lkCgkJCSAqLwoJCQlpY29uVmlzaWJsZTogZnVuY3Rpb24gKGljb25zLCBvYnNlcnZlcikgewoKCQkJCWZvciAobGV0IGkgPSAwOyBpIDwgaWNvbnMubGVuZ3RoOyBpKyspIHsKCgkJCQkJY29uc3QgY2FyZENvbnRhaW5lciA9IGljb25zW2ldOwoKCQkJCQlpZiAoY2FyZENvbnRhaW5lci5pbnRlcnNlY3Rpb25SYXRpbyA+IDApIHsKCgkJCQkJCXZhciBkZWxheSA9IE1hdGgucmFuZG9tKCkgKiAyICogMTAwOwoJCQkJCQkvLyBzY3JvbGwgZG93bgoJCQkJCQlzZXRUaW1lb3V0KCgpID0+IHsKCQkJCQkJCWNhcmRDb250YWluZXIudGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2FuaW1hdGUnLCAnc2NhbGUnKTsKCQkJCQkJfSwgZGVsYXkpOwoKCQkJCQkJb2JzZXJ2ZXIudW5vYnNlcnZlKGNhcmRDb250YWluZXIudGFyZ2V0KTsKCQkJCQl9CgkJCQl9CgkJCX0sCgkJfQoJfTsKCgl3cC5tZWRpYS52aWV3Lk1lZGlhRnJhbWUuU2VsZWN0ID0gY3VycmVudE1lZGlhRnJhbWUuZXh0ZW5kKHsKCQlpbml0aWFsaXplOiBmdW5jdGlvbiAoZnJhbWUpIHsKCgkJCV8uZGVmYXVsdHModGhpcy5vcHRpb25zLCB7CgkJCQlzdGF0ZTogJ2xpYnJhcnknCgkJCX0pOwoKCQkJY3VycmVudE1lZGlhRnJhbWUucHJvdG90eXBlLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKCQkJYXBwSWNvbnMuaW5pdC5jYWxsKHRoaXMpOwoJCX0sCgkJcmVuZGVyRm9udENvbGxlY3Rpb246IGZ1bmN0aW9uICgpIHsKCQkJLy8gdGhpcyB2aWV3IGhhcyBubyByb3V0ZXIKCQkJdGhpcy4kZWwuYWRkQ2xhc3MoJ2hpZGUtcm91dGVyJyk7CgoJCQlpY29uQ29sbGVjdGlvblZpZXcgPSBuZXcgYXBwSWNvbnMudmlld3MuaWNvbkNvbGxlY3Rpb24oewoJCQkJY29udHJvbGxlcjogdGhpcywKCQkJCW1vZGVsOiB0aGlzLnN0YXRlcy5nZXQoJ2ZvbnRDb2xsZWN0aW9uJykucHJvcHMsCgkJCX0pOwoJCQl0aGlzLmNvbnRlbnQuc2V0KFtpY29uQ29sbGVjdGlvblZpZXddKTsKCQl9LAoJCXJlbmRlckljb25TZXQ6IGZ1bmN0aW9uICgpIHsKCQkJaWNvblNldFZpZXcgPSBuZXcgYXBwSWNvbnMudmlld3MuaWNvblNldCh7CgkJCQljb250cm9sbGVyOiB0aGlzLAoJCQkJbW9kZWw6IHRoaXMuc3RhdGVzLmdldCgnZm9udENvbGxlY3Rpb24nKS5wcm9wcywKCQkJfSk7CgkJCWljb25TZXRWaWV3Lm9wdGlvbnMuYXNzZXRzUmVhZHkudGhlbigoc3RhdGUpID0+IGljb25Db2xsZWN0aW9uVmlldy52aWV3cy5zZXQoJyNpY29uLXNldC1pdGVtcycsIFtpY29uU2V0Vmlld10pKTsKCQl9LAoJCWNyZWF0ZUljb25zVG9vbGJhcjogZnVuY3Rpb24gKHRvb2xiYXIpIHsKCQkJdG9vbGJhci52aWV3ID0gbmV3IHdwLm1lZGlhLnZpZXcuVG9vbGJhci5JY29ucyh7CgkJCQljb250cm9sbGVyOiB0aGlzCgkJCX0pOwoJCX0sCgkJY3JlYXRlV1BUb29sYmFyOiBmdW5jdGlvbiAodG9vbGJhcikgewoJCQkvLyBvdGhlcndpcyBXUCBsb3N0IHRpdGxlIG9uIGEgYnV0dG9uIGluIHRvb2xiYXIuCgkJCWRlbGV0ZSB0aGlzLm9wdGlvbnMuYnV0dG9uLml0ZW1zOwoJCX0sCgl9KTsKCgkvLyBBY2NlcHRzIGFuIG9wdGlvbmFsIG9iamVjdCBoYXNoIHRvIG92ZXJyaWRlIGRlZmF1bHQgdmFsdWVzLgoJZnJhbWUgPSBuZXcgd3AubWVkaWEoewoJCS8vIE1vZGFsIHRpdGxlCgkJZnJhbWU6ICdzZWxlY3QnLAoJCXRpdGxlOiBtZXNzaWFWYXJzLm1lc3NhZ2VzLm1lZGlhRnJhbWUuaW1hZ2VzVGl0bGUsCgkJYnV0dG9uOiB7CgkJCXRleHQ6IG1lc3NpYVZhcnMubWVzc2FnZXMubWVkaWFGcmFtZS5pbWFnZXNCdXR0b24udGV4dAoJCX0sCgkJLy8gRW5hYmxlL2Rpc2FibGUgaWNvbiBmb250cyBjb250cm9sbGVyCgkJaWNvbkZvbnRzOiBtZXNzaWFWYXJzLm1lZGlhRnJhbWUuaWNvbkZvbnRzLAoJCS8vIEVuYWJsZS9kaXNhYmxlIG11bHRpcGxlIHNlbGVjdAoJCW11bHRpcGxlOiBnZXRDYWxsZXIoJCh0aGlzKSkuaGFzQ2xhc3MoJ211bHRpcGxlJyksCgkJLy8gTGlicmFyeSBXb3JkUHJlc3MgcXVlcnkgYXJndW1lbnRzLgoJCWxpYnJhcnk6IHsKCQkJb3JkZXI6ICdERVNDJywKCgkJCS8vIFsgJ25hbWUnLCAnYXV0aG9yJywgJ2RhdGUnLCAndGl0bGUnLCAnbW9kaWZpZWQnLCAndXBsb2FkZWRUbycsCgkJCS8vICdpZCcsICdwb3N0X19pbicsICdtZW51T3JkZXInIF0KCQkJb3JkZXJieTogJ2RhdGUnLAoKCQkJLy8gbWltZSB0eXBlLiBlLmcuICdpbWFnZScsICdpbWFnZS9qcGVnJwoJCQl0eXBlOiAnaW1hZ2UnLAoKCQkJLy8gU2VhcmNoZXMgdGhlIGF0dGFjaG1lbnQgdGl0bGUuCgkJCXNlYXJjaDogbnVsbCwKCgkJCS8vIEF0dGFjaGVkIHRvIGEgc3BlY2lmaWMgcG9zdCAoSUQpLgoJCQl1cGxvYWRlZFRvOiBudWxsCgkJfSwKCX0pOwoKCS8vIEZpcmVzIHdoZW4gdGhlIG1vZGFsIG9wZW5zIChiZWNvbWVzIHZpc2libGUpLgoJLy8gQHNlZSBtZWRpYS52aWV3Lk1vZGFsLm9wZW4oKQoJZnJhbWUub24oJ29wZW4nLCBmdW5jdGlvbiAoKSB7CgoJCWNvbnN0CgkJCXRhcmdldCA9ICQoZXZlbnQudGFyZ2V0KSwKCQkJY2FsbGVyID0gZ2V0Q2FsbGVyKHRhcmdldCksCgkJCWltYWdlaW5mbyA9IGNhbGxlci5kYXRhKCdpbWFnZWluZm8nKTsKCgkJJCh0aGlzKS5kYXRhKCdjYWxsZXInLCBjYWxsZXIpOwoJCWZyYW1lLnN0YXRlcy5nZXQoJ2xpYnJhcnknKS5nZXQoJ3NlbGVjdGlvbicpLm11bHRpcGxlID0gY2FsbGVyLmhhc0NsYXNzKCdtdWx0aXBsZScpOwoJCS8vZnJhbWUuc3RhdGUoKS5nZXQoJ3NlbGVjdGlvbicpLm11bHRpcGxlID0gY2FsbGVyLmhhc0NsYXNzKCdtdWx0aXBsZScpOwoKCQkvLyBsaWJyYXJ5LmNvbXBhcmF0b3IgPSBjb21wYXJhdG9yOyBub3QgY2xlYXIgaG93IGl0IHdvcmtzCgoJCWlmICgndW5kZWZpbmVkJyAhPT0gdHlwZW9mIGltYWdlaW5mbykgewoJCQlzd2l0Y2ggKGltYWdlaW5mby50eXBlKSB7CgkJCQljYXNlICd3cC1pbWFnZSc6CgkJCQkJZnJhbWUuc2V0U3RhdGUoJ2xpYnJhcnknKTsKCgkJCQkJY29uc3QKCQkJCQkJbGlicmFyeSA9IGZyYW1lLnN0YXRlKCkuZ2V0KCdsaWJyYXJ5JyksCgkJCQkJCXNlbGVjdGlvbiA9IGZyYW1lLnN0YXRlKCkuZ2V0KCdzZWxlY3Rpb24nKTsKCgkJCQkJbGV0IGF0dGFjaG1lbnQgPSB3cC5tZWRpYS5hdHRhY2htZW50KGltYWdlaW5mby5pZCk7CgkJCQkJYXR0YWNobWVudC5mZXRjaCgpOwoJCQkJCWxpYnJhcnkuYWRkKGF0dGFjaG1lbnQpOwoJCQkJCXNlbGVjdGlvbi5hZGQoYXR0YWNobWVudCk7CgkJCQkJYnJlYWs7CgoJCQkJY2FzZSAnaWNvbic6CgoJCQkJCXN3aXRjaCAoaW1hZ2VpbmZvLmljb25TZXRJZCkgewoJCQkJCQljYXNlICdnb29nbGUtbWF0ZXJpYWwnOgoJCQkJCQkJZnJhbWUuc2V0U3RhdGUoJ2ZvbnRDb2xsZWN0aW9uJyk7CgoJCQkJCQkJbGV0IG1vZGVsID0gZnJhbWUuc3RhdGUoKS5nZXQoJ2ZvbnRDb2xsZWN0aW9uJyk7CgkJCQkJCQlsZXQgYWN0aXZlVmFyaWFudCA9IE9iamVjdC5hc3NpZ24obW9kZWwuZ2V0KCdhY3RpdmVWYXJpYW50JykpOyAvLyBjbG9uZSBpdC4KCgkJCQkJCQlsZXQgYWN0aXZlU2V0RGF0YSA9IG1vZGVsLmdldCgnaWNvblNldCcpLmZpbmQoKGVsZW1lbnQpID0+IGVsZW1lbnQuaWQgPT09IGltYWdlaW5mby5pY29uU2V0SWQpOwoJCQkJCQkJbGV0IGFjdGl2ZVZhcmlhbnREYXRhID0gYWN0aXZlU2V0RGF0YS52YXJpYW50cy5maW5kKChlbGVtZW50KSA9PiBlbGVtZW50LmZvbnRJZCA9PT0gaW1hZ2VpbmZvLnZhcmlhbnQuZm9udElkKTsKCgkJCQkJCQlhY3RpdmVWYXJpYW50W2ltYWdlaW5mby5pY29uU2V0SWRdID0gYWN0aXZlVmFyaWFudERhdGEuaWQ7CgoJCQkJCQkJbW9kZWwuc2V0KCdhY3RpdmVTZXQnLCBpbWFnZWluZm8uaWNvblNldElkLCB7IHNpbGVudDogdHJ1ZSB9KTsKCQkJCQkJCW1vZGVsLnNldCgnYWN0aXZlVmFyaWFudCcsIGFjdGl2ZVZhcmlhbnQsIHsgc2lsZW50OiB0cnVlIH0pOwoJCQkJCQkJbW9kZWwuc2V0KCdzZWxlY3RlZEljb25zJywgW2ltYWdlaW5mb10sIHsgc2lsZW50OiB0cnVlIH0pOwoJCQkJCQkJbW9kZWwudHJpZ2dlcignY2hhbmdlOnNlbGVjdGVkSWNvbnMnKTsKCQkJCQkJCWZyYW1lLnRyaWdnZXIoJ2NvbnRlbnQ6cmVuZGVyOmZvbnRDb2xsZWN0aW9uJyk7CgkJCQkJCQlicmVhazsKCgkJCQkJCWRlZmF1bHQ6CgkJCQkJCQljb25zb2xlLmVycm9yKG5ldyBFcnJvcihgVW5rbm93biBpY29uIHNldCBpZDogJHtpbWFnZWluZm8uZm9udElkfWApKTsKCQkJCQkJCWJyZWFrOwoJCQkJCX0KCQkJCQlicmVhazsKCgkJCQlkZWZhdWx0OgoJCQkJCWNvbnNvbGUuZXJyb3IobmV3IEVycm9yKGBVbmtub3duIGltYWdlIHR5cGU6ICR7aW1hZ2VpbmZvLnR5cGV9YCkpOwoJCQl9CgkJfQoJfSk7CgoJLy8gRmlyZXMgd2hlbiBhIHVzZXIgaGFzIHNlbGVjdGVkIGF0dGFjaG1lbnQocykgYW5kIGNsaWNrZWQgdGhlIHNlbGVjdCBidXR0b24uCgkvLyBAc2VlIG1lZGlhLnZpZXcuTWVkaWFGcmFtZS5Qb3N0Lm1haW5JbnNlcnRUb29sYmFyKCkKCWZyYW1lLm9uKCdzZWxlY3QnLCBmdW5jdGlvbiAoKSB7CgoJCXZhciBzdGF0ZUlkID0gZnJhbWUuc3RhdGUoKS5nZXQoJ2lkJyk7CgoJCWlmIChzdGF0ZUlkID09PSAnZm9udENvbGxlY3Rpb24nKSB7CgoJCQlsZXQgc2VsZWN0aW9uQ29sbGVjdGlvbiA9IHRoaXMuZ2V0KCdmb250Q29sbGVjdGlvbicpLnByb3BzLmdldCgnc2VsZWN0ZWRJY29ucycpOyAvLyBzZXR0ZWQgaW4gJ2FwcEljb25zLmhlbHBlcnMuc2V0U2VsZWN0aW9uJwoKCQkJdGhpcy5nZXQoJ2ZvbnRDb2xsZWN0aW9uJykucHJvcHMudHJpZ2dlcigncmVzZXQnKTsKCQkJdGhpcy5nZXQoJ2xpYnJhcnknKS5mcmFtZS5jbG9zZSgpOwoKCQkJb25TZWxlY3QoJCh0aGlzKS5kYXRhKCdjYWxsZXInKSwgc2VsZWN0aW9uQ29sbGVjdGlvbik7CgkJfSBlbHNlIHsKCgkJCWxldCBzZWxlY3Rpb25Db2xsZWN0aW9uID0gZnJhbWUuc3RhdGUoKS5nZXQoJ3NlbGVjdGlvbicpOwoKCQkJbGV0IHNlbGVjdGVkID0gc2VsZWN0aW9uQ29sbGVjdGlvbi5tb2RlbHMubWFwKChtb2RlbCkgPT4gewoJCQkJcmV0dXJuIHsKCQkJCQl0eXBlOiAnd3AtaW1hZ2UnLAoJCQkJCWlkOiBtb2RlbC5hdHRyaWJ1dGVzLmlkLAoJCQkJCXVybDogbW9kZWwuYXR0cmlidXRlcy51cmwsCgkJCQl9CgkJCX0pOwoKCQkJb25TZWxlY3QoJCh0aGlzKS5kYXRhKCdjYWxsZXInKSwgc2VsZWN0ZWQpOwoJCX0KCX0pOwoKCS8vIEZpcmVzIGFmdGVyIHRoZSBmcmFtZSBtYXJrdXAgaGFzIGJlZW4gYnVpbHQsIGJ1dCBub3QgYXBwZW5kZWQgdG8gdGhlIERPTS4KCS8vIEBzZWUgd3AubWVkaWEudmlldy5Nb2RhbC5hdHRhY2goKQoJLy8gZnJhbWUub24oICdyZWFkeScsIGZ1bmN0aW9uKCkge30gKTsKCgkvLyBGaXJlcyB3aGVuIHRoZSBmcmFtZSdzICRlbCBpcyBhcHBlbmRlZCB0byBpdHMgRE9NIGNvbnRhaW5lci4KCS8vIEBzZWUgbWVkaWEudmlldy5Nb2RhbC5hdHRhY2goKQoJLy8gZnJhbWUub24oICdhdHRhY2gnLCBmdW5jdGlvbigpIHt9ICk7CgoJLy8gRmlyZXMgd2hlbiB0aGUgbW9kYWwgY2xvc2VzIHZpYSB0aGUgZXNjYXBlIGtleS4KCS8vIEBzZWUgbWVkaWEudmlldy5Nb2RhbC5jbG9zZSgpCgkvLyBmcmFtZS5vbiggJ2VzY2FwZScsIGZ1bmN0aW9uKCkge30gKTsKCgkvLyBGaXJlcyB3aGVuIHRoZSBtb2RhbCBjbG9zZXMuCgkvLyBAc2VlIG1lZGlhLnZpZXcuTW9kYWwuY2xvc2UoKQoJLy8gZnJhbWUub24oICdjbG9zZScsIGZ1bmN0aW9uKCkgeyB9ICk7CgoJLy8gRmlyZXMgd2hlbiBhIHN0YXRlIGFjdGl2YXRlcy4KCS8vIGZyYW1lLm9uKCAnYWN0aXZhdGUnLCBmdW5jdGlvbigpIHt9ICk7CgoJLy8gRmlyZXMgd2hlbiBhIG1vZGUgaXMgZGVhY3RpdmF0ZWQgb24gYSByZWdpb24uCgkvLyBmcmFtZS5vbiggJ3tyZWdpb259OmRlYWN0aXZhdGUnLCBmdW5jdGlvbigpIHt9ICk7CgoJLy8gYW5kIGEgbW9yZSBzcGVjaWZpYyBldmVudCBpbmNsdWRpbmcgdGhlIG1vZGUuCgkvLyBmcmFtZS5vbiggJ3tyZWdpb259OmRlYWN0aXZhdGU6e21vZGV9JywgZnVuY3Rpb24oKSB7fSApOwoKCS8vIEZpcmVzIHdoZW4gYSByZWdpb24gaXMgcmVhZHkgZm9yIGl0cyB2aWV3IHRvIGJlIGNyZWF0ZWQuCgkvLyBmcmFtZS5vbiggJ3tyZWdpb259OmNyZWF0ZScsIGZ1bmN0aW9uKCkge30gKTsKCgkvLyBhbmQgYSBtb3JlIHNwZWNpZmljIGV2ZW50IGluY2x1ZGluZyB0aGUgbW9kZS4KCS8vIGZyYW1lLm9uKCAne3JlZ2lvbn06Y3JlYXRlOnttb2RlfScsIGZ1bmN0aW9uKCkge30gKTsKCgkvLyBGaXJlcyB3aGVuIGEgcmVnaW9uIGlzIHJlYWR5IGZvciBpdHMgdmlldyB0byBiZSByZW5kZXJlZC4KCS8vIGZyYW1lLm9uKCAne3JlZ2lvbn06cmVuZGVyJywgZnVuY3Rpb24oKSB7fSApOwoKCS8vIGFuZCBhIG1vcmUgc3BlY2lmaWMgZXZlbnQgaW5jbHVkaW5nIHRoZSBtb2RlLgoJLy8gZnJhbWUub24oICd7cmVnaW9ufTpyZW5kZXI6e21vZGV9JywgZnVuY3Rpb24oKSB7fSApOwoKCS8vIEZpcmVzIHdoZW4gYSBuZXcgbW9kZSBpcyBhY3RpdmF0ZWQgKGFmdGVyIGl0IGhhcyBiZWVuIHJlbmRlcmVkKSBvbiBhIHJlZ2lvbi4KCS8vIGZyYW1lLm9uKCAne3JlZ2lvbn06YWN0aXZhdGUnLCBmdW5jdGlvbigpIHt9ICk7CgoJLy8gYW5kIGEgbW9yZSBzcGVjaWZpYyBldmVudCBpbmNsdWRpbmcgdGhlIG1vZGUuCgkvLyBmcmFtZS5vbiggJ3tyZWdpb259OmFjdGl2YXRlOnttb2RlfScsIGZ1bmN0aW9uKCkge30gKTsKCgkvLyBHZXQgYW4gb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgY3VycmVudCBzdGF0ZS4KCS8vIGZyYW1lLnN0YXRlKCk7CgoJLy8gR2V0IGFuIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIHByZXZpb3VzIHN0YXRlLgoJLy8gZnJhbWUubGFzdFN0YXRlKCk7CgoJLy8gT3BlbiB0aGUgbW9kYWwuCgltZXNzaWFWYXJzLm1lZGlhRnJhbWUubW9kZWwgPSBmcmFtZTsKCWZyYW1lLm9wZW4oKTsKfTsiO3M6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAbmFtZXNwYWNlcyI7YTowOnt9czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBpbmNsdWRlcyI7YTowOnt9czo0NDoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBmdW5jdGlvbnMiO2E6MDp7fXM6NDQ6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAY29uc3RhbnRzIjthOjA6e31zOjQyOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGNsYXNzZXMiO2E6MDp7fXM6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAaW50ZXJmYWNlcyI7YTowOnt9czo0MToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQB0cmFpdHMiO2E6MDp7fXM6NDA6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAZW51bXMiO2E6MDp7fXM6NDM6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAbWV0YWRhdGEiO2E6MDp7fX0=";