1702936352
waR3U4bTeM%3A53bbd73137312439a93c49192213e5e1-dafd5209334e652b82b7cea066d7051e
s:27600:"TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlIjoxNDp7czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBkb2NCbG9jayI7TjtzOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGhhc2giO3M6MzI6ImRhZmQ1MjA5MzM0ZTY1MmI4MmI3Y2VhMDY2ZDcwNTFlIjtzOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAG5hbWUiO3M6MTE6InNldHRpbmdzLmpzIjtzOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAHBhdGgiO3M6Mjc6InNyYy9qcy9fYmFja2VuZC9zZXR0aW5ncy5qcyI7czo0MToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBzb3VyY2UiO3M6MTk3OTE6IihmdW5jdGlvbiAoJCkgewoKCSQoZnVuY3Rpb24gKCkgewoJCSd1c2Ugc3RyaWN0JzsKCgkJdmFyIE1lc3NpYTsKCgkJTWVzc2lhID0gewoJCQl4aHI6IG51bGwsCgkJCW9iamVjdHNfc2VhcmNoX3Nsb3RzOiAnLmNhbGxiYWNrIC5vYmplY3RzX3NlYXJjaF9vcmRlcl9maWxlZHMgLm9iamVjdF9vcmRlcjpub3QoLnRlbXBsYXRlKSBpbnB1dCcsCgkJCWNyaXRlcmlhX2ZpZWxkczogJy5jYWxsYmFjayAucmF0aW5nX2ZpbGVkcyAucmF0aW5nX2NyaXRlcmlhOm5vdCgudGVtcGxhdGUpIGlucHV0JywKCQkJZ3JvdXBzX2ZpZWxkczogJy5jYWxsYmFjayAuZ3JvdXBzX2ZpZWxkcyAucHJvcGVydHlfZ3JvdXA6bm90KC50ZW1wbGF0ZSkgaW5wdXQnLAoJCQlmb250X29wdGlvbnM6ICQoJy5jYWxsYmFjayAuZm9udC1vcHRpb24td3JhcHBlcicpLAoJCQl0YWJzX3NlbGVjdG9yOiAkKCcjdGFicycpLAoJCQlmb250X2ZhbWlseV9zZWxlY3RvcnM6ICQoJ3NlbGVjdC5mb250LWZhbWlseScpLAoJCQlmb250X3ZhcmlhbnRfc2VsZWN0b3JzOiAkKCdzZWxlY3QuZm9udC12YXJpYW50JyksCgkJCWZvbnRfc3Vic2V0X3NlbGVjdG9yczogJCgnc2VsZWN0LmZvbnQtc3Vic2V0JyksCgkJCXByZXNldFNhdmVkOiBmdW5jdGlvbiAoc2V0dGluZ3MsIGV4dHJhX2RhdGEpIHsKCgkJCQlpZiAoZXh0cmFfZGF0YSAhPSBmYWxzZSkgewoJCQkJCWZvciAodmFyIGkgPSAwOyBpIDwgZXh0cmFfZGF0YS5sZW5ndGg7IGkrKykgewoJCQkJCQlpZiAoZXh0cmFfZGF0YVtpXS5zdGF0dXNDb2RlID09PSA1MDApIHsKCQkJCQkJCSQuZm4uVGFic1BsdWdpbkZyYW1lV29yaygnc2hvd01lc3NhZ2UnLCBleHRyYV9kYXRhW2ldLm1lc3NpYV9jb3JlLCAnZXJyb3InKTsKCQkJCQkJfQoJCQkJCQllbHNlIGlmIChleHRyYV9kYXRhW2ldLnN0YXR1c0NvZGUgPT09IDMwMCkgewoJCQkJCQkJJC5mbi5UYWJzUGx1Z2luRnJhbWVXb3JrKCdzaG93TWVzc2FnZScsIGV4dHJhX2RhdGFbaV0ubWVzc2lhX2NvcmUsICd3YXJuaW5nJyk7CgkJCQkJCX0KCQkJCQkJZWxzZSB7CgkJCQkJCQkkLmZuLlRhYnNQbHVnaW5GcmFtZVdvcmsoJ3Nob3dNZXNzYWdlJywgZXh0cmFfZGF0YVtpXS5tZXNzaWFfY29yZSwgJ3N1Y2Nlc3MnKTsKCQkJCQkJfQoJCQkJCQkkLmZuLlRhYnNQbHVnaW5GcmFtZVdvcmsoJ3BsYXlTb3VuZCcsIDAuMyk7CgkJCQkJfQoJCQkJfQoJCQl9LAoJCQljcml0ZXJpYVRtcGxJbnB1dDogZnVuY3Rpb24gKGV2ZW50KSB7CgkJCQl2YXIgY3JpdGVyaWFfZmllbGQgPSAkKHRoaXMpLnBhcmVudHMoJy5yYXRpbmdfY3JpdGVyaWEnKS5yZW1vdmVDbGFzcygndGVtcGxhdGUnKTsKCQkJCWNyaXRlcmlhX2ZpZWxkLmNsb25lKHRydWUpLmFkZENsYXNzKCd0ZW1wbGF0ZScpLmluc2VydEJlZm9yZShjcml0ZXJpYV9maWVsZCkuZmluZCgnaW5wdXQnKS52YWwoJycpOwoJCQkJY3JpdGVyaWFfZmllbGQuZmluZCgnaW5wdXQnKS5hdHRyKCdpZCcsIE1lc3NpYS5nZXRHVUlEKCkpOwoJCQl9LAoJCQlzZXJhY2hPcmRlclRtcGxJbnB1dDogZnVuY3Rpb24gKGV2ZW50KSB7CgkJCQlNZXNzaWEuYmluZEF1dG9jb21wbGV0ZSgkKHRoaXMpKTsKCQkJfSwKCQkJcHJvcGVydHlHcm91cFRtcGxJbnB1dDogZnVuY3Rpb24gKGV2ZW50KSB7CgkJCQl2YXIgZ3JvdXBfZmllbGQgPSAkKHRoaXMpLnBhcmVudHMoJy5wcm9wZXJ0eV9ncm91cCcpLnJlbW92ZUNsYXNzKCd0ZW1wbGF0ZScpOwoJCQkJZ3JvdXBfZmllbGQuY2xvbmUodHJ1ZSkuYWRkQ2xhc3MoJ3RlbXBsYXRlJykuaW5zZXJ0QmVmb3JlKGdyb3VwX2ZpZWxkKS5maW5kKCdpbnB1dCcpLnZhbCgnJyk7CgkJCQlncm91cF9maWVsZC5maW5kKCdpbnB1dCcpLmF0dHIoJ2lkJywgTWVzc2lhLmdldEdVSUQoKSk7CgkJCX0sCgkJCWNyaXRlcmlhSW5wdXQ6IGZ1bmN0aW9uIChldmVudCkgewoJCQkJJCh0aGlzKS5yZW1vdmVDbGFzcygnZW1wdHknKTsKCQkJfSwKCQkJc2VyYWNoT3JkZXJJbnB1dDogZnVuY3Rpb24gKGV2ZW50KSB7CgkJCQkkKHRoaXMpLnJlbW92ZUNsYXNzKCdlbXB0eScpOwoJCQl9LAoJCQlwcm9wZXJ0eUdyb3VwSW5wdXQ6IGZ1bmN0aW9uIChldmVudCkgewoJCQkJJCh0aGlzKS5yZW1vdmVDbGFzcygnZW1wdHknKTsKCQkJfSwKCQkJY3JpdGVyaWFEZWxldGU6IGZ1bmN0aW9uIChldmVudCkgewoJCQkJJCh0aGlzKS5wYXJlbnRzKCcucmF0aW5nX2ZpbGVkcycpLmZpbmQoJ2lucHV0W3R5cGU9ImhpZGRlbiJdW25hbWVdJykudHJpZ2dlcignY2hhbmdlJyk7CgkJCQkkKHRoaXMpLnBhcmVudHMoJy5yYXRpbmdfY3JpdGVyaWEnKS5yZW1vdmUoKTsKCQkJfSwKCQkJc2VyYWNoT3JkZXJEZWxldGU6IGZ1bmN0aW9uIChldmVudCkgewoJCQkJJCh0aGlzKS5wYXJlbnRzKCcub2JqZWN0c19zZWFyY2hfb3JkZXJfZmlsZWRzJykuZmluZCgnaW5wdXRbdHlwZT0iaGlkZGVuIl1bbmFtZV0nKS50cmlnZ2VyKCdjaGFuZ2UnKTsKCQkJCSQodGhpcykucGFyZW50cygnLm9iamVjdF9vcmRlcicpLnJlbW92ZSgpOwoJCQl9LAoJCQlwcm9wZXJ0eUdyb3VwRGVsZXRlOiBmdW5jdGlvbiAoZXZlbnQpIHsKCQkJCSQodGhpcykucGFyZW50cygnLmdyb3Vwc19maWVsZHMnKS5maW5kKCdpbnB1dFt0eXBlPSJoaWRkZW4iXVtuYW1lXScpLnRyaWdnZXIoJ2NoYW5nZScpOwoJCQkJJCh0aGlzKS5wYXJlbnRzKCcucHJvcGVydHlfZ3JvdXAnKS5yZW1vdmUoKTsKCQkJfSwKCQkJZ2V0R1VJRDogZnVuY3Rpb24gKCkgewoJCQkJcmV0dXJuIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCAxMCk7CgkJCX0sCgkJCW1ha2VFbGVtZW50c1NvcnRhYmxlOiBmdW5jdGlvbiAodGFyZ2V0KSB7CgkJCQl0YXJnZXQuc29ydGFibGUoewoJCQkJCWl0ZW1zOiAnLnJhdGluZ19jcml0ZXJpYTpub3QoLnRlbXBsYXRlKSwgLm9iamVjdF9vcmRlcjpub3QoLnRlbXBsYXRlKSwgLnByb3BlcnR5X2dyb3VwOm5vdCgudGVtcGxhdGUpJywKCQkJCQlyZXZlcnQ6IDIwMCwKCQkJCQlmb3JjZUhlbHBlclNpemU6IHRydWUsCgkJCQkJZm9yY2VQbGFjZWhvbGRlclNpemU6IHRydWUsCgkJCQkJb3BhY2l0eTogMSwKCQkJCQlkaXN0YW5jZTogMTAsCgkJCQkJdG9sZXJhbmNlOiAnaW50ZXJzZWN0JywKCQkJCQlzY3JvbGw6IHRydWUsCgkJCQkJc2Nyb2xsU2Vuc2l0aXZpdHk6IDIwLAoJCQkJCWNvbnRhaW5tZW50OiAnI3dwd3JhcCcsCgkJCQkJcGxhY2Vob2xkZXI6ICdzb3J0YWJsZS1wbGFjZWhvbGRlcicsCgkJCQkJaGFuZGxlOiAnLmhhbmRsZXIubW92ZScsCgkJCQkJYmVmb3JlU3RvcDogZnVuY3Rpb24gKGV2ZW50LCB1aSkgeyB9LAoJCQkJCXN0YXJ0OiBmdW5jdGlvbiAoZXZlbnQsIHVpKSB7CgkJCQkJCXVpLml0ZW0uYWRkQ2xhc3MoJ3NvcnRpbmcnKTsKCQkJCQl9LAoJCQkJCXN0b3A6IGZ1bmN0aW9uIChldmVudCwgdWkpIHsKCQkJCQkJdWkuaXRlbS5yZW1vdmVDbGFzcygnc29ydGluZycpOwoJCQkJCQkkKHRoaXMpLmZpbmQoJ2lucHV0W3R5cGU9ImhpZGRlbiJdW25hbWVdJykudHJpZ2dlcignY2hhbmdlJyk7CgkJCQkJfSwKCQkJCX0pOwoJCQl9LAoJCQlzYXZlQ3JpdGVyaWFzOiBmdW5jdGlvbiAoZSkgewoKCQkJCXZhciB0b19zYXZlID0ge307CgkJCQl2YXIgY3JpdGVyaWFfZmllbGRzID0gJChNZXNzaWEuY3JpdGVyaWFfZmllbGRzKTsKCgkJCQlmb3IgKHZhciBpID0gMDsgaSA8IGNyaXRlcmlhX2ZpZWxkcy5sZW5ndGg7IGkrKykgewoKCQkJCQl2YXIgdmFsdWUgPSAkKGNyaXRlcmlhX2ZpZWxkc1tpXSkudmFsKCk7CgoJCQkJCWlmICh2YWx1ZSA9PSAnJykgewoJCQkJCQkkKHRoaXMpLmRhdGEoJ21lc3NpYVByb2NlZWRTYXZpbmcnKS5wdXNoKGZhbHNlKTsKCQkJCQkJJChjcml0ZXJpYV9maWVsZHNbaV0pLmFkZENsYXNzKCdlbXB0eScpOwoJCQkJCX0KCQkJCQl0b19zYXZlWyQoY3JpdGVyaWFfZmllbGRzW2ldKS5hdHRyKCdpZCcpXSA9ICQoY3JpdGVyaWFfZmllbGRzW2ldKS52YWwoKTsKCQkJCX0KCQkJCSQoJy5jYWxsYmFjayAucmF0aW5nX2ZpbGVkcyBpbnB1dFtuYW1lPSJzaXRlX3JhdGluZ190ZXJtcyJdJykudmFsKEpTT04uc3RyaW5naWZ5KHRvX3NhdmUpKTsKCQkJfSwKCQkJc2F2ZVNlYXJjaE9yZGVyOiBmdW5jdGlvbiAoZSkgewoKCQkJCXZhciB0b19zYXZlID0gW107CgkJCQl2YXIgb2JqZWN0c19zZWFyY2hfc2xvdHMgPSAkKE1lc3NpYS5vYmplY3RzX3NlYXJjaF9zbG90cyk7CgoJCQkJZm9yICh2YXIgaSA9IDA7IGkgPCBvYmplY3RzX3NlYXJjaF9zbG90cy5sZW5ndGg7IGkrKykgewoKCQkJCQl2YXIgdmFsdWUgPSAkKG9iamVjdHNfc2VhcmNoX3Nsb3RzW2ldKS52YWwoKTsKCgkJCQkJaWYgKHZhbHVlID09ICcnKSB7CgkJCQkJCSQodGhpcykuZGF0YSgnbWVzc2lhUHJvY2VlZFNhdmluZycpLnB1c2goZmFsc2UpOwoJCQkJCQkkKG9iamVjdHNfc2VhcmNoX3Nsb3RzW2ldKS5hZGRDbGFzcygnZW1wdHknKTsKCQkJCQl9CgkJCQkJdmFyIHBvc3RpZCA9ICQob2JqZWN0c19zZWFyY2hfc2xvdHNbaV0pLmF0dHIoJ3Bvc3RpZCcpOwoJCQkJCXRvX3NhdmUucHVzaCh7CgkJCQkJCSdwb3N0aWQnOiBwYXJzZUludCgkKG9iamVjdHNfc2VhcmNoX3Nsb3RzW2ldKS5hdHRyKCdwb3N0aWQnKSksCgkJCQkJCSd0aXRsZSc6ICQob2JqZWN0c19zZWFyY2hfc2xvdHNbaV0pLnZhbCgpCgkJCQkJfSk7CgkJCQl9CgoJCQkJJCgnLmNhbGxiYWNrIC5vYmplY3RzX3NlYXJjaF9vcmRlcl9maWxlZHMgaW5wdXRbbmFtZT0ib2JqZWN0c19zZWFyY2hfb3JkZXIiXScpLnZhbChKU09OLnN0cmluZ2lmeSh0b19zYXZlKSk7CgkJCX0sCgkJCXNhdmVQcm9wZXJ0eUdyb3VwczogZnVuY3Rpb24gKGUpIHsKCgkJCQl2YXIgdG9fc2F2ZSA9IHt9OwoJCQkJdmFyIGdyb3Vwc19maWVsZHMgPSAkKE1lc3NpYS5ncm91cHNfZmllbGRzKTsKCgkJCQlmb3IgKHZhciBpID0gMDsgaSA8IGdyb3Vwc19maWVsZHMubGVuZ3RoOyBpKyspIHsKCgkJCQkJdmFyIGlkID0gJChncm91cHNfZmllbGRzW2ldKS5hdHRyKCdpZCcpOwoJCQkJCXZhciBuYW1lID0gJChncm91cHNfZmllbGRzW2ldKS5kYXRhKCduYW1lJyk7CgkJCQkJdmFyIHZhbHVlID0gJChncm91cHNfZmllbGRzW2ldKS52YWwoKTsKCgkJCQkJaWYgKHZhbHVlID09ICcnKSB7CgkJCQkJCSQodGhpcykuZGF0YSgnbWVzc2lhUHJvY2VlZFNhdmluZycpLnB1c2goZmFsc2UpOwoJCQkJCQkkKGdyb3Vwc19maWVsZHNbaV0pLmFkZENsYXNzKCdlbXB0eScpOwoJCQkJCX0KCQkJCQlpZiAoJ3VuZGVmaW5lZCcgPT09IHR5cGVvZiB0b19zYXZlW2lkXSkgewoJCQkJCQl0b19zYXZlW2lkXSA9IHt9OwoJCQkJCX0KCQkJCQl0b19zYXZlW2lkXVtuYW1lXSA9IHZhbHVlOwoJCQkJfQoJCQkJJCgnLmNhbGxiYWNrIC5ncm91cHNfZmllbGRzIGlucHV0W25hbWU9InByb3BlcnR5X2dyb3VwcyJdJykudmFsKEpTT04uc3RyaW5naWZ5KHRvX3NhdmUpKTsKCQkJfSwKCQkJc2F2ZUZvbnRPcHRpb25zOiBmdW5jdGlvbiAoZSkgewoKCQkJCXZhciBmb250X29wdGlvbl9zbG90cyA9IE1lc3NpYS5mb250X29wdGlvbnM7CgoJCQkJZm9yICh2YXIgaSA9IDA7IGkgPCBmb250X29wdGlvbl9zbG90cy5sZW5ndGg7IGkrKykgewoKCQkJCQl2YXIgdG9fc2F2ZSA9IHt9OwoJCQkJCXZhciBvcHRpb25fc2xvdCA9ICQoZm9udF9vcHRpb25fc2xvdHNbaV0pOwoJCQkJCXZhciBmb250X29wdGlvbnMgPSBvcHRpb25fc2xvdC5maW5kKCdzZWxlY3QuZm9udC1vcHRpb24sIGlucHV0LmZvbnQtb3B0aW9uJyk7CgoJCQkJCWZvciAodmFyIHEgPSAwOyBxIDwgZm9udF9vcHRpb25zLmxlbmd0aDsgcSsrKSB7CgoJCQkJCQl2YXIgZm9udF9vcHRpb24gPSAkKGZvbnRfb3B0aW9uc1txXSk7CgkJCQkJCXZhciBrZXkgPSBmb250X29wdGlvbi5kYXRhKCdrZXknKTsKCQkJCQkJdmFyIHNlbGVjdGVkX29wdGlvbiA9ICgkKGZvbnRfb3B0aW9uc1txXSkuaXMoJ3NlbGVjdCcpKSA/ICQoZm9udF9vcHRpb25zW3FdKS5maW5kKCc6c2VsZWN0ZWQnKSA6ICQoZm9udF9vcHRpb25zW3FdKS5pcygnaW5wdXQnKTsKCgkJCQkJCWlmIChmb250X29wdGlvbi5oYXNDbGFzcygnZm9udC1mYW1pbHknKSkgewoJCQkJCQkJdG9fc2F2ZVsnY29sbGVjdGlvbiddID0gc2VsZWN0ZWRfb3B0aW9uLnBhcmVudCgpLmRhdGEoJ2NvbGxlY3Rpb24nKTsKCQkJCQkJfQoKCQkJCQkJdmFyIHZhbCA9ICQoZm9udF9vcHRpb25zW3FdKS52YWwoKTsKCQkJCQkJdmFyIGlzTnVibWVyID0gL15bLTEtOV0rJC8udGVzdCh2YWwpOwoKCQkJCQkJaWYgKGlzTnVibWVyKSB7CgkJCQkJCQl0b19zYXZlWyQoZm9udF9vcHRpb25zW3FdKS5kYXRhKCdrZXknKV0gPSBwYXJzZUludCh2YWwpOwoJCQkJCQl9CgkJCQkJCWVsc2UgewoJCQkJCQkJdG9fc2F2ZVskKGZvbnRfb3B0aW9uc1txXSkuZGF0YSgna2V5JyldID0gdmFsOwoJCQkJCQl9CgkJCQkJfQoKCQkJCQlvcHRpb25fc2xvdC5maW5kKCdpbnB1dFt0eXBlPSJoaWRkZW4iXSMnICsgb3B0aW9uX3Nsb3QuZGF0YSgnZGF0YUhvbGRlcklkJykpLnZhbChKU09OLnN0cmluZ2lmeSh0b19zYXZlKSk7CgkJCQl9CgkJCX0sCgkJCWNyaXRlcmlhU2F2ZWQ6IGZ1bmN0aW9uIChlKSB7CgoJCQkJdmFyIHNhdmVkX2ZpZWxkcyA9IEpTT04ucGFyc2UoJCh0aGlzKS52YWwoKSk7CgkJCQl2YXIgdGVtcGxhdGUgPSAkKCcuY2FsbGJhY2sgLnJhdGluZ19maWxlZHMgLnJhdGluZ19jcml0ZXJpYS50ZW1wbGF0ZScpOwoKCQkJCSQoJy5jYWxsYmFjayAucmF0aW5nX2ZpbGVkcyAucmF0aW5nX2NyaXRlcmlhOm5vdCgudGVtcGxhdGUpJykucmVtb3ZlKCk7CgoJCQkJZm9yIChsZXQga2V5IGluIHNhdmVkX2ZpZWxkcykgewoKCQkJCQl2YXIgaW5zZXJ0ID0gdGVtcGxhdGUuY2xvbmUodHJ1ZSkucmVtb3ZlQ2xhc3MoJ3RlbXBsYXRlJyk7CgkJCQkJaW5zZXJ0LmZpbmQoJ2lucHV0JykuYXR0cignaWQnLCBrZXkpLnZhbChzYXZlZF9maWVsZHNba2V5XSkKCQkJCQlpbnNlcnQuaW5zZXJ0QmVmb3JlKCQodGhpcykpOwoJCQkJfQoJCQl9LAoJCQlzZXJhY2hPcmRlclNhdmVkOiBmdW5jdGlvbiAoZSkgewoKCQkJCXZhciBzYXZlZF9maWVsZHMgPSBKU09OLnBhcnNlKCQodGhpcykudmFsKCkpOwoJCQkJdmFyIHRlbXBsYXRlID0gJCgnLmNhbGxiYWNrIC5vYmplY3RzX3NlYXJjaF9vcmRlcl9maWxlZHMgLm9iamVjdF9vcmRlci50ZW1wbGF0ZScpOwoKCQkJCSQoJy5jYWxsYmFjayAub2JqZWN0c19zZWFyY2hfb3JkZXJfZmlsZWRzIC5vYmplY3Rfb3JkZXI6bm90KC50ZW1wbGF0ZSknKS5yZW1vdmUoKTsKCgkJCQlmb3IgKHZhciBpID0gMDsgaSA8IHNhdmVkX2ZpZWxkcy5sZW5ndGg7IGkrKykgewoJCQkJCXZhciBpbnNlcnQgPSB0ZW1wbGF0ZS5jbG9uZSh0cnVlKS5yZW1vdmVDbGFzcygndGVtcGxhdGUnKTsKCQkJCQlpbnNlcnQuZmluZCgnaW5wdXQnKS5hdHRyKCdwb3N0aWQnLCBzYXZlZF9maWVsZHNbaV0ucG9zdGlkKS52YWwoc2F2ZWRfZmllbGRzW2ldLnRpdGxlKQoJCQkJCWluc2VydC5pbnNlcnRCZWZvcmUoJCh0aGlzKSk7CgkJCQl9CgkJCX0sCgkJCXByb3BlcnR5R3JvdXBTYXZlZDogZnVuY3Rpb24gKGUpIHsKCgkJCQl2YXIgc2F2ZWRfZmllbGRzID0gSlNPTi5wYXJzZSgkKHRoaXMpLnZhbCgpKTsKCQkJCXZhciB0ZW1wbGF0ZSA9ICQoJy5jYWxsYmFjayAuZ3JvdXBzX2ZpZWxkcyAucHJvcGVydHlfZ3JvdXAudGVtcGxhdGUnKTsKCgkJCQkkKCcuY2FsbGJhY2sgLmdyb3Vwc19maWVsZHMgLnByb3BlcnR5X2dyb3VwOm5vdCgudGVtcGxhdGUpJykucmVtb3ZlKCk7CgoJCQkJZm9yIChsZXQga2V5IGluIHNhdmVkX2ZpZWxkcykgewoKCQkJCQl2YXIgaW5zZXJ0ID0gdGVtcGxhdGUuY2xvbmUodHJ1ZSkucmVtb3ZlQ2xhc3MoJ3RlbXBsYXRlJyk7CgkJCQkJaW5zZXJ0LmZpbmQoJ2lucHV0JykuYXR0cignaWQnLCBrZXkpLnZhbChzYXZlZF9maWVsZHNba2V5XSk7CgkJCQkJaW5zZXJ0LmZpbmQoJ2lucHV0W2RhdGEtbmFtZT0iZ3JvdXBfbmFtZSInKS5hdHRyKCdpZCcsIGtleSkudmFsKHNhdmVkX2ZpZWxkc1trZXldWydncm91cF9uYW1lJ10pOwoJCQkJCWluc2VydC5pbnNlcnRCZWZvcmUoJCh0aGlzKSk7CgkJCQl9CgkJCX0sCgkJCWZvbnRTYXZlZDogZnVuY3Rpb24gKGUpIHsKCgkJCQl2YXIgc2F2ZWRfZmllbGRzID0gSlNPTi5wYXJzZSgkKHRoaXMpLnZhbCgpKTsKCQkJCXZhciBmb250ID0gJCh0aGlzKS5wYXJlbnRzKCcuZm9udC1vcHRpb24td3JhcHBlcicpOwoKCQkJCXZhciBmYW1pbHkgPSBmb250LmZpbmQoJ3NlbGVjdC5mb250LWZhbWlseScpOwoJCQkJdmFyIGNhdGVnb3J5ID0gZm9udC5maW5kKCdpbnB1dC5mb250LWNhdGVnb3J5Jyk7CgkJCQl2YXIgdmFyaWFudCA9IGZvbnQuZmluZCgnc2VsZWN0LmZvbnQtdmFyaWFudCcpOwoJCQkJdmFyIHN1YnNldCA9IGZvbnQuZmluZCgnc2VsZWN0LmZvbnQtc3Vic2V0Jyk7CgkJCQl2YXIgc2l6ZSA9IGZvbnQuZmluZCgnaW5wdXQuZm9udC1zaXplJyk7CgkJCQl2YXIgbGluZWhlaWdodCA9IGZvbnQuZmluZCgnaW5wdXQubGluZS1oZWlnaHQnKTsKCQkJCXZhciBjb2xvciA9IGZvbnQuZmluZCgnaW5wdXQuY29sb3InKTsKCgkJCQlmYW1pbHkudmFsKHNhdmVkX2ZpZWxkcy5mYW1pbHkpOwoJCQkJY2F0ZWdvcnkudmFsKHNhdmVkX2ZpZWxkcy5jYXRlZ29yeSk7CgkJCQl2YXJpYW50LnZhbChzYXZlZF9maWVsZHMudmFyaWFudCk7CgkJCQlzdWJzZXQudmFsKHNhdmVkX2ZpZWxkcy5zdWJzZXQpOwoJCQkJc2l6ZS52YWwoc2F2ZWRfZmllbGRzLnNpemUpOwoJCQkJbGluZWhlaWdodC52YWwoc2F2ZWRfZmllbGRzLmxpbmVfaGVpZ2h0KTsKCQkJCWNvbG9yLnZhbChzYXZlZF9maWVsZHMuY29sb3IpOwoJCQl9LAoJCQliaW5kQXV0b2NvbXBsZXRlOiBmdW5jdGlvbiAoZWxlbWVudCkgewoKCQkJCWVsZW1lbnQuYXV0b2NvbXBsZXRlKHsKCQkJCQlkZWxheTogNTAwLAoJCQkJCW1pbkxlbmd0aDogMywKCQkJCQlwb3NpdGlvbjogeyBteTogImxlZnQgdG9wIiwgYXQ6ICJsZWZ0IGJvdHRvbS0xIiB9LAoJCQkJCXNvdXJjZTogZnVuY3Rpb24gKHJlcXVlc3QsIHJlc3BvbnNlKSB7CgoJCQkJCQl2YXIgZXhjbHVkZV9pZHMgPSBbMF07CgkJCQkJCXZhciBpbnB1dHMgPSAkKE1lc3NpYS5vYmplY3RzX3NlYXJjaF9zbG90cyk7CgoJCQkJCQlmb3IgKHZhciBpID0gMDsgaSA8IGlucHV0cy5sZW5ndGg7IGkrKykgewoJCQkJCQkJZXhjbHVkZV9pZHMucHVzaCgkKGlucHV0c1tpXSkuYXR0cigncG9zdGlkJykpOwoJCQkJCQl9CgoJCQkJCQlNZXNzaWEueGhyID0gJC5hamF4KHsKCQkJCQkJCXR5cGU6ICdQT1NUJywKCQkJCQkJCXVybDogbWVzc2lhVmFycy5hamF4VXJsLAoJCQkJCQkJZGF0YTogewoJCQkJCQkJCWFjdGlvbjogJ3NlYXJjaF9vYmplY3RzJywKCQkJCQkJCQltZXNzaWFOb25jZTogbWVzc2lhVmFycy5tZXNzaWFOb25jZSwKCQkJCQkJCQlkYXRhOiB7CgkJCQkJCQkJCUFKQVhfTWFya2VyOiBtZXNzaWFWYXJzLkFKQVhfTWFya2VyLAoJCQkJCQkJCQl0cnlfbmFtZTogcmVxdWVzdFsndGVybSddLAoJCQkJCQkJCQlleGNsdWRlX2lkczogZXhjbHVkZV9pZHMsCgkJCQkJCQkJfSwKCQkJCQkJCX0sCgkJCQkJCQliZWZvcmVTZW5kOiBmdW5jdGlvbiAoKSB7CgoJCQkJCQkJCWlmIChNZXNzaWEueGhyICE9IG51bGwpIHsKCQkJCQkJCQkJTWVzc2lhLnhoci5hYm9ydCgpOwoJCQkJCQkJCQlNZXNzaWEueGhyID0gbnVsbDsKCQkJCQkJCQl9CgkJCQkJCQl9LAoJCQkJCQkJc3VjY2VzczogZnVuY3Rpb24gKHNlcnZlcikgewoJCQkJCQkJCXJlc3BvbnNlKHNlcnZlci5kYXRhLm9iamVjdHMpOwoJCQkJCQkJfSwKCQkJCQkJCWVycm9yOiBmdW5jdGlvbiAoTUxIdHRwUmVxdWVzdCwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHsKCgkJCQkJCQkJaWYgKE1lc3NpYS54aHIuc3RhdHVzID09PSAwICYmIE1lc3NpYS54aHIuc3RhdHVzVGV4dCA9PSAnYWJvcnQnKSB7CgkJCQkJCQkJCXJldHVybjsKCQkJCQkJCQl9CgkJCQkJCQl9LAoJCQkJCQl9KTsKCQkJCQl9LAoJCQkJCXNlbGVjdDogZnVuY3Rpb24gKGV2ZW50LCB1aSkgewoKCQkJCQkJdmFyIG9iamVjdF9maWVsZCA9ICQoZXZlbnQudGFyZ2V0KS5wYXJlbnRzKCcub2JqZWN0X29yZGVyJyk7CgkJCQkJCWlmIChvYmplY3RfZmllbGQuaGFzQ2xhc3MoJ3RlbXBsYXRlJykpIHsKCgkJCQkJCQl2YXIgb2JqZWN0X2ZpZWxkID0gJChldmVudC50YXJnZXQpLnBhcmVudHMoJy5vYmplY3Rfb3JkZXInKS5yZW1vdmVDbGFzcygndGVtcGxhdGUnKTsKCQkJCQkJCW9iamVjdF9maWVsZC5jbG9uZSgpLmFkZENsYXNzKCd0ZW1wbGF0ZScpLmluc2VydEJlZm9yZShvYmplY3RfZmllbGQpLmZpbmQoJ2lucHV0JykudmFsKCcnKS5vbignaW5wdXQnLCBNZXNzaWEuc2VyYWNoT3JkZXJUbXBsSW5wdXQpOwoJCQkJCQl9CgkJCQkJCSQoZXZlbnQudGFyZ2V0KS5hdHRyKCdwb3N0aWQnLCB1aS5pdGVtLnBvc3RpZCk7CgkJCQkJfSwKCQkJCQlzZWFyY2goZXZlbnQsIHVpKSB7CgkJCQkJCS8vbm90aGluZwoJCQkJCX0sCgkJCQkJb3BlbjogZnVuY3Rpb24gKGV2ZW50LCB1aSkgewoJCQkJCQkkKGV2ZW50LnRhcmdldCkuYXV0b2NvbXBsZXRlKCd3aWRnZXQnKS5jc3MoJ3otaW5kZXgnLCAxMDEpOwoJCQkJCX0sCgkJCQkJY2xvc2U6IGZ1bmN0aW9uIChldmVudCwgdWkpIHsKCQkJCQkJLy9ub3RoaW5nCgkJCQkJfSwKCQkJCQljaGFuZ2U6IGZ1bmN0aW9uIChldmVudCwgdWkpIHsKCgkJCQkJCXZhciBwcmV2ID0gJChldmVudC50YXJnZXQpLmRhdGEoJ3VpQXV0b2NvbXBsZXRlJykucHJldmlvdXM7CgoJCQkJCQlpZiAodHlwZW9mIHByZXYgIT09ICd1bmRlZmluZWQnICYmIHByZXYgIT09ICcnKSB7CgkJCQkJCQkkKGV2ZW50LnRhcmdldCkudmFsKHByZXYpOwoJCQkJCQl9CgkJCQkJfSwKCQkJCX0pOwoJCQl9LAoJCQl1cGRhdGVGb250Q2F0ZWdvcnk6IGZ1bmN0aW9uIChlKSB7CgoJCQkJdmFyIGNhdGVnb3J5X2RhdGEgPSAkKHRoaXMpLmZpbmQoJzpzZWxlY3RlZCcpLmRhdGEoJ2NhdGVnb3J5Jyk7CgkJCQl2YXIgY2F0ZWdvcnlfc2VsZWN0b3IgPSAkKHRoaXMpLnBhcmVudHMoJy5mb250LW9wdGlvbi13cmFwcGVyJykuZmluZCgnaW5wdXQuZm9udC1jYXRlZ29yeScpOwoKCQkJCWNhdGVnb3J5X3NlbGVjdG9yLnZhbChjYXRlZ29yeV9kYXRhKTsKCgkJCX0sCgkJCXVwZGF0ZUZvbnRWYXJpYW50czogZnVuY3Rpb24gKGUpIHsKCgkJCQl2YXIgdmFyaWFudHNfZGF0YSA9ICQodGhpcykuZmluZCgnOnNlbGVjdGVkJykuZGF0YSgndmFyaWFudHMnKTsKCQkJCXZhciBzdWJzZXRzX2RhdGEgPSAkKHRoaXMpLmZpbmQoJzpzZWxlY3RlZCcpLmF0dHIoJ2RhdGEtc3Vic2V0cycpOwoKCQkJCXZhciB2YXJpYW50c19zZWxlY3RvciA9ICQodGhpcykucGFyZW50cygnLmZvbnQtb3B0aW9uLXdyYXBwZXInKS5maW5kKCdzZWxlY3QuZm9udC12YXJpYW50Jyk7CgoJCQkJdmFyIGN1cnJlbnRfdmFyaWFudCA9IHZhcmlhbnRzX3NlbGVjdG9yLnZhbCgpOwoJCQkJdmFyIGRlZlZhcmlhbnQgPSAwOwoJCQkJdmFyIG5ld09wdGlvbnMgPSBbXTsKCQkJCXZhciBuZXdPcHRpb247CgkJCQl2YXIgc2VsZWN0ZWQ7CgoJCQkJdmFyaWFudHNfc2VsZWN0b3IudmFsKG51bGwpLmVtcHR5KCk7CgoJCQkJZm9yICh2YXIgaSA9IDA7IGkgPCB2YXJpYW50c19kYXRhLmxlbmd0aDsgaSsrKSB7CgoJCQkJCXNlbGVjdGVkID0gZmFsc2U7CgoJCQkJCWlmICh2YXJpYW50c19kYXRhW2ldLmlkID09PSBjdXJyZW50X3ZhcmlhbnQpIHsKCQkJCQkJLy8gaWYgdmFyaWFudCBleGlzdHMgaW4gbmV3IHZhcmlhbnRzIHNldCBpdCBhcyBzZWxlY3RlZC4KCQkJCQkJc2VsZWN0ZWQgPSB0cnVlOwoJCQkJCX0KCQkJCQlpZiAodmFyaWFudHNfZGF0YVtpXS5pZCA9PT0gJ3JlZ3VsYXInKSB7CgkJCQkJCS8vIGlmIHZhcmlhbnQgZG9lcyBub3QgZXhpc3RzIGRldGVjdCBpbmRleCBvZiAncmVndWxhcicgdmFyaWFudC4KCQkJCQkJZGVmVmFyaWFudCA9IGk7CgkJCQkJfQoKCQkJCQluZXdPcHRpb24gPSBuZXcgT3B0aW9uKHZhcmlhbnRzX2RhdGFbaV0udGV4dCwgdmFyaWFudHNfZGF0YVtpXS5pZCwgZmFsc2UsIHNlbGVjdGVkKTsKCQkJCQluZXdPcHRpb24uc2V0QXR0cmlidXRlKCJkYXRhLXN1YnNldHMiLCBzdWJzZXRzX2RhdGEpOwoKCQkJCQluZXdPcHRpb25zLnB1c2gobmV3T3B0aW9uKTsKCQkJCX0KCgkJCQlpZiAoc2VsZWN0ZWQgPT09IGZhbHNlKSB7CgkJCQkJbmV3T3B0aW9uc1tkZWZWYXJpYW50XS5zZWxlY3RlZCA9IHRydWU7CgkJCQl9CgoJCQkJdmFyaWFudHNfc2VsZWN0b3IuYXBwZW5kKG5ld09wdGlvbnMpOwoJCQkJdmFyaWFudHNfc2VsZWN0b3IudHJpZ2dlcignY2hhbmdlJyk7CgkJCQkkKE1lc3NpYS5mb250X3ZhcmlhbnRfc2VsZWN0b3JzKS50cmlnZ2VyKCdzZWxlY3QyOnNlbGVjdCcpOwoJCQl9LAoJCQl1cGRhdGVGb250U3Vic2V0czogZnVuY3Rpb24gKGUpIHsKCgkJCQl2YXIgc3Vic2V0c19kYXRhID0gJCh0aGlzKS5maW5kKCc6c2VsZWN0ZWQnKS5kYXRhKCdzdWJzZXRzJyk7CgkJCQl2YXIgc3Vic2V0c19zZWxlY3RvciA9ICQodGhpcykucGFyZW50cygnLmZvbnQtb3B0aW9uLXdyYXBwZXInKS5maW5kKCdzZWxlY3QuZm9udC1zdWJzZXQnKTsKCgkJCQl2YXIgY3VycmVudF9zdWJzZXQgPSBzdWJzZXRzX3NlbGVjdG9yLnZhbCgpOwoJCQkJdmFyIGRlZlN1YnNldCA9IDA7CgkJCQl2YXIgbmV3T3B0aW9ucyA9IFtdOwoJCQkJdmFyIG5ld09wdGlvbjsKCQkJCXZhciBzZWxlY3RlZDsKCgkJCQlzdWJzZXRzX3NlbGVjdG9yLnZhbChudWxsKS5lbXB0eSgpOwoKCQkJCWZvciAodmFyIGkgPSAwOyBpIDwgc3Vic2V0c19kYXRhLmxlbmd0aDsgaSsrKSB7CgoJCQkJCXNlbGVjdGVkID0gZmFsc2U7CgoJCQkJCWlmIChzdWJzZXRzX2RhdGFbaV0uaWQgPT09IGN1cnJlbnRfc3Vic2V0KSB7CgkJCQkJCS8vIGlmIHN1YnNldCBleGlzdHMgaW4gbmV3IHN1YnNldHMgc2V0IGl0IGFzIHNlbGVjdGVkLgoJCQkJCQlzZWxlY3RlZCA9IHRydWU7CgkJCQkJfQoJCQkJCWlmIChzdWJzZXRzX2RhdGFbaV0uaWQgPT09ICdsYXRpbicpIHsKCQkJCQkJLy8gaWYgc3Vic2V0IGRvZXMgbm90IGV4aXN0cyBkZXRlY3QgaW5kZXggb2YgJ2xhdGluJyB2YXJpYW50LgoJCQkJCQlkZWZTdWJzZXQgPSBpOwoJCQkJCX0KCgkJCQkJbmV3T3B0aW9uID0gbmV3IE9wdGlvbihzdWJzZXRzX2RhdGFbaV0udGV4dCwgc3Vic2V0c19kYXRhW2ldLmlkLCBmYWxzZSwgc2VsZWN0ZWQpOwoJCQkJCW5ld09wdGlvbnMucHVzaChuZXdPcHRpb24pOwoJCQkJfQoKCQkJCXN1YnNldHNfc2VsZWN0b3IuYXBwZW5kKG5ld09wdGlvbnMpOwoJCQkJc3Vic2V0c19zZWxlY3Rvci50cmlnZ2VyKCdjaGFuZ2UnKTsKCQkJfSwKCQkJdXBkYXRlRm9udFNpemVzOiBmdW5jdGlvbiAoZSkgewoKCQkJCXZhciBkZWYgPSAkKHRoaXMpLmZpbmQoJzpzZWxlY3RlZCcpLmRhdGEoJ2ZvbnRTaXplJyk7CgoJCQkJaWYgKHR5cGVvZiBkZWYgPT09ICd1bmRlZmluZWQnKSB7CgkJCQkJcmV0dXJuOwoJCQkJfQoKCQkJCSQodGhpcykucGFyZW50cygnLmZvbnQtb3B0aW9uLXdyYXBwZXInKS5maW5kKCdpbnB1dC5mb250LXNpemUnKS52YWwoZGVmKTsKCQkJfSwKCQkJdXBkYXRlTGluZUhlaWdodDogZnVuY3Rpb24gKGUpIHsKCgkJCQl2YXIgZGVmID0gJCh0aGlzKS5maW5kKCc6c2VsZWN0ZWQnKS5kYXRhKCdsaW5lSGVpZ2h0Jyk7CgoJCQkJaWYgKHR5cGVvZiBkZWYgPT09ICd1bmRlZmluZWQnKSB7CgkJCQkJcmV0dXJuOwoJCQkJfQoKCQkJCSQodGhpcykucGFyZW50cygnLmZvbnQtb3B0aW9uLXdyYXBwZXInKS5maW5kKCdpbnB1dC5saW5lLWhlaWdodCcpLnZhbChkZWYpOwoJCQl9LAoJCQlzZWxlY3RNZWRpYTogZnVuY3Rpb24gKCkgewoJCQkJJCh0aGlzKS5tZXNzaWFNZWRpYVNlbGVjdG9yKE1lc3NpYS5pbWFnZVNlbGVjdGVkKTsKCQkJfSwKCQkJcmVtb3ZlTWVkaWE6IGZ1bmN0aW9uIChldmVudCkgewoKCQkJCWV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwoJCQkJdmFyIGltYWdlcyA9ICQodGhpcykucGFyZW50cygnLmltYWdlcycpOwoJCQkJdmFyIG11bHRpcGxlVGVtcGxhdGUgPSBpbWFnZXMuZmluZCgnLnRlbXBsYXRlLm11bHRpcGxlJyk7CgoJCQkJaWYgKG11bHRpcGxlVGVtcGxhdGUubGVuZ3RoID4gMCkgewoJCQkJCSQodGhpcykucGFyZW50cygnLmljb24nKS5yZW1vdmUoKTsKCQkJCX0KCQkJCWVsc2UgewoJCQkJCSQodGhpcykucmVtb3ZlQ2xhc3MoJ3JlbW92ZS1pbWFnZScpLmFkZENsYXNzKCdwbGFjZWhvbGRlci1pbWFnZScpLnBhcmVudCgpLnJlbW92ZUF0dHIoJ2lkJykuZmluZCgnLmltYWdlJykucmVtb3ZlKCk7CgkJCQl9CgkJCQlNZXNzaWEudXBkYXRlSW1hZ2VzSW5wdXQoaW1hZ2VzKTsKCQkJCU1lc3NpYS5pbWFnZXNTbG90c1NvcnRhYmxlQWJpbGl0eShpbWFnZXMpOwoJCQl9LAoJCQlpbWFnZVNlbGVjdGVkOiBmdW5jdGlvbiAoY2FsbGVyLCBzZWxlY3Rpb24pIHsKCQkJCSQuZm4ubWVzc2lhQXBwZW5kTWVkaWFTZWxlY3Rpb24oY2FsbGVyLCBzZWxlY3Rpb24pOwoKCQkJCXZhciBpbWFnZXMgPSBjYWxsZXIucGFyZW50cygnLmltYWdlcycpOwoJCQkJTWVzc2lhLnVwZGF0ZUltYWdlc0lucHV0KGltYWdlcyk7CgkJCQlNZXNzaWEuaW1hZ2VzU2xvdHNTb3J0YWJsZUFiaWxpdHkoY2FsbGVyKTsKCQkJfSwKCQkJdXBkYXRlSW1hZ2VzSW5wdXQ6IGZ1bmN0aW9uIChjb250YWluZXIpIHsKCQkJCXZhciBpbWFnZXMgPSBbXTsKCQkJCXZhciBpY29ucyA9IGNvbnRhaW5lci5maW5kKCcuaWNvbicpOwoJCQkJdmFyIGRhdGFHZXR0ZXIgPSBjb250YWluZXIuZmluZCgnaW5wdXRbdHlwZT0iaGlkZGVuIl0nKTsKCgkJCQlmb3IgKHZhciBpID0gMDsgaSA8IGljb25zLmxlbmd0aDsgaSsrKSB7CgkJCQkJaWYgKCQoaWNvbnNbaV0pLmZpbmQoJy5wbGFjZWhvbGRlci1pbWFnZScpLmxlbmd0aCA9PT0gMCkgewoJCQkJCQlpbWFnZXMucHVzaCgkKGljb25zW2ldKS5kYXRhKCdpbWFnZWluZm8nKSk7CgkJCQkJfQoJCQkJfQoJCQkJbGV0IGltYWdlU2V0ID0gaW1hZ2VzLmZpbHRlcihpbWFnZSA9PiB7CgkJCQkJZGVsZXRlIGltYWdlLnVybDsKCQkJCQlyZXR1cm4gaW1hZ2U7CgkJCQl9KTsKCQkJCWRhdGFHZXR0ZXIudmFsKEpTT04uc3RyaW5naWZ5KGltYWdlU2V0KSk7CgkJCQlkYXRhR2V0dGVyLnRyaWdnZXIoJ2NoYW5nZScpOwoJCQl9LAoJCQlpbWFnZXNTbG90c1NvcnRhYmxlQWJpbGl0eTogZnVuY3Rpb24gKGNhbGxlcikgewoJCQkJdmFyIGNvbnRhaW5lciA9IGNhbGxlci5wYXJlbnRzKCcuaW1hZ2VzJyk7CgkJCQl2YXIgc2xvdCA9IGNvbnRhaW5lci5maW5kKCcuaW1hZ2VzLXNsb3QnKTsKCQkJCXZhciBpY29ucyA9IHNsb3QuZmluZCgnLmljb24nKTsKCgkJCQlpZiAoaWNvbnMubGVuZ3RoIDw9IDIpIHsgLy8gMSBpbWFnZSArIDEgcGxhY2Vob2xkZXIKCQkJCQlzbG90LnNvcnRhYmxlKCdkaXNhYmxlJyk7CgkJCQl9CgkJCQllbHNlIHsKCQkJCQlzbG90LnNvcnRhYmxlKCdlbmFibGUnKTsKCQkJCX0KCQkJfSwKCQkJaW1hZ2VzU2xvdHNTb3J0YWJsZUluaXQ6IGZ1bmN0aW9uICgpIHsKCgkJCQl2YXIgc2xvdHMgPSAkKCcuY2FsbGJhY2sgLmltYWdlcy1zbG90Jyk7CgoJCQkJZm9yICh2YXIgaSA9IDA7IGkgPCBzbG90cy5sZW5ndGg7IGkrKykgewoKCQkJCQl2YXIgc2xvdCA9ICQoc2xvdHNbaV0pOwoKCQkJCQlzbG90cy5zb3J0YWJsZSh7CgkJCQkJCXJldmVydDogMjAwLAoJCQkJCQlmb3JjZUhlbHBlclNpemU6IHRydWUsCgkJCQkJCWZvcmNlUGxhY2Vob2xkZXJTaXplOiB0cnVlLAoJCQkJCQlvcGFjaXR5OiAwLjUsCgkJCQkJCWl0ZW1zOiAiPiAuaWNvbltpZF0iLAoJCQkJCQlkaXN0YW5jZTogMTAsCgkJCQkJCXRvbGVyYW5jZTogJ3BvaW50ZXInLAoJCQkJCQlzY3JvbGw6IGZhbHNlLAoJCQkJCQkvL2hhbmRsZTogJy50bXBsJywKCQkJCQkJLy9jb250YWlubWVudDogJy5pY29uLXdyYXBwZXInLAoJCQkJCQlwbGFjZWhvbGRlcjogJ3NvcnRhYmxlLXBsYWNlaG9sZGVyJywKCQkJCQkJYmVmb3JlU3RvcDogZnVuY3Rpb24gKGV2ZW50LCB1aSkgewoJCQkJCQkJdWkuaGVscGVyLmNzcyh7CgkJCQkJCQkJJ2hlaWdodCc6ICcnLAoJCQkJCQkJCSd3aWR0aCc6ICcnLAoJCQkJCQkJfSk7CgoJCQkJCQkJTWVzc2lhLnVwZGF0ZUltYWdlc0lucHV0KHVpLml0ZW0ucGFyZW50cygnLmltYWdlcycpKTsKCQkJCQkJfQoJCQkJCX0pOwoKCQkJCQl2YXIgY29udGFpbmVyID0gc2xvdC5wYXJlbnRzKCcuaW1hZ2VzJyk7CgkJCQkJTWVzc2lhLmltYWdlc1Nsb3RzU29ydGFibGVBYmlsaXR5KGNvbnRhaW5lcik7CgkJCQl9CgkJCX0sCgkJfTsKCgkJcmVxdWlyZSgnLi9zZXR0aW5ncy1saWNlbmNlLmpzJykoTWVzc2lhLCAkKTsKCQlyZXF1aXJlKCcuL3NldHRpbmdzLWFjY2Vzcy5qcycpKE1lc3NpYSwgJCk7CgoJCSQoJy5jb2xvci1waWNrZXInKS5zcGVjdHJ1bSh7CgkJCXR5cGU6ICdjb21wb25lbnQnLAoJCQlzaG93SW5wdXQ6ICd0cnVlJywKCQkJc2hvd0luaXRpYWw6ICd0cnVlJywKCQkJYWxsb3dFbXB0eTogJ2ZhbHNlJywKCQl9KTsKCgkJTWVzc2lhLmltYWdlc1Nsb3RzU29ydGFibGVJbml0KCk7CgoJCS8vINCa0YDQuNGC0LXRgNC40Lgg0L7RhtC10L3QutCwINGB0LDQudGC0LAKCQlNZXNzaWEubWFrZUVsZW1lbnRzU29ydGFibGUoJCgnLmNhbGxiYWNrIC5yYXRpbmdfZmlsZWRzJykpOwoJCSQoJy5jYWxsYmFjayAucmF0aW5nX2ZpbGVkcycpLm9uKCdpbnB1dCcsICcucmF0aW5nX2NyaXRlcmlhLnRlbXBsYXRlIGlucHV0JywgTWVzc2lhLmNyaXRlcmlhVG1wbElucHV0KTsKCQkkKCcuY2FsbGJhY2sgLnJhdGluZ19maWxlZHMnKS5vbignaW5wdXQnLCAnLnJhdGluZ19jcml0ZXJpYTpub3QoLnRlbXBsYXRlKSBpbnB1dCcsIE1lc3NpYS5jcml0ZXJpYUlucHV0KTsKCQkkKCcuY2FsbGJhY2sgLnJhdGluZ19maWxlZHMnKS5vbignY2xpY2snLCAnLnJhdGluZ19jcml0ZXJpYTpub3QoLnRlbXBsYXRlKSAuaGFuZGxlci5yZW1vdmUnLCBNZXNzaWEuY3JpdGVyaWFEZWxldGUpOwoJCSQoJy5jYWxsYmFjayAucmF0aW5nX2ZpbGVkcyBpbnB1dFtuYW1lPSJzaXRlX3JhdGluZ190ZXJtcyJdJykub24oJ3VwZGF0ZWQnLCBNZXNzaWEuY3JpdGVyaWFTYXZlZCk7CgoJCS8vINCf0L7RgNGP0LTQvtC6INC+0LHRitC10LrRgtC+0LIg0LIg0L/QvtC40YHQutC+0LLQvtC5INCy0YvQtNCw0YfQtQoJCU1lc3NpYS5tYWtlRWxlbWVudHNTb3J0YWJsZSgkKCcuY2FsbGJhY2sgLm9iamVjdHNfc2VhcmNoX29yZGVyX2ZpbGVkcycpKTsKCQkkKCcuY2FsbGJhY2sgLm9iamVjdHNfc2VhcmNoX29yZGVyX2ZpbGVkcycpLm9uKCdpbnB1dCcsICcub2JqZWN0X29yZGVyLnRlbXBsYXRlIGlucHV0JywgTWVzc2lhLnNlcmFjaE9yZGVyVG1wbElucHV0KTsKCQkkKCcuY2FsbGJhY2sgLm9iamVjdHNfc2VhcmNoX29yZGVyX2ZpbGVkcycpLm9uKCdpbnB1dCcsICcub2JqZWN0X29yZGVyOm5vdCgudGVtcGxhdGUpIGlucHV0JywgTWVzc2lhLnNlcmFjaE9yZGVySW5wdXQpOwoJCSQoJy5jYWxsYmFjayAub2JqZWN0c19zZWFyY2hfb3JkZXJfZmlsZWRzJykub24oJ2NsaWNrJywgJy5vYmplY3Rfb3JkZXI6bm90KC50ZW1wbGF0ZSkgLmhhbmRsZXIucmVtb3ZlJywgTWVzc2lhLnNlcmFjaE9yZGVyRGVsZXRlKTsKCQkkKCcuY2FsbGJhY2sgLm9iamVjdHNfc2VhcmNoX29yZGVyX2ZpbGVkcyBpbnB1dFtuYW1lPSJvYmplY3RzX3NlYXJjaF9vcmRlciJdJykub24oJ3VwZGF0ZWQnLCBNZXNzaWEuc2VyYWNoT3JkZXJTYXZlZCk7CgoJCS8vINCT0YDRg9C/0L/RiyDQtNC70Y8g0YLQsNC60YHQvtC90L7QvNC40Lgg0KHQstC+0LnRgdGC0LLQsAoJCU1lc3NpYS5tYWtlRWxlbWVudHNTb3J0YWJsZSgkKCcuY2FsbGJhY2sgLmdyb3Vwc19maWVsZHMnKSk7CgkJJCgnLmNhbGxiYWNrIC5ncm91cHNfZmllbGRzJykub24oJ2lucHV0JywgJy5wcm9wZXJ0eV9ncm91cC50ZW1wbGF0ZSBpbnB1dCcsIE1lc3NpYS5wcm9wZXJ0eUdyb3VwVG1wbElucHV0KTsKCQkkKCcuY2FsbGJhY2sgLmdyb3Vwc19maWVsZHMnKS5vbignaW5wdXQnLCAnLnByb3BlcnR5X2dyb3VwOm5vdCgudGVtcGxhdGUpIGlucHV0JywgTWVzc2lhLnByb3BlcnR5R3JvdXBJbnB1dCk7CgkJJCgnLmNhbGxiYWNrIC5ncm91cHNfZmllbGRzJykub24oJ2NsaWNrJywgJy5wcm9wZXJ0eV9ncm91cDpub3QoLnRlbXBsYXRlKSAuaGFuZGxlci5yZW1vdmUnLCBNZXNzaWEucHJvcGVydHlHcm91cERlbGV0ZSk7CgkJJCgnLmNhbGxiYWNrIC5ncm91cHNfZmllbGRzIGlucHV0W25hbWU9InByb3BlcnR5X2dyb3VwcyJdJykub24oJ3VwZGF0ZWQnLCBNZXNzaWEucHJvcGVydHlHcm91cFNhdmVkKTsKCgkJLy8g0KjRgNC40YTRgtGLCgkJJCgnLmNhbGxiYWNrIC5mb250LW9wdGlvbi13cmFwcGVyIGlucHV0LmZvbnQtc2V0dGluZy1ob2xkZXInKS5vbigndXBkYXRlZCcsIE1lc3NpYS5mb250U2F2ZWQpOwoKCQkvLyDQnNC10LTQuNCwCgkJJCgnYm9keScpLm9uKCdjbGljayB0b3VjaHN0YXJ0JywgJy5jYWxsYmFjayAuaW1hZ2VzLXNsb3QgLmljb24gLmVkaXQtaW1hZ2UnLCBNZXNzaWEuc2VsZWN0TWVkaWEpOwoJCSQoJ2JvZHknKS5vbignY2xpY2sgdG91Y2hzdGFydCcsICcuY2FsbGJhY2sgLmltYWdlcy1zbG90IC5pY29uIC5yZW1vdmUtaW1hZ2UnLCBNZXNzaWEucmVtb3ZlTWVkaWEpOwoKCQkkKCdib2R5Jykub24oJ2JlZm9yZVNhdmUnLCBNZXNzaWEuc2F2ZUNyaXRlcmlhcyk7CgkJJCgnYm9keScpLm9uKCdiZWZvcmVTYXZlJywgTWVzc2lhLnNhdmVQcm9wZXJ0eUdyb3Vwcyk7CgkJJCgnYm9keScpLm9uKCdiZWZvcmVTYXZlJywgTWVzc2lhLnNhdmVTZWFyY2hPcmRlcik7CgkJJCgnYm9keScpLm9uKCdiZWZvcmVTYXZlJywgTWVzc2lhLnNhdmVGb250T3B0aW9ucyk7CgkJJCgnYm9keScpLm9uKCdiZWZvcmVTYXZlJywgTWVzc2lhLnNhdmVMaWNlbtGBZURhdGEpOwoJCU1lc3NpYS50YWJzX3NlbGVjdG9yLm9uKCdwcmVzZXRTYXZlZCcsIGZ1bmN0aW9uIChlLCBzZXR0aW5ncywgZXh0cmFfZGF0YSkgewoJCQlNZXNzaWEucHJlc2V0U2F2ZWQoc2V0dGluZ3MsIGV4dHJhX2RhdGEpOwoJCX0pOwoKCQlmb3IgKHZhciBpID0gMDsgaSA8ICQoTWVzc2lhLm9iamVjdHNfc2VhcmNoX3Nsb3RzKS5sZW5ndGg7IGkrKykgewoJCQlNZXNzaWEuYmluZEF1dG9jb21wbGV0ZSgkKCQoTWVzc2lhLm9iamVjdHNfc2VhcmNoX3Nsb3RzKVtpXSkpOwoJCX0KCgkJaWYgKGZhbHNlID09PSAkLmZuLm1lc3NpYUlzTW9iaWxlKCkpIHsKCQkJJCgnc2VsZWN0LmZvbnQtb3B0aW9uJykuc2VsZWN0Mih7CgkJCQlwbGFjZWhvbGRlcjogbWVzc2lhVmFycy5tZXNzYWdlcy5zZWxlY3RPcHRpb25zLAoJCQkJLy93aWR0aDogJzEwMCUnLAoJCQl9KTsKCQl9CgoJCSQoTWVzc2lhLmZvbnRfZmFtaWx5X3NlbGVjdG9ycykub24oJ3NlbGVjdDI6c2VsZWN0JywgTWVzc2lhLnVwZGF0ZUZvbnRDYXRlZ29yeSk7CgkJJChNZXNzaWEuZm9udF9mYW1pbHlfc2VsZWN0b3JzKS5vbignc2VsZWN0MjpzZWxlY3QnLCBNZXNzaWEudXBkYXRlRm9udFZhcmlhbnRzKTsKCQkkKE1lc3NpYS5mb250X2ZhbWlseV9zZWxlY3RvcnMpLm9uKCdzZWxlY3QyOnNlbGVjdCcsIE1lc3NpYS51cGRhdGVGb250U2l6ZXMpOwoJCSQoTWVzc2lhLmZvbnRfZmFtaWx5X3NlbGVjdG9ycykub24oJ3NlbGVjdDI6c2VsZWN0JywgTWVzc2lhLnVwZGF0ZUxpbmVIZWlnaHQpOwoKCQkkKE1lc3NpYS5mb250X3ZhcmlhbnRfc2VsZWN0b3JzKS5vbignc2VsZWN0MjpzZWxlY3QnLCBNZXNzaWEudXBkYXRlRm9udFN1YnNldHMpOwoJCSQod2luZG93KS5vbigibG9hZCIsIGZ1bmN0aW9uIChldmVudCkgeyB9KTsKCX0pOwp9KShqUXVlcnkpOyI7czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBuYW1lc3BhY2VzIjthOjA6e31zOjQzOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGluY2x1ZGVzIjthOjA6e31zOjQ0OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGZ1bmN0aW9ucyI7YTowOnt9czo0NDoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBjb25zdGFudHMiO2E6MDp7fXM6NDI6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAY2xhc3NlcyI7YTowOnt9czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBpbnRlcmZhY2VzIjthOjA6e31zOjQxOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAHRyYWl0cyI7YTowOnt9czo0MDoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBlbnVtcyI7YTowOnt9czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBtZXRhZGF0YSI7YTowOnt9fQ==";