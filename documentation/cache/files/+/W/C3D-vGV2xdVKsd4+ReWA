1702936352
waR3U4bTeM%3A43d114690a82f63f78bbc5fb334b2ec0-2970aeba06b8a215fea1da264e857bf4
s:17368:"TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlIjoxNDp7czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBkb2NCbG9jayI7TjtzOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGhhc2giO3M6MzI6IjI5NzBhZWJhMDZiOGEyMTVmZWExZGEyNjRlODU3YmY0IjtzOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAG5hbWUiO3M6MTA6Il9kaWFsb2cuanMiO3M6Mzk6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAcGF0aCI7czoyOToic3JjL2pzL19jb21wb25lbnRzL19kaWFsb2cuanMiO3M6NDE6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAc291cmNlIjtzOjEyMTE3OiJkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4gewoJd2luZG93Lm1lc3NpYVZhcnMgPSB3aW5kb3cubWVzc2lhVmFycyB8fCB7fTsKCXdpbmRvdy5tZXNzaWFWYXJzLmRpYWxvZyA9IHsKCQlkaWFsb2c6IGZhbHNlLAoJCWluaXQ6IGZ1bmN0aW9uIChjb25maWcpIHsKCQkJaWYgKHRoaXMuZGlhbG9nICE9PSBmYWxzZSkgcmV0dXJuIHRoaXMuZGlhbG9nOwoKCQkJdGhpcy5kaWFsb2cgPSB0aGlzLmNyZWF0ZURpYWxvZyhjb25maWcpOwoJCQl0aGlzLmluaXREcmFnZ2luZyh0aGlzLmRpYWxvZyk7CgkJCXRoaXMuaW5pdFJlc2l6aW5nKHRoaXMuZGlhbG9nKTsKCgkJCXJldHVybiB0aGlzLmRpYWxvZzsKCQl9LAoJCWNyZWF0ZURpYWxvZzogZnVuY3Rpb24gKGNvbmZpZykgewoKCQkJY29uc3QKCQkJCWRpYWxvZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLAoJCQkJYnV0dG9ucyA9IGNvbmZpZy5idXR0b25zLnJldmVyc2UoKTsKCgkJCWRpYWxvZy5zZXRBdHRyaWJ1dGUoJ2lkJywgY29uZmlnLmRpYWxvZ0lkKTsKCQkJZGlhbG9nLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnbWVzc2lhLWRpYWxvZycpOwoKCQkJZGlhbG9nLmlubmVySFRNTCA9CgkJCQlgPGRpdiBjbGFzcz0idGl0bGViYXIiPgoJCQkJCTxzcGFuIGNsYXNzPSJ0aXRsZSI+JHtjb25maWcuZGlhbG9nVGl0bGV9PC9zcGFuPgoJCQkJCTxzcGFuIGNsYXNzPSJjbG9zZS1kaWFsb2ciPuKcljwvc3Bhbj4KCQkJCTwvZGl2PgoJCQkJPGRpdiBjbGFzcz0iY29udGVudCI+JHtjb25maWcuZGlhbG9nQ29udGVudH08L2Rpdj4KCQkJCTxkaXYgY2xhc3M9ImJ1dHRvbnBhbmUiPgoJCQkJCTxkaXYgY2xhc3M9ImJ1dHRvbnNldCI+PC9kaXY+CgkJCQk8L2Rpdj5gOwoKCQkJZGlhbG9nLnF1ZXJ5U2VsZWN0b3IoJy5jbG9zZS1kaWFsb2cnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHdpbmRvdy5tZXNzaWFWYXJzLmRpYWxvZy5pbml0QWN0aW9ucy5jbG9zZS5iaW5kKGRpYWxvZyksIGZhbHNlKTsKCgkJCWZvciAobGV0IGkgPSAwOyBpIDwgYnV0dG9ucy5sZW5ndGg7IGkrKykgewoJCQkJY29uc3QKCQkJCQlidXR0b24gPSBjb25maWcuYnV0dG9uc1tpXSwKCQkJCQlidXR0b25FbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpOwoKCQkJCWJ1dHRvbkVsLnNldEF0dHJpYnV0ZSgndHlwZScsICdidXR0b24nKTsKCQkJCWJ1dHRvbkVsLnNldEF0dHJpYnV0ZSgnaWQnLCBidXR0b24uaWQpOwoJCQkJYnV0dG9uRWwudGV4dENvbnRlbnQgPSBidXR0b24udGV4dDsKCQkJCWJ1dHRvbkVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYnV0dG9uLmNsaWNrLmJpbmQoZGlhbG9nKSwgZmFsc2UpOwoKCQkJCWRpYWxvZy5xdWVyeVNlbGVjdG9yKCcuYnV0dG9ucGFuZSAuYnV0dG9uc2V0JykuYXBwZW5kQ2hpbGQoYnV0dG9uRWwpOwoJCQl9CgoJCQlPYmplY3QuZGVmaW5lUHJvcGVydHkoZGlhbG9nLCAnbWVzc2lhRGlhbG9nJywgewoJCQkJdmFsdWU6IHsKCQkJCQlvcGVuOiB3aW5kb3cubWVzc2lhVmFycy5kaWFsb2cuaW5pdEFjdGlvbnMub3Blbi5iaW5kKGRpYWxvZyksCgkJCQkJY2xvc2U6IHdpbmRvdy5tZXNzaWFWYXJzLmRpYWxvZy5pbml0QWN0aW9ucy5jbG9zZS5iaW5kKGRpYWxvZyksCgkJCQkJc2V0Q29udGVudDogd2luZG93Lm1lc3NpYVZhcnMuZGlhbG9nLmluaXRBY3Rpb25zLnNldENvbnRlbnQuYmluZChkaWFsb2cpLAoJCQkJfSwKCQkJfSk7CgoJCQlyZXR1cm4gZGlhbG9nOwoJCX0sCgkJaW5pdERyYWdnaW5nOiAoZGlhbG9nKSA9PiB7CgoJCQljb25zdCBkcmFnTW91c2VEb3duID0gKGUpID0+IHsKCgkJCQllID0gZSB8fCB3aW5kb3cuZXZlbnQ7CgoJCQkJY29uc3QKCQkJCQliYXNlID0gKGUudHlwZSA9PT0gJ3RvdWNoc3RhcnQnKSA/IGUudG91Y2hlc1swXSA6IGUKCQkJCQlyZWN0ID0gZS50YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CgoJCQkJdmlld1BvcnQgPSB7CgkJCQkJaGVpZ2h0OiB3aW5kb3cuaW5uZXJIZWlnaHQsCgkJCQkJd2lkdGg6IGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGgsCgkJCQl9OwoKCQkJCS8vIGdldCB0aGUgbW91c2UgY3Vyc29yIHBvc2l0aW9uIGF0IHN0YXJ0dXAgcmVsYXRpdmUgdG8gdmlld3BvcnQ6CgkJCQljdXJzb3JYID0gYmFzZS5jbGllbnRYOwoJCQkJY3Vyc29yWSA9IGJhc2UuY2xpZW50WTsKCgkJCQkvLyBnZXQgdGhlIG1vdXNlIGN1cnNvciBwb3NpdGlvbiBhdCBzdGFydHVwIHJlbGF0aXZlIHRvIGhhbmRsZXI6CgkJCQlkcmFnU3RhcnRYID0gKFRvdWNoID09PSBiYXNlLmNvbnN0cnVjdG9yKSA/IGJhc2UucGFnZVggLSByZWN0LmxlZnQgOiBiYXNlLm9mZnNldFg7CgkJCQlkcmFnU3RhcnRZID0gKFRvdWNoID09PSBiYXNlLmNvbnN0cnVjdG9yKSA/IGJhc2UucGFnZVkgLSByZWN0LnRvcCA6IGJhc2Uub2Zmc2V0WTsKCgkJCQlkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgZHJhZ01vdXNlVXAsIGZhbHNlKTsKCQkJCWRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgZHJhZ01vdXNlVXAsIGZhbHNlKTsKCgkJCQlkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBkcmFnTW91c2VNb3ZlLCBmYWxzZSk7CgkJCQlkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCBkcmFnTW91c2VNb3ZlLCBmYWxzZSk7CgkJCX0KCgkJCWNvbnN0IGRyYWdNb3VzZU1vdmUgPSAoZSkgPT4gewoJCQkJaWYgKCFlbG1udCkgewoJCQkJCXJldHVybjsKCQkJCX0KCgkJCQllID0gZSB8fCB3aW5kb3cuZXZlbnQ7CgoJCQkJbGV0CgkJCQkJdG9wLAoJCQkJCWxlZnQsCgkJCQkJcmlnaHQsCgkJCQkJYm90dG9tOwoKCQkJCWNvbnN0CgkJCQkJYmFzZSA9IChlLnR5cGUgPT09ICd0b3VjaG1vdmUnKSA/IGUudG91Y2hlc1swXSA6IGUsCgkJCQkJZGlhbG9nUG9zaXRpb25DdXJyID0gZWxtbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksCgkJCQkJY3Vyc29yU2hpZnRYID0gTWF0aC5yb3VuZChjdXJzb3JYIC0gYmFzZS5jbGllbnRYKSwgLy8gQ3Vyc29yIHNoaWZ0IFgKCQkJCQljdXJzb3JTaGlmdFkgPSBNYXRoLnJvdW5kKGN1cnNvclkgLSBiYXNlLmNsaWVudFkpOyAvLyBDdXJzb3Igc2hpZnQgWQoKCQkJCS8vIGdldCB0aGUgbW91c2UgY3Vyc29yIHBvc2l0aW9uIGF0IG1vdmUgcmVsYXRpdmUgdG8gdmlld3BvcnQ6CgkJCQljdXJzb3JYID0gYmFzZS5jbGllbnRYOwoJCQkJY3Vyc29yWSA9IGJhc2UuY2xpZW50WTsKCgkJCQlpZiAoZHJhZ1N0YXJ0WCA+PSBjdXJzb3JYKSB7CgkJCQkJbGVmdCA9IDA7IC8vIG91dCBvZiBhIHZpZXdwb3J0IHRvIGxlZnQuCgkJCQl9IGVsc2UgaWYgKChjdXJzb3JYICsgZGlhbG9nUG9zaXRpb25DdXJyLndpZHRoIC0gZHJhZ1N0YXJ0WCkgPiB2aWV3UG9ydC53aWR0aCkgewoJCQkJCWxlZnQgPSB2aWV3UG9ydC53aWR0aCAtIGRpYWxvZ1Bvc2l0aW9uQ3Vyci53aWR0aDsgLy8gb3V0IG9mIGEgdmlld3BvcnQgdG8gcmlnaHQuCgkJCQl9IGVsc2UgewoJCQkJCWxlZnQgPSBkaWFsb2dQb3NpdGlvbkN1cnIubGVmdCAtIGN1cnNvclNoaWZ0WDsgLy8gaW5zaWRlIHZpZXdwb3J0LgoJCQkJfQoKCQkJCWlmIChkcmFnU3RhcnRZID49IGN1cnNvclkpIHsKCQkJCQl0b3AgPSAwOyAvLyBvdXQgb2YgYSB2aWV3cG9ydCB0byB0b3AuCgkJCQl9IGVsc2UgaWYgKChjdXJzb3JZICsgZGlhbG9nUG9zaXRpb25DdXJyLmhlaWdodCAtIGRyYWdTdGFydFkpID4gdmlld1BvcnQuaGVpZ2h0KSB7CgkJCQkJdG9wID0gdmlld1BvcnQuaGVpZ2h0IC0gZGlhbG9nUG9zaXRpb25DdXJyLmhlaWdodDsgLy8gb3V0IG9mIGEgdmlld3BvcnQgdG8gYm90dG9tLgoJCQkJfSBlbHNlIHsKCQkJCQl0b3AgPSBkaWFsb2dQb3NpdGlvbkN1cnIudG9wIC0gY3Vyc29yU2hpZnRZOyAvLyBpbnNpZGUgdmlld3BvcnQuCgkJCQl9CgoJCQkJcmlnaHQgPSB2aWV3UG9ydC53aWR0aCAtIChsZWZ0ICsgZGlhbG9nUG9zaXRpb25DdXJyLndpZHRoKTsKCQkJCWJvdHRvbSA9IHZpZXdQb3J0LmhlaWdodCAtICh0b3AgKyBkaWFsb2dQb3NpdGlvbkN1cnIuaGVpZ2h0KTsKCgkJCQkvLyBzZXQgdGhlIGVsZW1lbnQncyBuZXcgcG9zaXRpb246CgkJCQllbG1udC5zdHlsZS5pbnNldCA9IGAke3RvcH1weCAke3JpZ2h0fXB4ICR7Ym90dG9tfXB4ICR7bGVmdH1weGA7CgkJCX0KCgkJCWNvbnN0IGRyYWdNb3VzZVVwID0gKCkgPT4gewoJCQkJZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGRyYWdNb3VzZVVwLCBmYWxzZSk7CgkJCQlkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIGRyYWdNb3VzZVVwLCBmYWxzZSk7CgoJCQkJZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgZHJhZ01vdXNlTW92ZSwgZmFsc2UpOwoJCQkJZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgZHJhZ01vdXNlTW92ZSwgZmFsc2UpOwoJCQl9CgoJCQljb25zdCByZXNpemVUaHJvdHRsZXIgPSBmdW5jdGlvbiAoKSB7CgkJCQljbGVhclRpbWVvdXQocmVzaXplVGltZXIpOwoJCQkJcmVzaXplVGltZXIgPSBzZXRUaW1lb3V0KHJlc2l6ZSwgMjAwKTsKCQkJfQoKCQkJY29uc3QgcmVzaXplID0gZnVuY3Rpb24gKCkgewoJCQkJZWxtbnQuc3R5bGUuaW5zZXQgPSAnJzsKCQkJfQoKCQkJY29uc3QgZ2V0SGVhZGVyID0gKGVsZW1lbnQpID0+IHsKCQkJCXZhciBoZWFkZXJJdGVtcyA9IGVsZW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgndGl0bGViYXInKTsKCgkJCQlpZiAoaGVhZGVySXRlbXMubGVuZ3RoID09PSAxKSB7CgkJCQkJcmV0dXJuIGhlYWRlckl0ZW1zWzBdOwoJCQkJfQoKCQkJCXJldHVybiBudWxsOwoJCQl9CgoJCQlsZXQKCQkJCWN1cnNvclgsCgkJCQljdXJzb3JZLAoJCQkJcmVzaXplVGltZXIsCgkJCQloZWFkZXIgPSBnZXRIZWFkZXIoZGlhbG9nKSwKCQkJCWVsbW50ID0gZGlhbG9nLAoJCQkJdmlld1BvcnQ7CgoJCQlpZiAoaGVhZGVyKSB7CgkJCQloZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgZHJhZ01vdXNlRG93biwgZmFsc2UpOwoJCQkJaGVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBkcmFnTW91c2VEb3duLCBmYWxzZSk7CgkJCQl3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgcmVzaXplVGhyb3R0bGVyLCBmYWxzZSk7CgkJCX0KCQl9LAoJCWluaXRSZXNpemluZzogZnVuY3Rpb24gKGRpYWxvZykgewoKCQkJY29uc3QgZHJhZ01vdXNlRG93biA9IGZ1bmN0aW9uIChlKSB7CgoJCQkJY29uc3QKCQkJCQliYXNlID0gKGUudHlwZSA9PT0gJ3RvdWNoc3RhcnQnKSA/IGUudG91Y2hlc1swXSA6IGUsCgkJCQkJdGFyZ2V0Q2xhc3NlcyA9IGUudGFyZ2V0LmNsYXNzTmFtZSwKCQkJCQlkaWFsb2dQb3NpdGlvbkN1cnIgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwoKCQkJCXZpZXdQb3J0ID0gewoJCQkJCWhlaWdodDogd2luZG93LmlubmVySGVpZ2h0LAoJCQkJCXdpZHRoOiBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoLAoJCQkJfTsKCgkJCQljdXJzb3JYID0gYmFzZS5jbGllbnRYOwoJCQkJY3Vyc29yWSA9IGJhc2UuY2xpZW50WTsKCgkJCQlpZiAodGFyZ2V0Q2xhc3Nlcy5pbmRleE9mKCdyZXNpemVyLXRvcCcpICE9PSAtMSkgewoJCQkJCWN1cnJlbnRSZXNpemVyID0gJ3RvcCc7CgkJCQl9IGVsc2UgaWYgKHRhcmdldENsYXNzZXMuaW5kZXhPZigncmVzaXplci1yaWdodCcpICE9PSAtMSkgewoJCQkJCWN1cnJlbnRSZXNpemVyID0gJ3JpZ2h0JzsKCQkJCX0gZWxzZSBpZiAodGFyZ2V0Q2xhc3Nlcy5pbmRleE9mKCdyZXNpemVyLWJvdHRvbScpICE9PSAtMSkgewoJCQkJCWN1cnJlbnRSZXNpemVyID0gJ2JvdHRvbSc7CgkJCQl9IGVsc2UgaWYgKHRhcmdldENsYXNzZXMuaW5kZXhPZigncmVzaXplci1sZWZ0JykgIT09IC0xKSB7CgkJCQkJY3VycmVudFJlc2l6ZXIgPSAnbGVmdCc7CgkJCQl9IGVsc2UgaWYgKHRhcmdldENsYXNzZXMuaW5kZXhPZigncmVzaXplci1ib3RoJykgIT09IC0xKSB7CgkJCQkJY3VycmVudFJlc2l6ZXIgPSAnYm90aCc7CgkJCQl9CgoJCQkJLyoqCgkJCQkgKiBDb21wZW5zYXRpb24gZm9yIHRoaWNrbmVzcwoJCQkJICogb2YgSFRNTCBoYW5kbGVyLgoJCQkJICovCgkJCQlkZWx0YSA9IHsKCQkJCQl0b3A6IGRpYWxvZ1Bvc2l0aW9uQ3Vyci50b3AgLSBjdXJzb3JZLAoJCQkJCXJpZ2h0OiBkaWFsb2dQb3NpdGlvbkN1cnIucmlnaHQgLSBjdXJzb3JYLAoJCQkJCWJvdHRvbTogZGlhbG9nUG9zaXRpb25DdXJyLmJvdHRvbSAtIGN1cnNvclksCgkJCQkJbGVmdDogZGlhbG9nUG9zaXRpb25DdXJyLmxlZnQgLSBjdXJzb3JYLAoJCQkJfQoKCQkJCWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBkcmFnTW91c2VNb3ZlLCBmYWxzZSk7CgkJCQlkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgZHJhZ01vdXNlTW92ZSwgZmFsc2UpOwoJCQkJZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBkcmFnTW91c2VVcCwgZmFsc2UpOwoJCQkJZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgZHJhZ01vdXNlVXAsIGZhbHNlKTsKCQkJfQoKCQkJY29uc3QgZHJhZ01vdXNlTW92ZSA9IGZ1bmN0aW9uIChlKSB7CgkJCQljb25zdAoJCQkJCWJhc2UgPSAoZS50eXBlID09PSAndG91Y2htb3ZlJykgPyBlLnRvdWNoZXNbMF0gOiBlLAoJCQkJCWRpYWxvZ1Bvc2l0aW9uQ3VyciA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CgoJCQkJbGV0CgkJCQkJY2xpZW50WCA9IGJhc2UuY2xpZW50WCwKCQkJCQljbGllbnRZID0gYmFzZS5jbGllbnRZLAoJCQkJCXRvcCwKCQkJCQlyaWdodCwKCQkJCQlib3R0b20sCgkJCQkJbGVmdDsKCgkJCQlpZiAoY3VycmVudFJlc2l6ZXIgPT09ICd0b3AnKSB7CgoJCQkJCXRvcCA9IGNsaWVudFkgKyBkZWx0YS50b3A7CgkJCQkJcmlnaHQgPSB2aWV3UG9ydC53aWR0aCAtIGRpYWxvZ1Bvc2l0aW9uQ3Vyci5yaWdodDsKCQkJCQlib3R0b20gPSB2aWV3UG9ydC5oZWlnaHQgLSBkaWFsb2dQb3NpdGlvbkN1cnIuYm90dG9tOwoJCQkJCWxlZnQgPSBkaWFsb2dQb3NpdGlvbkN1cnIubGVmdDsKCgkJCQl9IGVsc2UgaWYgKGN1cnJlbnRSZXNpemVyID09PSAncmlnaHQnKSB7CgoJCQkJCXRvcCA9IGRpYWxvZ1Bvc2l0aW9uQ3Vyci50b3A7CgkJCQkJcmlnaHQgPSB2aWV3UG9ydC53aWR0aCAtIChjbGllbnRYICsgZGVsdGEucmlnaHQpOwoJCQkJCWJvdHRvbSA9IHZpZXdQb3J0LmhlaWdodCAtIGRpYWxvZ1Bvc2l0aW9uQ3Vyci5ib3R0b207CgkJCQkJbGVmdCA9IGRpYWxvZ1Bvc2l0aW9uQ3Vyci5sZWZ0OwoKCQkJCX0gZWxzZSBpZiAoY3VycmVudFJlc2l6ZXIgPT09ICdib3R0b20nKSB7CgoJCQkJCXRvcCA9IGRpYWxvZ1Bvc2l0aW9uQ3Vyci50b3A7CgkJCQkJcmlnaHQgPSB2aWV3UG9ydC53aWR0aCAtIGRpYWxvZ1Bvc2l0aW9uQ3Vyci5yaWdodDsKCQkJCQlib3R0b20gPSB2aWV3UG9ydC5oZWlnaHQgLSAoY2xpZW50WSArIGRlbHRhLmJvdHRvbSk7CgkJCQkJbGVmdCA9IGRpYWxvZ1Bvc2l0aW9uQ3Vyci5sZWZ0OwoKCQkJCX0gZWxzZSBpZiAoY3VycmVudFJlc2l6ZXIgPT09ICdsZWZ0JykgewoKCQkJCQl0b3AgPSBkaWFsb2dQb3NpdGlvbkN1cnIudG9wOwoJCQkJCXJpZ2h0ID0gdmlld1BvcnQud2lkdGggLSBkaWFsb2dQb3NpdGlvbkN1cnIucmlnaHQ7CgkJCQkJYm90dG9tID0gdmlld1BvcnQuaGVpZ2h0IC0gZGlhbG9nUG9zaXRpb25DdXJyLmJvdHRvbTsKCQkJCQlsZWZ0ID0gY2xpZW50WCArIGRlbHRhLmxlZnQ7CgoJCQkJfSBlbHNlIGlmIChjdXJyZW50UmVzaXplciA9PT0gJ2JvdGgnKSB7CgoJCQkJCXRvcCA9IGRpYWxvZ1Bvc2l0aW9uQ3Vyci50b3A7CgkJCQkJcmlnaHQgPSB2aWV3UG9ydC53aWR0aCAtIChjbGllbnRYICsgZGVsdGEucmlnaHQpOwoJCQkJCWJvdHRvbSA9IHZpZXdQb3J0LmhlaWdodCAtIChjbGllbnRZICsgZGVsdGEuYm90dG9tKTsKCQkJCQlsZWZ0ID0gZGlhbG9nUG9zaXRpb25DdXJyLmxlZnQ7CgkJCQl9CgoJCQkJLyoqCgkJCQkgKiBQcmV2ZW50IHJlc2l6ZSBvdmVyCgkJCQkgKiB2aWV3cG9ydCBsaW1pdHMuCgkJCQkgKi8KCgkJCQlpZiAodG9wIDwgMCkgdG9wID0gMDsKCQkJCWlmIChyaWdodCA8IDApIHJpZ2h0ID0gMDsKCQkJCWlmIChsZWZ0IDwgMCkgbGVmdCA9IDA7CgkJCQlpZiAoYm90dG9tIDwgMCkgYm90dG9tID0gMDsKCgkJCQlpZiAodG9wICsgZGlhbG9nUG9zaXRpb25DdXJyLmhlaWdodCA+IHZpZXdQb3J0LmhlaWdodCkgdG9wID0gdmlld1BvcnQuaGVpZ2h0IC0gZGlhbG9nUG9zaXRpb25DdXJyLmhlaWdodDsKCQkJCWlmIChsZWZ0ICsgZGlhbG9nUG9zaXRpb25DdXJyLndpZHRoID4gdmlld1BvcnQud2lkdGgpIGxlZnQgPSB2aWV3UG9ydC53aWR0aCAtIGRpYWxvZ1Bvc2l0aW9uQ3Vyci53aWR0aDsKCgkJCQllbGVtZW50LnN0eWxlLmluc2V0ID0gYCR7TWF0aC5yb3VuZCh0b3ApfXB4ICR7TWF0aC5yb3VuZChyaWdodCl9cHggJHtNYXRoLnJvdW5kKGJvdHRvbSl9cHggJHtNYXRoLnJvdW5kKGxlZnQpfXB4YDsKCQkJfQoKCQkJY29uc3QgZHJhZ01vdXNlVXAgPSBmdW5jdGlvbiAoKSB7CgkJCQlkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgZHJhZ01vdXNlTW92ZSwgZmFsc2UpOwoJCQkJZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIGRyYWdNb3VzZU1vdmUsIGZhbHNlKTsKCQkJCWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgZHJhZ01vdXNlVXAsIGZhbHNlKTsKCQkJCWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIGRyYWdNb3VzZVVwLCBmYWxzZSk7CgkJCX0KCgkJCWNvbnN0CgkJCQllbGVtZW50ID0gZGlhbG9nLAoJCQkJdG9wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JyksCgkJCQlyaWdodCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLAoJCQkJYm90dG9tID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JyksCgkJCQlsZWZ0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JyksCgkJCQlib3RoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CgoJCQlsZXQKCQkJCWN1cnNvclgsCgkJCQljdXJzb3JZLAoJCQkJdmlld1BvcnQsCgkJCQljdXJyZW50UmVzaXplciwKCQkJCWRlbHRhOwoKCQkJdG9wLmNsYXNzTmFtZSA9ICdyZXNpemVyLXRvcCc7CgkJCXJpZ2h0LmNsYXNzTmFtZSA9ICdyZXNpemVyLXJpZ2h0JzsKCQkJYm90dG9tLmNsYXNzTmFtZSA9ICdyZXNpemVyLWJvdHRvbSc7CgkJCWxlZnQuY2xhc3NOYW1lID0gJ3Jlc2l6ZXItbGVmdCc7CgkJCWJvdGguY2xhc3NOYW1lID0gJ3Jlc2l6ZXItYm90aCc7CgoJCQlkaWFsb2cuYXBwZW5kQ2hpbGQodG9wKTsKCQkJZGlhbG9nLmFwcGVuZENoaWxkKHJpZ2h0KTsKCQkJZGlhbG9nLmFwcGVuZENoaWxkKGJvdHRvbSk7CgkJCWRpYWxvZy5hcHBlbmRDaGlsZChsZWZ0KTsKCQkJZGlhbG9nLmFwcGVuZENoaWxkKGJvdGgpOwoKCQkJdG9wLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGRyYWdNb3VzZURvd24sIGZhbHNlKTsKCQkJdG9wLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBkcmFnTW91c2VEb3duLCBmYWxzZSk7CgoJCQlyaWdodC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBkcmFnTW91c2VEb3duLCBmYWxzZSk7CgkJCXJpZ2h0LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBkcmFnTW91c2VEb3duLCBmYWxzZSk7CgoJCQlib3R0b20uYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgZHJhZ01vdXNlRG93biwgZmFsc2UpOwoJCQlib3R0b20uYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIGRyYWdNb3VzZURvd24sIGZhbHNlKTsKCgkJCWxlZnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgZHJhZ01vdXNlRG93biwgZmFsc2UpOwoJCQlsZWZ0LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBkcmFnTW91c2VEb3duLCBmYWxzZSk7CgoJCQlib3RoLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGRyYWdNb3VzZURvd24sIGZhbHNlKTsKCQkJYm90aC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgZHJhZ01vdXNlRG93biwgZmFsc2UpOwoJCX0sCgkJaW5pdEFjdGlvbnM6IHsKCQkJLyoqCgkJCSAqIE9wZW4gZGlhbG9nIGNvbnRhaW5lci4gdGhpcyA9IGNvbnRhaW5lci4KCQkJICoKCQkJICogQHJldHVybiB2b2lkCgkJCSAqLwoJCQlvcGVuOiBmdW5jdGlvbiAoKSB7CgkJCQljb25zdAoJCQkJCWR1ciA9IDMwMCwKCQkJCQlvdmVybGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CgoJCQkJY29uc3Qgc2hvdyA9ICh0aW1lKSA9PiB7CgkJCQkJb3ZlcmxheS5zdHlsZS5vcGFjaXR5ID0gJyc7CgkJCQkJdGhpcy5zdHlsZS50cmFuc2Zvcm0gPSAnJzsKCQkJCQl0aGlzLnN0eWxlLm9wYWNpdHkgPSAnJzsKCgkJCQkJc2V0VGltZW91dCgoKSA9PiB0aGlzLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKSwgZHVyKTsKCQkJCX07CgoJCQkJb3ZlcmxheS5zZXRBdHRyaWJ1dGUoJ2lkJywgJ21lc3NpYS1kaWFsb2ctb3ZlcmxheScpOwoJCQkJb3ZlcmxheS5hcHBlbmRDaGlsZCh0aGlzKTsKCgkJCQlvdmVybGF5LnN0eWxlLnRyYW5zaXRpb24gPSBgYWxsICR7ZHVyfW1zYDsKCQkJCW92ZXJsYXkuc3R5bGUub3BhY2l0eSA9IDA7CgoJCQkJdGhpcy5zdHlsZS50cmFuc2l0aW9uID0gYGFsbCAke2R1cn1tc2A7CgkJCQl0aGlzLnN0eWxlLm9wYWNpdHkgPSAwOwoJCQkJdGhpcy5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWSgtNTAlKSc7CgoJCQkJZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChvdmVybGF5KTsKCQkJCWRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnb3ZlcmZsb3cteS1oaWRkZW4nLCAndG91Y2gtYWN0aW9uLW5vbmUnKTsKCgkJCQlsZXQgcmVxdWVzdElkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHNob3cpOwoJCQl9LAoJCQkvKioKCQkJICogQ2xvc2UgZGlhbG9nIGNvbnRhaW5lci4gdGhpcyA9IGNvbnRhaW5lci4KCQkJICoKCQkJICogQHJldHVybiB2b2lkCgkJCSAqLwoJCQljbG9zZTogZnVuY3Rpb24gKCkgewoJCQkJY29uc3QKCQkJCQlkdXIgPSAzMDAsCgkJCQkJb3ZlcmxheSA9IHRoaXMuY2xvc2VzdCgnI21lc3NpYS1kaWFsb2ctb3ZlcmxheScpLAoJCQkJCWV2ZW50ID0gbmV3IEV2ZW50KCdkaWFsb2dDbG9zZWQnKTsKCgkJCQlvdmVybGF5LnN0eWxlLnRyYW5zaXRpb24gPSBgYWxsICR7ZHVyfW1zYDsKCQkJCW92ZXJsYXkuc3R5bGUub3BhY2l0eSA9IDA7CgoJCQkJdGhpcy5zdHlsZS50cmFuc2l0aW9uID0gYGFsbCAke2R1cn1tc2A7CgkJCQl0aGlzLnN0eWxlLm9wYWNpdHkgPSAwOwoJCQkJdGhpcy5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWSg1MCUpJzsKCgkJCQlzZXRUaW1lb3V0KCgpID0+IHsKCQkJCQlvdmVybGF5LnN0eWxlLm9wYWNpdHkgPSAnJzsKCQkJCQl0aGlzLnN0eWxlLm9wYWNpdHkgPSAnJzsKCQkJCQl0aGlzLmRpc3BhdGNoRXZlbnQoZXZlbnQpOwoJCQkJCW92ZXJsYXkucmVtb3ZlKCk7CgkJCQkJZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdvdmVyZmxvdy15LWhpZGRlbicsICd0b3VjaC1hY3Rpb24tbm9uZScpOwoJCQkJfSwgZHVyKTsKCQkJfSwKCQkJLyoqCgkJCSAqIFNldCBuZXcgZGlhbG9nIEhUTUwgZGF0YS4gdGhpcyA9IGNvbnRhaW5lci4KCQkJICoKCQkJICogQHJldHVybiB2b2lkCgkJCSAqLwoJCQlzZXRDb250ZW50OiBmdW5jdGlvbiAoY29udGVudCkgewoJCQkJY29uc3QgY29udGFpbmVyID0gdGhpcy5xdWVyeVNlbGVjdG9yKCcuY29udGVudCcpOwoJCQkJY29udGFpbmVyLmlubmVySFRNTCA9IG51bGw7CgkJCQljb250YWluZXIuaW5zZXJ0QWRqYWNlbnRIVE1MKCdhZnRlcmJlZ2luJywgY29udGVudCk7CgkJCX0sCgkJfQoJfQp9KTsiO3M6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAbmFtZXNwYWNlcyI7YTowOnt9czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBpbmNsdWRlcyI7YTowOnt9czo0NDoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBmdW5jdGlvbnMiO2E6MDp7fXM6NDQ6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAY29uc3RhbnRzIjthOjA6e31zOjQyOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGNsYXNzZXMiO2E6MDp7fXM6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAaW50ZXJmYWNlcyI7YTowOnt9czo0MToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQB0cmFpdHMiO2E6MDp7fXM6NDA6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAZW51bXMiO2E6MDp7fXM6NDM6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAbWV0YWRhdGEiO2E6MDp7fX0=";